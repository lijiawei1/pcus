(function(d){Function.prototype.ligerExtend=function(b,c){if("function"!=typeof b)return this;this.base=b.prototype;this.base.constructor=b;var a=function(){};a.prototype=b.prototype;this.prototype=new a;this.prototype.constructor=this;c&&d.extend(this.prototype,c)};Function.prototype.ligerDefer=function(b,c,a){var e=this;return setTimeout(function(){e.apply(b,a||[])},c)};window.liger=d.ligerui={version:"V1.3.2",managerCount:0,managers:{},managerIdPrev:"ligerui",autoNewId:!0,error:{managerIsExist:"管理器id已经存在"},
pluginPrev:"liger",attrPrev:"data",getId:function(b){b=b||this.managerIdPrev;b+=1E3+this.managerCount;this.managerCount++;return b},add:function(b){if(2==arguments.length){var c=arguments[1];c.id=c.id||c.options.id||arguments[0].id;this.addManager(c)}else b.id||(b.id=this.getId(b.__idPrev())),this.managers[b.id]=b},remove:function(b){if("string"==typeof b||"number"==typeof b)delete liger.managers[b];else if("object"==typeof b)if(b instanceof liger.core.Component)delete liger.managers[b.id];else{if(!d(b).attr(this.idAttrName))return!1;
delete liger.managers[d(b).attr(this.idAttrName)]}},get:function(b,c){c=c||"ligeruiid";return"string"==typeof b||"number"==typeof b?liger.managers[b]:"object"==typeof b?(b=b.length?b[0]:b,(c=b[c]||d(b).attr(c))?liger.managers[c]:null):null},find:function(b){var c=[],a;for(a in this.managers){var f=this.managers[a];b instanceof Function?f instanceof b&&c.push(f):b instanceof Array?-1!=d.inArray(f.__getType(),b)&&c.push(f):f.__getType()==b&&c.push(f)}return c},run:function(b,c,a){if(b){a=d.extend({defaultsNamespace:"ligerDefaults",
methodsNamespace:"ligerMethods",controlNamespace:"controls",idAttrName:"ligeruiid",isStatic:!1,hasElement:!0,propertyToElemnt:null},a||{});b=b.replace(/^ligerGet/,"");b=b.replace(/^liger/,"");if(null==this||this==window||a.isStatic)return liger.plugins[b]||(liger.plugins[b]={fn:d[liger.pluginPrev+b],isStatic:!0}),new d.ligerui[a.controlNamespace][b](d.extend({},d[a.defaultsNamespace][b]||{},d[a.defaultsNamespace][b+"String"]||{},0<c.length?c[0]:{}));liger.plugins[b]||(liger.plugins[b]={fn:d.fn[liger.pluginPrev+
b],isStatic:!1});if(/Manager$/.test(b))return liger.get(this,a.idAttrName);this.each(function(){if(this[a.idAttrName]||d(this).attr(a.idAttrName)){var e=liger.get(this[a.idAttrName]||d(this).attr(a.idAttrName));e&&0<c.length&&e.set(c[0])}else 1<=c.length&&"string"==typeof c[0]||(e=d.extend({},d[a.defaultsNamespace][b],d[a.defaultsNamespace][b+"String"],0<c.length?c[0]:null),a.propertyToElemnt&&(e[a.propertyToElemnt]=this),a.hasElement?new d.ligerui[a.controlNamespace][b](this,e):new d.ligerui[a.controlNamespace][b](e))});
if(0==this.length)return null;if(0==c.length||"object"==typeof c[0])return liger.get(this,a.idAttrName);if("string"==typeof c[0]){var e=liger.get(this,a.idAttrName);if(null==e)return;if("option"==c[0]){if(2==c.length)return e.get(c[1]);if(3<=c.length)return e.set(c[1],c[2])}else{var g=c[0];if(!e[g])return;var h=Array.apply(null,c);h.shift();return e[g].apply(e,h)}}return null}},defaults:{},methods:{},core:{},controls:{},plugins:{}};d.ligerDefaults={};d.ligerMethos={};liger.defaults=d.ligerDefaults;
liger.methods=d.ligerMethos;d.fn.liger=function(b){return b?liger.run.call(this,b,arguments):liger.get(this)};liger.core.Component=function(b){this.events=this.events||{};this.options=b||{};this.children={}};d.extend(liger.core.Component.prototype,{__getType:function(){return"liger.core.Component"},__idPrev:function(){return"ligerui"},set:function(b,c,a){if(b)if("object"==typeof b){this.options!=b?d.extend(this.options,b):b=d.extend({},b);if(void 0==c||1==c)for(var e in b)0==e.indexOf("on")&&this.set(e,
b[e]);if(void 0==c||0==c)for(e in b)0!=e.indexOf("on")&&this.set(e,b[e],a)}else 0==b.indexOf("on")?"function"==typeof c&&this.bind(b.substr(2),c):(this.options||(this.options={}),0!=this.trigger("propertychange",[b,c])&&(this.options[b]=c,e="_set"+b.substr(0,1).toUpperCase()+b.substr(1),this[e]&&this[e].call(this,c,a),this.trigger("propertychanged",[b,c])))},get:function(b){var c="_get"+b.substr(0,1).toUpperCase()+b.substr(1);return this[c]?this[c].call(this,b):this.options[b]},hasBind:function(b){b=
b.toLowerCase();return(b=this.events[b])&&b.length?!0:!1},trigger:function(b,c){if(b&&(b=b.toLowerCase(),b=this.events[b])){c=c||[];0==c instanceof Array&&(c=[c]);for(var a=0;a<b.length;a++){var d=b[a];if(0==d.handler.apply(d.context,c))return!1}}},bind:function(b,c,a){if("object"==typeof b)for(var e in b)this.bind(e,b[e]);else{if("function"!=typeof c)return!1;b=b.toLowerCase();e=this.events[b]||[];e.push({handler:c,context:a||this});this.events[b]=e}},unbind:function(b,c){if(b){var a=b.toLowerCase();
if((b=this.events[a])&&b.length)if(c)for(var a=0,d=b.length;a<d;a++){if(b[a].handler==c){b.splice(a,1);break}}else delete this.events[a]}else this.events={}},destroy:function(){liger.remove(this)}});liger.core.UIComponent=function(b,c){liger.core.UIComponent.base.constructor.call(this,c);(c=this._extendMethods())&&d.extend(this,c);this.element=b;this._init();this._preRender();this.trigger("render");this._render();this.trigger("rendered");this._rendered()};liger.core.UIComponent.ligerExtend(liger.core.Component,
{__getType:function(){return"liger.core.UIComponent"},_extendMethods:function(){},_init:function(){this.type=this.__getType();this.id=this.element?this.options.id||this.element.id||liger.getId(this.__idPrev()):this.options.id||liger.getId(this.__idPrev());liger.add(this);if(this.element){var b=this.attr();if(b&&b instanceof Array)for(var c=0;c<b.length;c++){var a=b[c];d(this.element).attr(a)&&(this.options[a]=d(this.element).attr(a))}b=this.options;if(d(this.element).attr("ligerui"))try{var f=d(this.element).attr("ligerui");
0!=f.indexOf("{")&&(f="{"+f+"}");eval("attroptions \x3d "+f+";");f&&d.extend(b,f)}catch(g){console.error(g)}d.extend(b,function(c,b){var a={};if(!c||-1!=c.indexOf("."))return a;c=liger.defaults[c];if(!c)return a;for(var e in c)if(b.attr(liger.attrPrev+"-"+e)){var d=b.attr(liger.attrPrev+"-"+e);a[e]="boolean"==typeof c[e]?"true"==d||"1"==d:d}return a}(this.__getType(),d(this.element)))}},_preRender:function(){},_render:function(){},_rendered:function(){this.element&&d(this.element).attr("ligeruiid",
this.id)},_setCls:function(b){this.element&&b&&d(this.element).addClass(b)},attr:function(){return[]},destroy:function(){this.element&&d(this.element).remove();this.options=null;liger.remove(this)}});liger.controls.Input=function(b,c){liger.controls.Input.base.constructor.call(this,b,c)};liger.controls.Input.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Input"},attr:function(){return["nullText"]},setValue:function(b){return this.set("value",b)},getValue:function(){return this.get("value")},
_setReadonly:function(b){var c=this.wrapper||this.text;if(c&&c.hasClass("l-text")){var a=this.inputText;b?(a&&a.attr("readonly","readonly"),c.addClass("l-text-readonly")):(a&&a.removeAttr("readonly"),c.removeClass("l-text-readonly"))}},setReadonly:function(b){return this.set("readonly",b)},setEnabled:function(){return this.set("disabled",!1)},setDisabled:function(){return this.set("disabled",!0)},updateStyle:function(){},resize:function(b,c){this.set({width:b,height:c+2})}});liger.win={top:!1,mask:function(b){function c(){if(liger.win.windowMask){var c=
d(window).height()+d(window).scrollTop();liger.win.windowMask.height(c)}}this.windowMask||(this.windowMask=d("\x3cdiv class\x3d'l-window-mask' style\x3d'display: block;'\x3e\x3c/div\x3e").appendTo("body"),d(window).bind("resize.ligeruiwin",c),d(window).bind("scroll",c));this.windowMask.show();c();this.masking=!0},unmask:function(b){for(var c=d("body \x3e .l-dialog:visible,body \x3e .l-window:visible"),a=0,f=c.length;a<f;a++){var g=c.eq(a).attr("ligeruiid");if((!b||b.id!=g)&&(g=liger.get(g))&&g.get("modal"))return}this.windowMask&&
this.windowMask.hide();this.masking=!1},createTaskbar:function(){this.taskbar||(this.taskbar=d('\x3cdiv class\x3d"l-taskbar"\x3e\x3cdiv class\x3d"l-taskbar-tasks"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-clear"\x3e\x3c/div\x3e\x3c/div\x3e').appendTo("body"),this.top&&this.taskbar.addClass("l-taskbar-top"),this.taskbar.tasks=d(".l-taskbar-tasks:first",this.taskbar),this.tasks={});this.taskbar.show();this.taskbar.animate({bottom:0});return this.taskbar},removeTaskbar:function(){var b=this;b.taskbar.animate({bottom:-32},
function(){b.taskbar.remove();b.taskbar=null})},activeTask:function(b){for(var c in this.tasks){var a=this.tasks[c];c==b.id?a.addClass("l-taskbar-task-active"):a.removeClass("l-taskbar-task-active")}},getTask:function(b){if(this.taskbar)return this.tasks[b.id]?this.tasks[b.id]:null},addTask:function(b){var c=this;c.taskbar||c.createTaskbar();if(c.tasks[b.id])return c.tasks[b.id];var a=b.get("title"),a=c.tasks[b.id]=d('\x3cdiv class\x3d"l-taskbar-task"\x3e\x3cdiv class\x3d"l-taskbar-task-icon"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-taskbar-task-content"\x3e'+
a+"\x3c/div\x3e\x3c/div\x3e");c.taskbar.tasks.append(a);c.activeTask(b);a.bind("click",function(){c.activeTask(b);b.actived?b.min():b.active()}).hover(function(){d(this).addClass("l-taskbar-task-over")},function(){d(this).removeClass("l-taskbar-task-over")});return a},hasTask:function(){for(var b in this.tasks)if(this.tasks[b])return!0;return!1},removeTask:function(b){this.taskbar&&(this.tasks[b.id]&&(this.tasks[b.id].unbind(),this.tasks[b.id].remove(),delete this.tasks[b.id]),this.hasTask()||this.removeTaskbar())},
setFront:function(b){var c=liger.find(liger.core.Win),a;for(a in c){var f=c[a];f==b?(d(f.element).css("z-index","9200"),this.activeTask(f)):d(f.element).css("z-index","9100")}}};liger.core.Win=function(b,c){liger.core.Win.base.constructor.call(this,b,c)};liger.core.Win.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Win"},mask:function(){this.options.modal&&liger.win.mask(this)},unmask:function(){this.options.modal&&liger.win.unmask(this)},min:function(){},max:function(){},
active:function(){}});liger.draggable={dragging:!1};liger.resizable={reszing:!1};liger.toJSON="object"===typeof JSON&&JSON.stringify?JSON.stringify:function(b){var c=function(c){return 10>c?"0"+c:c},a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d=function(c){a.lastIndex=0;return a.test(c)?'"'+c.replace(a,function(c){var b=meta[c];return"string"===typeof b?b:"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+
c+'"'};if(null===b)return"null";var g=typeof b;if("undefined"!==g){if("string"===g)return d(b);if("number"===g||"boolean"===g)return""+b;if("object"===g){if("function"===typeof b.toJSON)return liger.toJSON(b.toJSON());if(b.constructor===Date)return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null;c=[];if(b.constructor===Array){for(var d=0,h=b.length;d<h;d++)c.push(liger.toJSON(b[d])||
"null");return"["+c.join(",")+"]"}var k;for(h in b){g=typeof h;if("number"===g)k='"'+h+'"';else if("string"===g)k=d(h);else continue;g=typeof b[h];"function"!==g&&"undefined"!==g&&(g=liger.toJSON(b[h]),c.push(k+":"+g))}return"{"+c.join(",")+"}"}}};liger.getEditor=function(b){var c=b.type,a=b.control,f=b.master;if(!c)return null;var g=0;a&&(a=a.substr(0,1).toUpperCase()+a.substr(1));return d.extend({},{create:function(e,k,m){var h=k.field||k.column,q=m||{};m=k.column?!0:!1;var r=d.extend({},b.options),
u="text";-1!=d.inArray(c,["password","file","checkbox","radio"])&&(u=c);b.password&&(u="password");var t=d("\x3cinput type\x3d'"+u+"'/\x3e");b.body&&(t=b.body.clone());t.appendTo(e);k.field&&(e=h.name,u=d.isFunction(q.prefixID)?q.prefixID(f):q.prefixID||"",r.id=h.id||u+h.name,-1!=d.inArray(c,["select","combobox","autocomplete","popup"])&&(e=h.textField||h.comboboxName,h.comboboxName&&!h.id&&(r.id=(q.prefixID||"")+h.comboboxName)),-1!=d.inArray(c,"select combobox autocomplete popup radiolist checkboxlist listbox".split(" "))&&
(r.valueFieldID=u+h.name),b.body||(q=u+e,e=(new Date).getTime()+"_"+ ++g+"_"+h.name,t.attr(d.extend({id:e,name:q},h.attr)),h.cssClass&&t.addClass(h.cssClass),h.validate&&!f.options.unSetValidateAttr&&t.attr("validate",liger.toJSON(h.validate))),d.extend(r,h.options));if(h.dictionary&&(h.editor=h.editor||{},!h.editor.data)){var v=[],q=h.dictionary.split("|");d(q).each(function(c,b){c=b.split(",");b=c[0];v.push({id:b,value:b,text:2<=c.length?c[1]:c[0]})});h.editor.data=v}if(h.editor){h.editor.options&&
(d.extend(r,h.editor.options),delete h.editor.options);h.editor.valueColumnName&&(r.valueField=h.editor.valueColumnName,delete h.editor.valueColumnName);h.editor.displayColumnName&&(r.textField=h.editor.displayColumnName,delete h.editor.displayColumnName);if(q=h.editor.p||h.editor.ext)q="function"==typeof q?q(k):q,d.extend(r,q),delete h.editor.p,delete h.editor.ext;d.extend(r,h.editor)}if(m)r.host_grid=this,r.host_grid_row=k.record,r.host_grid_column=k.column;else if(r.host_form=this,h.readonly||
r.host_form.get("readonly"))r.readonly=!0;k=t["liger"+a](r);m&&setTimeout(function(){t.focus()},100);return k},getValue:function(c,b){var a=b.field||b.column;if(c.getValue){var e=c.getValue();b=b.column?b.column.editor.type:b.field.type;a&&a.editor&&a.editor.isArrayValue&&e&&(e=e.split(";"));a&&a.editor&&a.editor.isRef&&c.getText&&(e=[e,c.getText()]);if(a&&a.editor&&a.editor.isRefMul&&c.getText){a=e.split(";");c=c.getText().split(";");for(var e=[],d=0;d<a.length;d++)e.push([a[d],c[d]])}if("int"==
b||"digits"==b)e=e?parseInt(e,10):0;else if("float"==b||"number"==b)e=e?parseFloat(e):0;return e}},setValue:function(c,b,a){a=a.field||a.column;if(c.setValue){a&&a.editor&&a.editor.isArrayValue&&b&&(b=b.join(";"));a&&a.editor&&a.editor.isRef&&d.isArray(b)&&(b=b[0]);if(a&&a.editor&&a.editor.isRefMul&&d.isArray(b)){a=[];for(var e=0;e<b.length;e++)a.push(1<b[e].length?b[e][1]:b[e][0]);b=a.join(";")}c.setValue(b)}},getText:function(c,b){if(c.getText&&(c=c.getText()))return c},setText:function(c,b,a){if(b&&
c.setText)c.setText(b);else{var e=a.field||a.column;b=c.setValue()||a.value||"";e&&e.editor&&e.editor.isRef&&d.isArray(b)&&1<b.length&&(b=b[1]);if(e&&e.editor&&e.editor.isRefMul&&d.isArray(b)&&1<b.length){a=[];for(e=0;e<b.length;e++)a.push(b[1]);b=a.join(";")}c.setText&&c.setText(b)}},getSelected:function(c,b){if(c.getSelected)return c.getSelected()},resize:function(c,b,a,e){e.field&&(b-=2);c.resize&&c.resize(b,a)},setEnabled:function(c,b){b?c.setEnabled&&c.setEnabled():c.setDisabled&&c.setDisabled()},
destroy:function(c,b){c.destroy&&c.destroy()}},liger.editorCreatorDefaults||{},b)};liger.editors={text:{control:"TextBox"},date:{control:"DateEditor",setValue:function(b,c,a){"string"==typeof c&&/^\/Date/.test(c)&&(c=c.replace(/^\//,"new ").replace(/\/$/,""),eval("value \x3d "+c));b.setValue(c)}},combobox:{control:"ComboBox"},spinner:{control:"Spinner"},checkbox:{control:"CheckBox"},checkboxlist:{control:"CheckBoxList",body:d("\x3cdiv\x3e\x3c/div\x3e"),resize:function(b,c,a,d){b.set("width",c-2)}},
radiolist:{control:"RadioList",body:d("\x3cdiv\x3e\x3c/div\x3e"),resize:function(b,c,a,d){b.set("width",c-2)}},listbox:{control:"ListBox",body:d("\x3cdiv\x3e\x3c/div\x3e"),resize:function(b,c,a,d){b.set("width",c-2)}},popup:{control:"PopupEdit"},number:{control:"TextBox",options:{number:!0}},currency:{control:"TextBox",options:{currency:!0}},digits:{control:"TextBox",options:{digits:!0}},password:{control:"TextBox",password:!0}};liger.editors.string=liger.editors.text;liger.editors.select=liger.editors.combobox;
liger.editors["int"]=liger.editors.digits;liger.editors["float"]=liger.editors.number;liger.editors.chk=liger.editors.checkbox;liger.editors.popupedit=liger.editors.popup;d.fn.live=d.fn.on?d.fn.on:d.fn.live;if(!d.browser){var a=navigator.userAgent.toLowerCase();d.browser={version:(a.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(a),opera:/opera/.test(a),msie:/msie/.test(a)&&!/opera/.test(a),mozilla:/mozilla/.test(a)&&!/(compatible|webkit)/.test(a)}}})(jQuery);
(function(d){liger.inject={prev:"liger-",defaults:{Grid_detail:{height:null,onShowDetail:null},Grid_editor:"ComboBox,DateEditor,Spinner,TextBox,PopupEdit,CheckBoxList,RadioList,Grid_editor",Grid_popup:"PopupEdit",Grid_grid:"Grid",Grid_condition:"Form",Grid_toolbar:"Toolbar",Grid_fields:"Form_fields",Form_editor:"ComboBox,DateEditor,Spinner,TextBox,PopupEdit,CheckBoxList,RadioList,Form_editor",Form_grid:"Grid",Form_columns:"Grid_columns",Form_condition:"Form",Form_popup:"PopupEdit",Form_buttons:"Button",
Portal_panel:"Panel"},config:{Grid:{dynamics:"data,isChecked,detail,rowDraggingRender,toolbar,columns",arrays:"columns",columns:{dynamics:"render,totalSummary,headerRender,columns,editor,columns",arrays:"columns",textProperty:"display",columns:"liger.inject.config.Grid.columns",editor:{dynamics:"data,columns,render,renderItem,grid,condition,ext",grid:"liger.inject.config.Grid",condition:"liger.inject.config.Form"}},toolbar:{arrays:"items"}},Form:{dynamics:"validate,fields,buttons",arrays:"fields,buttons",
fields:{textProperty:"label",dynamics:"validate,editor",editor:{dynamics:"data,columns,render,renderItem,grid,condition,attr",grid:"liger.inject.config.Grid",condition:"liger.inject.config.Form"}},buttons:"liger.inject.config.Button"},PopupEdit:{dynamics:"grid,condition"},Button:{textProperty:"text",dynamics:"click"},ComboBox:{dynamics:"columns,data,tree,grid,condition,render,parms,renderItem"},ListBox:{dynamics:"columns,data,render,parms"},RadioList:{dynamics:"data,parms"},CheckBoxList:{dynamics:"data,parms"},
Panel:{},Portal:{dynamics:"rows,columns",arrays:"rows,columns",columns:{dynamics:"panels",arrays:"panels"},rows:{dynamics:"panels",arrays:"panels"},toolbar:{arrays:"items"}}},parse:function(a){try{return null==a?null:(new Function("return "+a+";"))()}catch(b){return console.error(b),null}},parseDefault:function(a){var b=this;if(!a)return a;var c={};d(a.split(",")).each(function(a,f){f&&(f=f.substr(0,1).toUpperCase()+f.substr(1),d.extend(c,b.parse("liger.defaults."+f)))});return c},fotmatValue:function(a,
b){return"boolean"==b?"true"==a||"1"==a:"number"==b&&a?parseFloat(a.toString()):a},getOptions:function(a){var b=a.jelement,c=a.defaults,e=a.config,e=d.extend({ignores:"",dynamics:"",arrays:""},e),f=this,g={},h;e.textProperty&&(g[e.textProperty]=b.text());for(var k in c){var m=k.toLowerCase(),m=d("\x3e ."+m,b);if(-1==d.inArray(k,e.ignores.split(",")))if(m.length){var n=a.controlName+"_"+k,q=f.defaults[n]||liger.defaults[n],r=e[k];"string"==typeof q?q=f.parseDefault(q):"funcion"==typeof q&&(q=q());
"string"==typeof r?r=f.parse(r):"funcion"==typeof r&&(r=r());q&&(-1!=d.inArray(k,e.arrays.split(","))?(h=[],d("\x3ediv,\x3eli,\x3einput",m).each(function(){h.push(f.getOptions({defaults:q,controlName:a.controlName,config:r,jelement:d(this)}))}),g[k]=h):g[k]=f.getOptions({defaults:q,controlName:a.controlName,config:r,jelement:m}));m.remove()}else(h=-1!=d.inArray(k,e.dynamics.split(","))||0==k.indexOf("on")?f.parse(b.attr("data-"+k)||b.attr(k)):b.attr("data-"+k)||b.attr(k))&&(g[k]=f.fotmatValue(h,typeof c[k]))}(b=
b.attr("data-options")||b.attr("data-property"))&&(b=f.parse("{"+b+"}"));b&&d.extend(g,b);return g},init:function(){var a=this,b=this.config,c;for(c in a.defaults)"string"==typeof a.defaults[c]&&(a.defaults[c]=a.parseDefault(a.defaults[c]));for(var e in liger.controls){var f=b[e]||{};c=a.prev+e.toLowerCase();d("."+c).each(function(){var c=d(this),b=d.extend({onrender:null,onrendered:null},liger.defaults[e]),b=a.getOptions({defaults:b,controlName:e,config:f,jelement:c});c[liger.pluginPrev+e](b)})}}};
d(function(){liger.inject.init()})})(jQuery);
(function(d){d.fn.ligerAccordion=function(a){return d.ligerui.run.call(this,"ligerAccordion",arguments)};d.fn.ligerGetAccordionManager=function(){return d.ligerui.get(this)};d.ligerDefaults.Accordion={height:null,speed:"normal",changeHeightOnResize:!1,heightDiff:0};d.ligerMethos.Accordion={};d.ligerui.controls.Accordion=function(a,b){d.ligerui.controls.Accordion.base.constructor.call(this,a,b)};d.ligerui.controls.Accordion.ligerExtend(d.ligerui.core.UIComponent,{__getType:function(){return"Accordion"},
__idPrev:function(){return"Accordion"},_extendMethods:function(){return d.ligerMethos.Accordion},_render:function(){var a=this,b=this.options;a.accordion=d(a.element);a.accordion.hasClass("l-accordion-panel")||a.accordion.addClass("l-accordion-panel");var c=0;0<d("\x3e div[lselected\x3dtrue]",a.accordion).length&&(c=d("\x3e div",a.accordion).index(d("\x3e div[lselected\x3dtrue]",a.accordion)));d("\x3e div",a.accordion).each(function(b,a){var e=d('\x3cdiv class\x3d"l-accordion-header"\x3e\x3cdiv class\x3d"l-accordion-toggle"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-accordion-header-inner"\x3e\x3c/div\x3e\x3c/div\x3e'),
f=d(a).attr("title");b==c&&(d(".l-accordion-toggle",e).addClass("l-accordion-toggle-open").parent().addClass("active"),d(a).css("display","block"));f&&(d(".l-accordion-header-inner",e).html(f),d(a).attr("title",""));d(a).before(e);d(a).hasClass("l-accordion-content")||d(a).addClass("l-accordion-content");d(a).attr("data-icon")&&(e.addClass("l-accordion-header-hasicon"),e.append('\x3ci\x3e\x3cimg src\x3d"'+d(a).attr("data-icon")+'" /\x3e\x3c/i\x3e'))});d(".l-accordion-header",a.accordion).removeClass("l-accordion-header-downfirst");
d(".l-accordion-content:visible",a.accordion).next(".l-accordion-header:first").addClass("l-accordion-header-downfirst");d(".l-accordion-toggle",a.accordion).each(function(){d(this).hasClass("l-accordion-toggle-open")||d(this).hasClass("l-accordion-toggle-close")||d(this).addClass("l-accordion-toggle-close");d(this).hasClass("l-accordion-toggle-close")&&d(this).parent().next(".l-accordion-content:visible").hide()});d(".l-accordion-header",a.accordion).hover(function(){d(this).addClass("l-accordion-header-over")},
function(){d(this).removeClass("l-accordion-header-over")});d(".l-accordion-toggle",a.accordion).hover(function(){d(this).hasClass("l-accordion-toggle-open")?d(this).addClass("l-accordion-toggle-open-over"):d(this).hasClass("l-accordion-toggle-close")&&d(this).addClass("l-accordion-toggle-close-over")},function(){d(this).hasClass("l-accordion-toggle-open")?d(this).removeClass("l-accordion-toggle-open-over"):d(this).hasClass("l-accordion-toggle-close")&&d(this).removeClass("l-accordion-toggle-close-over")});
d("\x3e.l-accordion-header",a.accordion).click(function(){var c=d(".l-accordion-toggle:first",this);c.hasClass("l-accordion-toggle-close")?(c.removeClass("l-accordion-toggle-close").removeClass("l-accordion-toggle-close-over l-accordion-toggle-open-over"),c.addClass("l-accordion-toggle-open"),d(this).next(".l-accordion-content").show(b.speed).siblings(".l-accordion-content:visible").hide(b.speed),d(this).addClass("active").siblings(".l-accordion-header").removeClass("active").find(".l-accordion-toggle").removeClass("l-accordion-toggle-open").addClass("l-accordion-toggle-close")):
(c.removeClass("l-accordion-toggle-open").removeClass("l-accordion-toggle-close-over l-accordion-toggle-open-over").addClass("l-accordion-toggle-close"),d(this).removeClass("active").next(".l-accordion-content").hide(b.speed));d(".l-accordion-header",a.accordion).removeClass("l-accordion-header-downfirst");d(".l-accordion-content:visible",a.accordion).next(".l-accordion-header:first").addClass("l-accordion-header-downfirst")});a.headerHoldHeight=0;d("\x3e .l-accordion-header",a.accordion).each(function(){a.headerHoldHeight+=
d(this).height()});b.height&&"string"==typeof b.height&&0<b.height.indexOf("%")?(a.onResize(),b.changeHeightOnResize&&d(window).resize(function(){a.onResize()})):b.height?(a.height=b.heightDiff+b.height,a.accordion.height(a.height),a.setHeight(b.height)):a.header=a.accordion.height();a.set(b)},onResize:function(){var a=this.options;if(!a.height||"string"!=typeof a.height||-1==a.height.indexOf("%"))return!1;if("body"==this.accordion.parent()[0].tagName.toLowerCase()){var b=d(window).height(),b=b-parseInt(this.layout.parent().css("paddingTop")),
b=b-parseInt(this.layout.parent().css("paddingBottom"));this.height=a.heightDiff+b*parseFloat(this.height)*.01}else this.height=a.heightDiff+this.accordion.parent().height()*parseFloat(a.height)*.01;this.accordion.height(this.height);this.setContentHeight(this.height-this.headerHoldHeight)},setHeight:function(a){this.accordion.height(a);a-=this.headerHoldHeight;d("\x3e .l-accordion-content",this.accordion).height(a)}})})(jQuery);
(function(d){d.fn.ligerButton=function(a){return d.ligerui.run.call(this,"ligerButton",arguments)};d.fn.ligerGetButtonManager=function(){return d.ligerui.run.call(this,"ligerGetButtonManager",arguments)};d.ligerDefaults.Button={width:60,text:"Button",disabled:!1,click:null,icon:null};d.ligerMethos.Button={};d.ligerui.controls.Button=function(a,b){d.ligerui.controls.Button.base.constructor.call(this,a,b)};d.ligerui.controls.Button.ligerExtend(d.ligerui.controls.Input,{__getType:function(){return"Button"},
__idPrev:function(){return"Button"},_extendMethods:function(){return d.ligerMethos.Button},_render:function(){var a=this,b=this.options;a.button=d(a.element);a.button.addClass("l-button");a.button.append('\x3cdiv class\x3d"l-button-l"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-button-r"\x3e\x3c/div\x3e\x3cspan\x3e\x3c/span\x3e');a.button.hover(function(){b.disabled||a.button.addClass("l-button-over")},function(){b.disabled||a.button.removeClass("l-button-over")});b.click&&a.button.click(function(){b.disabled||
b.click()});a.set(b)},_setIcon:function(a){a?(this.button.addClass("l-button-hasicon"),this.button.append('\x3cimg src\x3d"'+a+'" /\x3e')):(this.button.removeClass("l-button-hasicon"),this.button.find("img").remove())},_setEnabled:function(a){a&&this.button.removeClass("l-button-disabled")},_setDisabled:function(a){a?(this.button.addClass("l-button-disabled"),this.options.disabled=!0):(this.button.removeClass("l-button-disabled"),this.options.disabled=!1)},_setWidth:function(a){this.button.width(a)},
_setText:function(a){d("span",this.button).html(a)},setValue:function(a){this.set("text",a)},getValue:function(){return this.options.text},setEnabled:function(){this.set("disabled",!1)},setDisabled:function(){this.set("disabled",!0)}})})(jQuery);
(function(d){d.fn.ligerCheckBox=function(a){return d.ligerui.run.call(this,"ligerCheckBox",arguments)};d.fn.ligerGetCheckBoxManager=function(){return d.ligerui.run.call(this,"ligerGetCheckBoxManager",arguments)};d.ligerDefaults.CheckBox={disabled:!1,readonly:!1};d.ligerMethos.CheckBox={};d.ligerui.controls.CheckBox=function(a,b){d.ligerui.controls.CheckBox.base.constructor.call(this,a,b)};d.ligerui.controls.CheckBox.ligerExtend(d.ligerui.controls.Input,{__getType:function(){return"CheckBox"},__idPrev:function(){return"CheckBox"},
_extendMethods:function(){return d.ligerMethos.CheckBox},_render:function(){var a=this,b=this.options;a.input=d(a.element);a.link=d('\x3ca class\x3d"l-checkbox"\x3e\x3c/a\x3e');a.wrapper=a.input.addClass("l-hidden").wrap('\x3cdiv class\x3d"l-checkbox-wrapper"\x3e\x3c/div\x3e').parent();a.wrapper.prepend(a.link);a.link.click(function(){if(a.input.attr("disabled")||a.input.attr("readonly")||b.disabled||b.readonly||0==a.trigger("beforeClick",[a.element]))return!1;d(this).hasClass("l-checkbox-checked")?
a._setValue(!1):a._setValue(!0);a.input.trigger("change")});a.wrapper.hover(function(){b.disabled||d(this).addClass("l-over")},function(){d(this).removeClass("l-over")});this.set(b);this.updateStyle()},_setCss:function(a){this.wrapper.css(a)},_setValue:function(a){a?(this.input[0].checked=!0,this.link.addClass("l-checkbox-checked")):(this.input[0].checked=!1,this.link.removeClass("l-checkbox-checked"))},_setDisabled:function(a){a?(this.input.attr("disabled",!0),this.wrapper.addClass("l-disabled")):
(this.input.attr("disabled",!1),this.wrapper.removeClass("l-disabled"))},_getValue:function(){return this.element.checked},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("l-disabled"),this.options.disabled=!0);this.input[0].checked?this.link.addClass("l-checkbox-checked"):this.link.removeClass("l-checkbox-checked")}})})(jQuery);
(function(d){d.fn.ligerCheckBoxList=function(a){return d.ligerui.run.call(this,"ligerCheckBoxList",arguments)};d.ligerDefaults.CheckBoxList={rowSize:3,valueField:"id",textField:"text",valueFieldID:null,name:null,split:";",data:null,parms:null,url:null,urlParms:null,ajaxContentType:null,ajaxType:"post",onSuccess:null,onError:null,css:null,value:null,valueFieldCssClass:null};d.ligerMethos.CheckBoxList=d.ligerMethos.CheckBoxList||{};d.ligerui.controls.CheckBoxList=function(a,b){d.ligerui.controls.CheckBoxList.base.constructor.call(this,
a,b)};d.ligerui.controls.CheckBoxList.ligerExtend(d.ligerui.controls.Input,{__getType:function(){return"CheckBoxList"},_extendMethods:function(){return d.ligerMethos.CheckBoxList},_init:function(){d.ligerui.controls.CheckBoxList.base._init.call(this)},_render:function(){var a=this.options;this.data=a.data;this.valueField=null;d(this.element).is(":hidden")||d(this.element).is(":text")?(this.valueField=d(this.element),d(this.element).is(":text")&&this.valueField.hide()):a.valueFieldID?(this.valueField=
d("#"+a.valueFieldID+":input,[name\x3d"+a.valueFieldID+"]:input"),0==this.valueField.length&&(this.valueField=d('\x3cinput type\x3d"hidden"/\x3e')),this.valueField[0].id=this.valueField[0].name=a.valueFieldID):(this.valueField=d('\x3cinput type\x3d"hidden"/\x3e'),this.valueField[0].id=this.valueField[0].name=this.id+"_val");null==this.valueField[0].name&&(this.valueField[0].name=this.valueField[0].id);a.valueFieldCssClass&&this.valueField.addClass(a.valueFieldCssClass);this.valueField.attr("data-ligerid",
this.id);d(this.element).is(":hidden")||d(this.element).is(":text")?this.checkboxList=d("\x3cdiv\x3e\x3c/div\x3e").insertBefore(this.element):this.checkboxList=d(this.element);this.checkboxList.html('\x3cdiv class\x3d"l-checkboxlist-inner"\x3e\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" border\x3d"0" class\x3d"l-checkboxlist-table"\x3e\x3c/table\x3e\x3c/div\x3e').addClass("l-checkboxlist").append(this.valueField);this.checkboxList.table=d("table:first",this.checkboxList);this.set(a);this._addClickEven()},
destroy:function(){this.checkboxList&&this.checkboxList.remove();this.options=null;d.ligerui.remove(this)},clear:function(){this._changeValue("");this.trigger("clear")},_setCss:function(a){a&&this.checkboxList.addClass(a)},_setDisabled:function(a){a?(this.checkboxList.addClass("l-checkboxlist-disabled"),d("input:checkbox",this.radioList).attr("disabled",!0)):(this.checkboxList.removeClass("l-checkboxlist-disabled"),d("input:checkbox",this.radioList).removeAttr("disabled"))},_setWidth:function(a){this.checkboxList.width(a)},
_setHeight:function(a){this.checkboxList.height(a)},indexOf:function(a){var b=this.options;if(!this.data)return-1;for(var c=0,e=this.data.length;c<e;c++)if("object"==typeof a){if(this.data[c]==a)return c}else if(this.data[c][b.valueField].toString()==a.toString())return c;return-1},removeItems:function(a){var b=this;b.data&&(d(a).each(function(c,a){c=b.indexOf(a);-1!=c&&b.data.splice(c,1)}),b.refresh())},removeItem:function(a){this.data&&(a=this.indexOf(a),-1!=a&&(this.data.splice(a,1),this.refresh()))},
insertItem:function(a,b){this.data||(this.data=[]);this.data.splice(b,0,a);this.refresh()},addItems:function(a){var b=this;b.data||(b.data=[]);d(a).each(function(c,a){b.data.push(a)});b.refresh()},addItem:function(a){this.data||(this.data=[]);this.data.push(a);this.refresh()},_setValue:function(a){var b=this.options;b.value=a;this.valueField.val(b.value);this._dataInit()},setValue:function(a){this._setValue(a)},_setUrl:function(a){if(a){var b=this,c=this.options,e=d.isFunction(c.urlParms)?c.urlParms.call(b):
c.urlParms;if(e)for(name in e)a+=-1==a.indexOf("?")?"?":"\x26",a+=name+"\x3d"+e[name];e=d.isFunction(c.parms)?c.parms():c.parms;"application/json"==c.ajaxContentType&&"string"!=typeof e&&(e=liger.toJSON(e));d.ajax({type:c.ajaxType||"post",url:a,data:e,cache:!1,dataType:"json",contentType:c.ajaxContentType,success:function(c){b.setData(c);b.trigger("success",[c])},error:function(c,a){b.trigger("error",[c,a])}})}},setUrl:function(a){return this._setUrl(a)},setParm:function(a,b){if(a){var c=this.get("parms");
c||(c={});c[a]=b;this.set("parms",c)}},clearContent:function(){d("table",this.checkboxList).html("")},_setData:function(a){this.setData(a)},setData:function(a){a&&a.length&&(this.data=a,this.refresh(),this.updateStyle())},refresh:function(){var a=this.options,b=this.data;this.clearContent();if(b){for(var c=[],e=a.rowSize,d=!1,g=a.name||this.id,h=0;h<b.length;h++){var k=b[h][a.valueField],m=b[h][a.textField],n=this.id+"-"+h;0==h%e&&(d&&c.push("\x3c/tr\x3e"),c.push("\x3ctr\x3e"),d=!0);c.push("\x3ctd\x3e\x3cinput type\x3d'checkbox' name\x3d'"+
g+"' value\x3d'"+k+"' id\x3d'"+n+"'/\x3e\x3clabel for\x3d'"+n+"'\x3e"+m+"\x3c/label\x3e\x3c/td\x3e")}d&&c.push("\x3c/tr\x3e");this.checkboxList.table.append(c.join(""))}},_getValue:function(){var a=this.options,b=[];d('input:checkbox[name\x3d"'+(a.name||this.id)+'"]:checked').each(function(){b.push(this.value)});return b.length?b.join(a.split):null},getValue:function(){return this._getValue()},getText:function(){var a=this.options,b=[];d('input:checkbox[name\x3d"'+(a.name||this.id)+'"]:checked').each(function(){b.push(d(this).next("label").text())});
return b.length?b.join(a.split):null},updateStyle:function(){this._dataInit()},_dataInit:function(){var a=this.valueField.val();this._changeValue(a)},_changeValue:function(a){var b=this.options,c=b.name||this.id,e=a?a.split(b.split):[];d("input:checkbox[name\x3d'"+c+"']",this.checkboxList).each(function(){this.checked=-1<d.inArray(this.value,e)});this.valueField.val(a);this.selectedValue=a},_addClickEven:function(){var a=this;a.checkboxList.click(function(b){(b=a.getValue())&&a.valueField.val(b)})}})})(jQuery);
(function(d){d.fn.ligerComboBox=function(a){return d.ligerui.run.call(this,"ligerComboBox",arguments)};d.fn.ligerGetComboBoxManager=function(){return d.ligerui.run.call(this,"ligerGetComboBoxManager",arguments)};d.ligerDefaults.ComboBox={resize:!0,isMultiSelect:!1,isShowCheckBox:!1,columns:null,width:null,selectBoxWidth:null,selectBoxHeight:120,selectBoxPosYDiff:-3,onBeforeSelect:!1,onAfterShowData:null,onSelected:null,initValue:null,value:null,initText:null,valueField:"id",textField:"text",dataParmName:null,
valueFieldID:null,ajaxComplete:null,ajaxBeforeSend:null,ajaxContentType:null,slide:!1,split:";",data:null,dataGetter:null,tree:null,treeLeafOnly:!0,condition:null,grid:null,onStartResize:null,onEndResize:null,hideOnLoseFocus:!1,hideGridOnLoseFocus:!1,url:null,urlParms:null,selectBoxRender:null,selectBoxRenderUpdate:null,detailEnabled:!0,detailUrl:null,detailPostIdField:null,detailDataParmName:null,detailParms:null,detailDataGetter:null,delayLoad:!1,triggerToLoad:!1,emptyText:null,addRowButton:"新增",
addRowButtonClick:null,triggerIcon:null,onSuccess:null,onBeforeSetData:null,onError:null,onBeforeOpen:null,onButtonClick:null,onTextBoxKeyDown:null,onTextBoxKeyEnter:null,render:null,absolute:!0,cancelable:!0,css:null,parms:null,renderItem:null,autocomplete:!1,autocompleteKeyField:null,autocompleteAllowEmpty:!0,isTextBoxMode:!1,textAsValue:!1,highLight:!1,readonly:!1,ajaxType:"post",alwayShowInTop:!1,alwayShowInDown:!1,valueFieldCssClass:null,isRowReadOnly:null,rowClsRender:null,keySupport:!1,initIsTriggerEvent:!1,
conditionSearchClick:null,onChangeValue:null,delayLoadGrid:!0,setTextBySource:!0,alwaysshow:!1,beforeChange:null};d.ligerDefaults.ComboBoxString={Search:"搜索"};d.ligerMethos.ComboBox=d.ligerMethos.ComboBox||{};d.ligerui.controls.ComboBox=function(a,b){d.ligerui.controls.ComboBox.base.constructor.call(this,a,b)};d.ligerui.controls.ComboBox.ligerExtend(d.ligerui.controls.Input,{__getType:function(){return"ComboBox"},_extendMethods:function(){return d.ligerMethos.ComboBox},_init:function(){d.ligerui.controls.ComboBox.base._init.call(this);
var a=this.options;a.columns&&(a.isShowCheckBox=!0);a.isMultiSelect&&(a.isShowCheckBox=!0);a.triggerToLoad&&(a.delayLoad=!0);a.autocomplete&&!a.autocompleteKeyField&&(a.autocompleteKeyField=a.textField)},_render:function(){function a(){b.grid||(b.setGrid(c.grid),b.set("SelectBoxHeight",c.selectBoxHeight))}var b=this,c=this.options;b.data=c.data;b.inputText=null;b.select=null;b.textFieldID="";b.valueFieldID="";b.valueField=null;var e=d(this.element);e.attr("autocomplete","off");"hidden"===e.attr("type")?
(b.valueField=e,b.textFieldID=c.textFieldID||this.element.id+"_txt",b.inputText=d('\x3cinput type\x3d"text" readonly\x3d"true"/\x3e'),b.inputText.attr("id",b.textFieldID).insertAfter(e),b.valueField.attr("validate")&&(b.inputText.attr("validate",b.valueField.attr("validate")),b.valueField.removeAttr("validate")),b.valueField.attr("validateMessage")&&(b.inputText.attr("validateMessage",b.valueField.attr("validateMessage")),b.valueField.removeAttr("validateMessage"))):"input"==this.element.tagName.toLowerCase()?
(this.element.readOnly=!0,b.inputText=e,b.textFieldID=this.element.id):"select"==this.element.tagName.toLowerCase()&&(e.hide(),b.select=e,c.isMultiSelect=!1,c.isShowCheckBox=!1,c.cancelable=!1,b.textFieldID=c.textFieldID||this.element.id+"_txt",b.inputText=d('\x3cinput type\x3d"text" readonly\x3d"true"/\x3e'),b.inputText.attr("id",b.textFieldID).insertAfter(e),b.select.attr("validate")&&(b.inputText.attr("validate",b.select.attr("validate")),b.select.removeAttr("validate")),b.select.attr("validateMessage")&&
(b.inputText.attr("validateMessage",b.select.attr("validateMessage")),b.select.removeAttr("validateMessage")),!c.value&&this.element.value&&(c.value=this.element.value));void 0==b.inputText[0].name&&(b.inputText[0].name=b.textFieldID);b.inputText.attr("data-comboboxid",b.id);null==b.valueField&&(c.valueFieldID?(b.valueField=d("#"+c.valueFieldID+":input,[name\x3d"+c.valueFieldID+"]:input").filter("input:hidden"),0==b.valueField.length&&(b.valueField=d('\x3cinput type\x3d"hidden"/\x3e')),b.valueField[0].id=
b.valueField[0].name=c.valueFieldID):(b.valueField=d('\x3cinput type\x3d"hidden"/\x3e'),b.valueField[0].id=b.valueField[0].name=b.textFieldID+"_val"));c.valueFieldCssClass&&b.valueField.addClass(c.valueFieldCssClass);void 0==b.valueField[0].name&&(b.valueField[0].name=b.valueField[0].id);null!=c.initValue&&(b.valueField[0].value=c.initValue);b.valueField.attr("data-ligerid",b.id);b.link=d('\x3cdiv class\x3d"l-trigger"\x3e\x3cdiv class\x3d"l-trigger-icon"\x3e\x3c/div\x3e\x3c/div\x3e');c.triggerIcon&&
b.link.find("div:first").addClass(c.triggerIcon);b.selectBox=d('\x3cdiv class\x3d"l-box-select" style\x3d"display:none"\x3e\x3cdiv class\x3d"l-box-select-inner"\x3e\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" border\x3d"0" class\x3d"l-box-select-table"\x3e\x3c/table\x3e\x3c/div\x3e\x3c/div\x3e');b.selectBox.table=d("table:first",b.selectBox);b.selectBoxInner=b.selectBox.find(".l-box-select-inner:first");b.wrapper=b.inputText.wrap('\x3cdiv class\x3d"l-text l-text-combobox"\x3e\x3c/div\x3e').parent();
b.wrapper.append('\x3cdiv class\x3d"l-text-l"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-text-r"\x3e\x3c/div\x3e');b.wrapper.append(b.link);b.textwrapper=b.wrapper.wrap('\x3cdiv class\x3d"l-text-wrapper"\x3e\x3c/div\x3e').parent();c.absolute?b.selectBox.appendTo("body").addClass("l-box-select-absolute"):b.textwrapper.append(b.selectBox);b.textwrapper.append(b.valueField);b.inputText.addClass("l-text-field");c.isShowCheckBox&&!b.select?d("table",b.selectBox).addClass("l-table-checkbox"):(c.isShowCheckBox=
!1,d("table",b.selectBox).addClass("l-table-nocheckbox"));b.link.hover(function(){c.disabled||c.readonly||(this.className="l-trigger-hover")},function(){c.disabled||c.readonly||(this.className="l-trigger")}).mousedown(function(){c.disabled||c.readonly||(this.className="l-trigger-pressed")}).mouseup(function(){c.disabled||c.readonly||(this.className="l-trigger-hover")}).click(function(){if(!c.disabled&&!c.readonly){if(0==b.trigger("buttonClick")||0==b.trigger("beforeOpen"))return!1;c.triggerToLoad&&
!b.triggerLoaded?(b.triggerLoaded=!0,b._setUrl(c.url,function(){b._toggleSelectBox(b.selectBox.is(":visible"))})):b._toggleSelectBox(b.selectBox.is(":visible"))}});b.inputText.click(function(){if(!c.disabled&&!c.readonly){if(0==b.trigger("beforeOpen"))return!1;c.autocomplete?b.updateSelectBoxPosition():c.triggerToLoad&&!b.triggerLoaded?(b.triggerLoaded=!0,b._setUrl(c.url,function(){b._toggleSelectBox(b.selectBox.is(":visible"))})):b._toggleSelectBox(b.selectBox.is(":visible"))}}).blur(function(){c.disabled||
(b.trigger("blur",[this.value]),b.wrapper.removeClass("l-text-focus"))}).focus(function(){c.disabled||c.readonly||b.wrapper.addClass("l-text-focus")}).change(function(){b.trigger("changeValue",[this.value])});b.wrapper.hover(function(){c.disabled||c.readonly||b.wrapper.addClass("l-text-over")},function(){c.disabled||c.readonly||b.wrapper.removeClass("l-text-over")});b.resizing=!1;b.selectBox.hover(null,function(a){c.hideOnLoseFocus&&b.selectBox.is(":visible")&&!b.boxToggling&&!b.resizing&&b._toggleSelectBox(!0)});
b.bulidContent();b.set(c,null,"init");c.selectBoxWidth?b.selectBox.width(c.selectBoxWidth):b.selectBox.css("width",b.wrapper.css("width"));c.grid&&(c.delayLoadGrid?b.bind("show",function(){a()}):a());b.updateSelectBoxPosition();d(document).on("click.combobox",function(c){var a=b.selectBox;c=d(c.target||c.srcElement);a.is(":visible")&&0==c.closest(".l-box-select, .l-text-combobox,.l-button").length&&b._toggleSelectBox(!0)})},destroy:function(){this.wrapper&&this.wrapper.remove();this.selectBox&&this.selectBox.remove();
this.options=null;d.ligerui.remove(this)},clear:function(){var a=this.options;this._changeValue("","");d("a.l-checkbox-checked",this.selectBox).removeClass("l-checkbox-checked");d("td.l-selected",this.selectBox).removeClass("l-selected");d(":checkbox",this.selectBox).each(function(){this.checked=!1});this.trigger("clear");this.loadedData&&a.autocomplete&&this._updateInput()},_setSelectBoxHeight:function(a){if(a){var b=this.options;b.grid?this.grid&&this.grid.set("height",this.getGridHeight(a)):b.tree?
this.selectBoxInner.height(b.selectBoxHeight):(a=d("tr",this.selectBox.table).length,!b.selectBoxHeight&&8>a&&(b.selectBoxHeight=30*a),b.selectBoxHeight&&(8>a?this.selectBoxInner.height("auto"):this.selectBoxInner.height(b.selectBoxHeight)))}},_setCss:function(a){a&&this.wrapper.addClass(a)},_setCancelable:function(a){var b=this,c=this.options;!a&&b.unselect&&(b.unselect.remove(),b.unselect=null);if(a||b.unselect)b.unselect=d('\x3cdiv class\x3d"l-trigger l-trigger-cancel"\x3e\x3cdiv class\x3d"l-trigger-icon"\x3e\x3c/div\x3e\x3c/div\x3e').hide(),
b.wrapper.hover(function(){b.unselect.show()},function(){b.unselect.hide()}),c.disabled||c.readonly||!c.cancelable||b.wrapper.append(b.unselect),b.unselect.hover(function(){this.className="l-trigger-hover l-trigger-cancel"},function(){this.className="l-trigger l-trigger-cancel"}).click(function(){b.clear()})},_setDisabled:function(a){a?this.wrapper.addClass("l-text-disabled"):this.wrapper.removeClass("l-text-disabled")},_setReadonly:function(a){a?(this.wrapper.addClass("l-text-readonly"),this.inputText.attr("readonly",
"true")):(this.wrapper.removeClass("l-text-readonly"),this.inputText.removeAttr("readonly"))},_setLable:function(a){var b=this.options;a&&(this.labelwrapper?this.labelwrapper.find(".l-text-label:first").html(a+":\x26nbsp"):(this.labelwrapper=this.textwrapper.wrap('\x3cdiv class\x3d"l-labeltext"\x3e\x3c/div\x3e').parent(),this.labelwrapper.prepend('\x3cdiv class\x3d"l-text-label" style\x3d"float:left;display:inline;"\x3e'+a+":\x26nbsp\x3c/div\x3e"),this.textwrapper.css("float","left")),b.labelWidth?
d(".l-text-label",this.labelwrapper).outerWidth(b.labelWidth):b.labelWidth=d(".l-text-label",this.labelwrapper).outerWidth(),d(".l-text-label",this.labelwrapper).width(b.labelWidth),d(".l-text-label",this.labelwrapper).height(this.wrapper.height()),this.labelwrapper.append('\x3cbr style\x3d"clear:both;" /\x3e'),b.labelAlign&&d(".l-text-label",this.labelwrapper).css("text-align",b.labelAlign),this.textwrapper.css({display:"inline"}),this.labelwrapper.width(this.wrapper.outerWidth()+b.labelWidth+2))},
_setWidth:function(a){var b=this.options;20<a&&(this.wrapper.css({width:a}),this.inputText.css({width:a-20}),b.selectBoxWidth||this.selectBox.css({width:a}))},_setHeight:function(a){10<a&&(this.wrapper.height(a),this.inputText.height(a-2))},_setResize:function(a){var b=this,c=this.options;!c.columns&&a&&d.fn.ligerResizable&&(b.selectBox.ligerResizable({handles:c.selectBoxHeight?"e":"se,s,e",onStartResize:function(){b.resizing=!0;b.trigger("startResize")},onEndResize:function(){b.resizing=!1;if(0==
b.trigger("endResize"))return!1},onStopResize:function(c,a){return b.grid?(c.newWidth&&b.selectBox.width(c.newWidth),c.newHeight&&b.set({selectBoxHeight:c.newHeight}),b.grid.refreshSize(),b.trigger("endResize"),!1):!0}}),b.selectBox.append("\x3cdiv class\x3d'l-btn-nw-drop'\x3e\x3c/div\x3e"))},findTextByValue:function(a){var b=this.options;if(null==a)return"";var c="";d(this.options.grid&&this.options.grid.data?this.options.grid.data.Rows:this.options.grid&&this.grid&&this.grid.data?this.grid.data.Rows:
this.data).each(function(e,d){e=d[b.textField];a:{d=d[b.valueField];for(var f=a.toString().split(b.split),h=0;h<f.length;h++)if(f[h]==d&&""!=f[h]){d=!0;break a}d=!1}d&&(c+=e+b.split)});0<c.length&&(c=c.substr(0,c.length-1));return c},findValueByText:function(a){var b=this.options;if(!a&&""==a)return"";var c="";d(this.data).each(function(e,d){e=d[b.valueField];a:{d=d[b.textField];for(var f=a.toString().split(b.split),h=0;h<f.length;h++)if(f[h]==d){d=!0;break a}d=!1}d&&(c+=e+b.split)});0<c.length&&
(c=c.substr(0,c.length-1));return c},insertItem:function(a,b){this.data=this.data||[];this.data.splice(b,0,a);this.setData(this.data)},addItem:function(a){this.insertItem(a,(this.data||[]).length)},_setIsTextBoxMode:function(a){var b=this.options;a&&!b.readonly&&this.inputText.removeAttr("readonly")},_setValue:function(a,b){var c=this,e=this.options,f=!0;"init"==b&&(b=null,f=e.initIsTriggerEvent?!0:!1);b=e.isTextBoxMode||e.textAsValue?a:b||c.findTextByValue(a);if(e.tree)setTimeout(function(){e.setTextBySource?
c.selectValueByTree(a):c.treeSelectInit(a)},100);else if(e.isMultiSelect){c._changeValue(a,b,f);var g=a&&a.toString().split(e.split)||[],f=function(c){for(var b=0,a=g.length;b<a;b++)if(g[b]==c&&""!=g[b])return!0;return!1};if(e.grid){if(e.grid.checkbox&&c.grid){for(var h=c.grid,k=h.getSelectedRows(),m=0,n=k.length;m<n;m++)h.unselect(k[m]);h.trigger("clearSelecteds");k=h.data.Rows;m=0;for(n=k.length;m<n;m++)f(k[m][e.valueField])&&(h.select(k[m]),h.trigger("toggleSelected",[!0,k[m]]))}}else for(d("table.l-table-checkbox :checkbox",
c.selectBox).each(function(){d(this.previousSibling).removeClass("l-checkbox-checked");this.checked=!1}),m=0;m<g.length;m++)d("table.l-table-checkbox tr[value\x3d'"+g[m]+"'] :checkbox",c.selectBox).each(function(){d(this.previousSibling).addClass("l-checkbox-checked");this.checked=!0})}else c._changeValue(a,b,f),d("tr[value\x3d'"+a+"'] td",c.selectBox).addClass("l-selected"),d("tr[value!\x3d'"+a+"'] td",c.selectBox).removeClass("l-selected");e.selectBoxRenderUpdate&&e.selectBoxRenderUpdate.call(c,
{selectBox:c.selectBox,value:a,text:b})},selectValue:function(a){this._setValue(a)},bulidContent:function(){var a=this.options;this.clearContent();this.select?this.setSelect():a.tree&&this.setTree(a.tree)},reload:function(){var a=this.options;a.url?this.set("url",a.url):this.grid&&this.grid.reload()},_setUrl:function(a,b){if(a){var c=this,e=this.options;if(!e.readonly)if(!e.delayLoad||c.isAccessDelay||c.triggerLoaded){a=d.isFunction(a)?a.call(c):a;var f=d.isFunction(e.urlParms)?e.urlParms.call(c):
e.urlParms;if(f)for(name in f)a+=-1==a.indexOf("?")?"?":"\x26",a+=name+"\x3d"+f[name];f=d.isFunction(e.parms)?e.parms.call(c):e.parms;"application/json"==e.ajaxContentType&&"string"!=typeof f&&(f=liger.toJSON(f));a={type:e.ajaxType,url:a,data:f,cache:!1,dataType:"json",beforeSend:e.ajaxBeforeSend,complete:e.ajaxComplete,success:function(a){var f=d.isFunction(e.dataGetter)?f=e.dataGetter.call(c,a):a,f=e.dataParmName&&f?f[e.dataParmName]:f;0!=c.trigger("beforeSetData",[f])&&(c.setData(f),c.trigger("success",
[f]),d.isFunction(b)&&b(f))},error:function(b,a){c.trigger("error",[b,a])}};e.ajaxContentType&&(a.contentType=e.ajaxContentType);d.ajax(a)}else c.isAccessDelay=!0}},setUrl:function(a,b){return this._setUrl(a,b)},setParm:function(a,b){if(a){var c=this.get("parms");c||(c={});c[a]=b;this.set("parms",c)}},clearContent:function(){var a=this.options;this&&(d("table",this.selectBox).html(""),this&&this._setSelectBoxHeight(a.selectBoxHeight))},setSelect:function(){var a=this,b=this.options;this.clearContent();
a.data=[];d("option",a.select).each(function(c){var b=d(this).val(),f=d(this).html();a.data.push({text:f,id:b});c=d("\x3ctr\x3e\x3ctd index\x3d'"+c+"' value\x3d'"+b+"' text\x3d'"+f+"'\x3e"+f+"\x3c/td\x3e");d("table.l-table-nocheckbox",a.selectBox).append(c);d("td",c).hover(function(){d(this).addClass("l-over").siblings("td").removeClass("l-over")},function(){d(this).removeClass("l-over")})});d("td:eq("+a.select[0].selectedIndex+")",a.selectBox).each(function(){if(d(this).hasClass("l-selected"))a.selectBox.hide();
else{d(".l-selected",a.selectBox).removeClass("l-selected");d(this).addClass("l-selected");a.select[0].selectedIndex!=d(this).attr("index")&&a.select[0].onchange&&(a.select[0].selectedIndex=d(this).attr("index"),a.select[0].onchange());var c=parseInt(d(this).attr("index"));a.select[0].selectedIndex=c;a.select.trigger("change");a.selectBox.hide();var c=d(this).attr("value"),e=d(this).html();b.render?a.inputText.val(b.render(c,e)):a.inputText.val(e)}});a._addClickEven()},_setData:function(a,b){this.setData(a,
b)},getRowIndex:function(a){var b=this.options;if(!a||!this.data||!this.data.length)return-1;for(var c=0;c<this.data.length;c++)if(null!=this.data[c]&&this.data[c][b.valueField]==a)return c;return-1},getRow:function(a){var b=this.options;if(!a||!this.data||!this.data.length)return null;for(var c=0;c<this.data.length;c++)if(null!=this.data[c]&&this.data[c][b.valueField]==a)return this.data[c];return null},setData:function(a,b){var c=this,e=this.options;if(!c.select){if(!e)return!1;if(e.selectBoxRender)e.selectBoxRender.call(c,
{selectBox:c.selectBox,data:a});else{a&&a.length||(a=[]);c.data!=a&&(c.data=a);c.data=d.isFunction(c.data)?c.data():c.data;if(!1===c.trigger("beforeShowData",[a]))return!1;this.clearContent();if(e.columns){c.selectBox.table.headrow=d("\x3ctr class\x3d'l-table-headerow'\x3e\x3ctd width\x3d'18px'\x3e\x3c/td\x3e\x3c/tr\x3e");c.selectBox.table.append(c.selectBox.table.headrow);c.selectBox.table.addClass("l-box-select-grid");for(var f=0;f<e.columns.length;f++){var g=d("\x3ctd columnindex\x3d'"+f+"' columnname\x3d'"+
e.columns[f].name+"'\x3e"+e.columns[f].header+"\x3c/td\x3e");e.columns[f].width&&g.width(e.columns[f].width);c.selectBox.table.headrow.append(g)}}g=[];e.emptyText&&(c.emptyRow={},c.emptyRow[e.textField]=e.emptyText,c.emptyRow[e.valueField]=void 0!=e.emptyValue?e.emptyValue:"",a.splice(0,0,c.emptyRow));for(var h=0;h<a.length;h++){var f=a[h][e.valueField],k=a[h][e.textField],m=d.isFunction(e.isRowReadOnly)?e.isRowReadOnly(a[h]):!1;if(e.columns){g.push("\x3ctr value\x3d'"+f+"'");m&&g.push(" class\x3d'rowreadonly'");
g.push("\x3e");g.push("\x3ctd style\x3d'width:18px;'  index\x3d'"+h+"' value\x3d'"+f+"' text\x3d'"+k+"' \x3e\x3cinput type\x3d'checkbox' /\x3e\x3c/td\x3e");for(f=0;f<e.columns.length;f++)g.push("\x3ctd\x3e"+a[h][e.columns[f].name]+"\x3c/td\x3e");g.push("\x3c/tr\x3e")}else{g.push("\x3ctr value\x3d'"+f+"'");var n=[];m&&n.push(" rowreadonly ");d.isFunction(e.rowClsRender)&&n.push(e.rowClsRender(a[h]));n.length&&(g.push(" class\x3d'"),g.push(n.join("")),g.push("'"));g.push("\x3e");e.isShowCheckBox&&g.push("\x3ctd style\x3d'width:18px;'  index\x3d'"+
h+"' value\x3d'"+f+"' text\x3d'"+k+"' \x3e\x3cinput type\x3d'checkbox' /\x3e\x3c/td\x3e");m=k;m=e.renderItem?e.renderItem.call(c,{data:a[h],value:f,text:k,key:c.inputText.val()}):e.autocomplete&&e.highLight?c._highLight(k,c.inputText.val()):"\x3cspan\x3e"+m+"\x3c/span\x3e";g.push("\x3ctd index\x3d'"+h+"' value\x3d'"+f+"' text\x3d'"+k+"' align\x3d'left'\x3e"+m+"\x3c/td\x3e\x3c/tr\x3e")}}e.columns?c.selectBox.table.append(g.join("")):e.isShowCheckBox?d("table.l-table-checkbox",c.selectBox).append(g.join("")):
d("table.l-table-nocheckbox",c.selectBox).append(g.join(""));e.addRowButton&&e.addRowButtonClick&&!c.addRowButton&&(c.addRowButton=d('\x3cdiv class\x3d"l-box-select-add"\x3e\x3ca href\x3d"javascript:void(0)" class\x3d"link"\x3e\x3cdiv class\x3d"icon"\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e'),c.addRowButton.find(".link").append(e.addRowButton).click(e.addRowButtonClick),c.selectBoxInner.after(c.addRowButton));c.set("selectBoxHeight",e.selectBoxHeight);e.isShowCheckBox&&d.fn.ligerCheckBox&&d("table input:checkbox",
c.selectBox).ligerCheckBox();d(".l-table-checkbox input:checkbox",c.selectBox).change(function(){if(this.checked&&c.hasBind("beforeSelect")){var b=null,b="div"==d(this).parent().get(0).tagName.toLowerCase()?d(this).parent().parent():d(this).parent();if(null!=b&&0==c.trigger("beforeSelect",[b.attr("value"),b.attr("text")]))return c.selectBox.slideToggle("fast"),!1}!e.isMultiSelect&&this.checked&&(d("input:checked",c.selectBox).not(this).each(function(){this.checked=!1;d(".l-checkbox-checked",d(this).parent()).removeClass("l-checkbox-checked")}),
c.selectBox.slideToggle("fast"));c._checkboxUpdateValue()});d("table.l-table-nocheckbox td",c.selectBox).hover(function(){d(this).parent().hasClass("rowreadonly")||d(this).addClass("l-over")},function(){d(this).removeClass("l-over")});c._addClickEven();e.autocomplete||c.updateStyle();c.updateSelectBoxPosition(!0);c.loadedData&&0!=c.loadedData.length&&"boolean"===typeof b&&!1===b||(c.loadedData=a);c.trigger("afterShowData",[a])}}},setTree:function(a){var b=this,c=this.options;this.clearContent();b.selectBox.table.remove();
0!=a.checkbox?a.onCheck=function(){var a=b.treeManager.getChecked(),f=[],g=[];d(a).each(function(b,a){c.treeLeafOnly&&a.data.children||(f.push(a.data[c.valueField]),g.push(a.data[c.textField]))});b._changeValue(f.join(c.split),g.join(c.split),!0)}:(a.onSelect=function(a){0==b.trigger("BeforeSelect",[a])||c.treeLeafOnly&&a.data.children||(b._changeValue(a.data[c.valueField],a.data[c.textField],!0),b.selectBox.hide())},a.onCancelSelect=function(c){b._changeValue("","",!0)});a.onAfterAppend=function(a,
d){b.treeManager&&(a=null,c.initValue?a=c.initValue:""!=b.valueField.val()&&(a=b.valueField.val()),b.selectValueByTree(a))};b.tree=d("\x3cul\x3e\x3c/ul\x3e");d("div:first",b.selectBox).append(b.tree);b.innerTree=b.tree.ligerTree(a);b.treeManager=b.tree.ligerGetTreeManager()},getTree:function(){return this.innerTree},selectValueByTree:function(a){var b=this.options;if(null!=a){var c=this.treeSelectInit(a);this._changeValue(a,c,b.initIsTriggerEvent)}},treeSelectInit:function(a){var b=this,c=this.options;
if(null!=a){var e="",f=a.toString().split(c.split);d(f).each(function(a,d){b.treeManager.selectNode(d.toString(),!1);e+=b.treeManager.getTextByID(d);a<f.length-1&&(e+=c.split)});return e}},setGrid:function(a){var b=this,c=this.options;if(!b.grid){c.hideOnLoseFocus=c.hideGridOnLoseFocus?!0:!1;this.clearContent();b.selectBox.addClass("l-box-select-lookup");b.selectBox.table.remove();var e=d("div:first",b.selectBox),f=d.extend({columnWidth:120,alternatingRow:!1,frozen:!0,rownumbers:!0,allowUnSelectRow:!0},
a,{width:"100%",height:b.getGridHeight(),inWindow:!1,parms:c.parms,isChecked:function(a){var e=b.getValue();return e&&c.valueField&&a[c.valueField]?-1!=d.inArray(a[c.valueField].toString(),e.split(c.split)):!1}});b.grid=b.gridManager=d('\x3cdiv id\x3d"'+this.textFieldID+'FieldGrid"\x3e\x3c/div\x3e').ligerGrid(a);b.grid.bind("afterShowData",function(){b.updateSelectBoxPosition()});b.bind("show",function(){b.grid.refreshSize()});b.bind("clear",function(){g=[];b.grid.selecteds=[];b.grid._showData()});
var g=[],h=function(){var a=[],e=[];debugger;var d=b.grid.getSelectedRows();d.forEach(function(b,d){a.push(b[c.valueField]);e.push(b[c.textField])});b.selected=d;b._changeValue(a.join(c.split),e.join(c.split),!0);b.trigger("gridSelect",{value:a.join(c.split),text:e.join(c.split),data:d})},k=function(b){debugger;for(var a=g.length-1;0<=a;a--)g[a][c.valueField]==b[c.valueField]&&g.splice(a,1)},m=function(b){debugger;for(var a=g.length-1;0<=a;a--)if(g[a][c.valueField]==b[c.valueField])return;g.push(b)};
f.checkbox?(b.grid.bind("CheckAllRow",function(c){d(b.grid.rows).each(function(b,a){c&&m(a);!c&&k(a)});h()}),b.grid.bind("CheckRow",function(c,b){c&&m(b);!c&&k(b);h()}),b.grid.bind("toggleSelected",function(c,b){c?m(b):k(b)}),b.grid.bind("clearSelecteds",function(){g=[]})):(b.grid.bind("SelectRow",function(a){g=[a];h();c.isMultiSelect||b._toggleSelectBox(!0)}),b.grid.bind("UnSelectRow",function(){g=[];h()}));if(c.condition){f=d.extend({labelWidth:60,space:20,width:c.selectBoxWidth},c.condition);b.condition=
d("\x3cform\x3e\x3c/form\x3e").ligerForm(f);var f=d('\x3cli style\x3d"margin-right:9px"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/li\x3e'),n=d('\x3cli style\x3d"margin-right:9px;float:right"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/li\x3e');d("ul:first",b.condition.element).append(f).append(n).after('\x3cdiv class\x3d"l-clear"\x3e\x3c/div\x3e');d("div",f).ligerButton({text:c.Search,width:40,click:function(){var e=b.condition.toConditions();c.conditionSearchClick?c.conditionSearchClick({grid:b.grid,rules:e}):b.grid.get("url")?
(b.grid.setParm(a.conditionParmName||"condition",d.ligerui.toJSON(e)),b.grid.reload()):b.grid.loadData(d.ligerFilter.getFilterFunction(e))}});d("div",n).ligerButton({text:"关闭",width:40,click:function(){b.selectBox.hide()}});b.condition.element.appendTo(e)}b.grid.element.appendTo(e);b.grid.refreshSize()}},getGridHeight:function(a){a=a||this.selectBox.height();return a-=this.conditionPanel.height()},_getValue:function(){var a=this.options;return a.isTextBoxMode||a.textAsValue?this.inputText.val():d(this.valueField).val()},
getValue:function(){return this._getValue()},getSelected:function(){return this.selected},upFocus:function(){if(this.grid){if(this.grid.rows&&this.grid.rows.length){var a=this.grid.getSelected();if(a){var b=d.inArray(a,this.grid.rows);b-1<this.grid.rows.length&&(this.grid.unselect(a),this.grid.select(this.grid.rows[b-1]))}else this.grid.select(this.grid.rows[0])}}else a=this.selectBox.table.find("td.l-over").attr("index"),void 0!=a&&"0"!=a&&(a=parseInt(a)-1,this.selectBox.table.find("td.l-over").removeClass("l-over"),
this.selectBox.table.find("td[index\x3d"+a+"]").addClass("l-over"),this._scrollAdjust(a))},downFocus:function(){if(this.grid){if(this.grid.rows&&this.grid.rows.length){var a=this.grid.getSelected();if(a){var b=d.inArray(a,this.grid.rows);b+1<this.grid.rows.length&&(this.grid.unselect(a),this.grid.select(this.grid.rows[b+1]))}else this.grid.select(this.grid.rows[0])}}else a=this.selectBox.table.find("td.l-over").attr("index"),a!=this.data.length-1&&(a=void 0==a?0:parseInt(a)+1,this.selectBox.table.find("td.l-over").removeClass("l-over"),
this.selectBox.table.find("td[index\x3d"+a+"]").addClass("l-over"),this._scrollAdjust(a))},_scrollAdjust:function(a){var b=d(".l-box-select-inner",this.selectBox).height(),c=d(".l-box-select-inner table",this.selectBox).height();c<=b||(parseInt(c/b),c/=this.data.length,a=parseInt((a+1)*c/b)+((a+1)*c%b?1:0),d(".l-box-select-inner",this.selectBox).scrollTop((a-1)*b))},getText:function(){return this.inputText.val()},setText:function(a){this.options.isTextBoxMode||this.inputText.val(a)},updateStyle:function(){this.options.initValue=
this._getValue();this._dataInit()},_dataInit:function(){var a=this.options,b=null;null!=a.initValue&&null!=a.initText&&this._changeValue(a.initValue,a.initText);if(null!=a.initValue)if(b=a.initValue,a.tree)b&&this.selectValueByTree(b);else{if(this.data){var c=this.findTextByValue(b);this._changeValue(b,c)}}else""!=this.valueField.val()&&(b=this.valueField.val(),a.tree?b&&this.selectValueByTree(b):this.data&&(c=this.findTextByValue(b),this._changeValue(b,c)));a.isShowCheckBox?d(":checkbox",this.selectBox).each(function(){var c=
null,f=d(this),c="div"==f.parent().get(0).tagName.toLowerCase()?f.parent().parent():f.parent();if(null!=c){d(".l-checkbox",c).removeClass("l-checkbox-checked");f[0].checked=!1;var g=(b||"").toString().split(a.split);d(g).each(function(a,e){null!=b&&e==c.attr("value")&&(d(".l-checkbox",c).addClass("l-checkbox-checked"),f[0].checked=!0)})}}):d("table tr",this.selectBox).find("td:first").each(function(){null!=b&&b==d(this).attr("value")?d(this).addClass("l-selected"):d(this).removeClass("l-selected")})},
_changeValue:function(a,b,c,e){var f=this,g=this.options;if(g.beforeChange&&!g.beforeChange.call(f,a,b))return!1;f.valueField.val(a);g&&g.render?f.inputText.val(g.render(a,b)):f.inputText.val(b);f.select&&d("option",f.select).each(function(c,b){d(this).attr("selected",d(this).attr("value")==a)});f.selectedValue=a;f.selectedText=b;f.inputText.trigger("change");e&&f.inputText.focus();if(c){var h=null;a&&"string"==typeof a&&-1<a.indexOf(g.split)?(h=[],c=a.split(g.split),d(c).each(function(c,b){h.push(f.getRow(b))})):
a&&(h=f.getRow(a));f.trigger("selected",[a,b,h])}},_checkboxUpdateValue:function(){var a=this.options,b="",c="";d("input:checked",this.selectBox).each(function(){var e;if(e="div"==d(this).parent().get(0).tagName.toLowerCase()?d(this).parent().parent():d(this).parent())b+=e.attr("value")+a.split,c+=e.attr("text")+a.split});0<b.length&&(b=b.substr(0,b.length-1));0<c.length&&(c=c.substr(0,c.length-1));this._changeValue(b,c,!0);this.inputText.attr("validate")&&(a.isTextBoxMode?this.inputText.valid():
this.valueField.valid())},loadDetail:function(a,b){var c=this.options,e=d.isFunction(c.detailParms)?c.detailParms.call(this):c.detailParms;e[c.detailPostIdField||"id"]=a;"application/json"==c.ajaxContentType&&(e=liger.toJSON(e));a={type:c.ajaxType,url:c.detailUrl,data:e,cache:!0,dataType:"json",beforeSend:c.ajaxBeforeSend,complete:c.ajaxComplete,success:function(a){a=d.isFunction(c.detailDataGetter)?c.detailDataGetter(a):a;a=c.detailDataParmName?a[c.detailDataParmName]:a;b&&b(a)}};c.ajaxContentType&&
(a.contentType=c.ajaxContentType);d.ajax(a)},enabledLoadDetail:function(){var a=this.options;return a.detailUrl&&a.detailEnabled?!0:!1},_addClickEven:function(){var a=this,b=this.options;d(".l-table-nocheckbox td",a.selectBox).click(function(c){function e(){if(a.hasBind("beforeSelect")&&0==a.trigger("beforeSelect",[g,m,k]))return b.slide?a.selectBox.slideToggle("fast"):a.selectBox.hide(),!1;a.selected=k;f.hasClass("l-selected")?b.slide?a.selectBox.slideToggle("fast"):a.selectBox.hide():(d(".l-selected",
a.selectBox).removeClass("l-selected"),f.addClass("l-selected"),a.select&&a.select[0].selectedIndex!=h&&(a.select[0].selectedIndex=h,a.select.trigger("change")),b.slide?(a.boxToggling=!0,a.selectBox.hide("fast",function(){a.boxToggling=!1})):a.selectBox.hide(),a.lastInputText=m,a._changeValue(g,m,!0,!0),a.inputText.attr("validate")&&(b.isTextBoxMode?a.inputText.valid():a.valueField.valid()))}var f=d(this);if(!f.parent().hasClass("rowreadonly")){var g=f.attr("value"),h=parseInt(f.attr("index")),k=
a.data[h],m=f.attr("text");a.enabledLoadDetail()?a.loadDetail(g,function(c){a.data[h]=k=c;e()}):e()}})},updateSelectBoxPosition:function(a){var b=this.options;if(b&&b.absolute){a=d(document).height();a=Number(this.wrapper.offset().top+1+this.wrapper.outerHeight()+this.selectBox.height())>a;var c=this.wrapper.offset().top>this.selectBox.height()+1;b.alwayShowInTop||a&&c&&!b.alwayShowInDown?this.selectBox.css({left:this.wrapper.offset().left,top:this.wrapper.offset().top-1-this.selectBox.height()+(b.selectBoxPosYDiff||
0)}):this.selectBox.css({left:this.wrapper.offset().left,top:this.wrapper.offset().top+1+this.wrapper.outerHeight()+(b.selectBoxPosYDiff||0)})}else{var c=this.wrapper.height(),e=this.wrapper.offset().top-d(window).scrollTop(),f=this.selectBox.height()+c+4;a&&"up"===this.selectBox.attr("data-dir")||!a&&e+f>d(window).height()&&e>f?this.selectBox.css("marginTop",-1*(this.selectBox.height()+c+1)+(b.selectBoxPosYDiff||0)).attr("data-dir","up"):this.selectBox.css("marginTop","-2px").attr("data-dir","down")}},
_toggleSelectBox:function(a){function b(){var b=d("td.l-selected",c.selectBox).offset().top-c.selectBox.offset().top;d(".l-box-select-inner",c.selectBox).animate({scrollTop:b})}var c=this,e=this.options;if(c&&e){for(var f=d.ligerui.find(d.ligerui.controls.ComboBox),g=0,h=f.length;g<h;g++){var k=f[g];k.id!=c.id&&null!=k.selectBox.is(":visible")&&k.selectBox.is(":visible")&&k.selectBox.hide()}f=d.ligerui.find(d.ligerui.controls.DateEditor);g=0;for(h=f.length;g<h;g++)k=f[g],k.id!=c.id&&null!=k.dateeditor.is(":visible")&&
k.dateeditor.is(":visible")&&k.dateeditor.hide();c.wrapper.height();c.boxToggling=!0;a||c.updateSelectBoxPosition();e.slide?c.selectBox.slideToggle("fast",function(){c.boxToggling=!1;!a&&!e.isShowCheckBox&&0<d("td.l-selected",c.selectBox).length&&b()}):(a?c.selectBox.hide():c._selectBoxShow(),c.boxToggling=!1,!(a||c.tree||c.grid||e.isShowCheckBox)&&0<d("td.l-selected",c.selectBox).length&&b());c.isShowed=c.selectBox.is(":visible");c.trigger("toggle",[a]);c.trigger(a?"hide":"show")}},_selectBoxShow:function(){var a=
this.options;a.readonly||(a.grid||a.tree?this.selectBox.show():this.selectBox.table.find("tr").length||a.selectBoxRender&&this.selectBoxInner.html()?this.selectBox.show():this.selectBox.hide())},_highLight:function(a,b){if(!a)return a;a=a.toString();var c=a.indexOf(b);return-1==c?a:a.substring(0,c)+"\x3cspan class\x3d'l-highLight'\x3e"+b+"\x3c/span\x3e"+a.substring(b.length+c)},_updateInput:function(a,b){var c=this,e=this.options;if(c.lastInputText!=c.inputText.val()){var f=c.inputText.val();f?f=
f.replace(/(^\s*)|(\s*$)/g,""):(e.initValue="",c.valueField.val(""));c.lastInputText=c.inputText.val();if(d.isFunction(a))a.call(c,{key:inpuText,show:function(){c._selectBoxShow()}});else if(e.autocompleteAllowEmpty||f){if(c.loadedData){if(f){a=c.loadedData;var g=[],h;for(h in a){var k=a[h][e.autocompleteKeyField]||a[h][e.textField];0<=k.indexOf(f)&&g.push(a[h]);if(k==f){c._setValue(e.isTextBoxMode?k:a[h][e.valueField],k);c.setData(a,!1);return}}c.setData(g,!1)}else c.setData(c.loadedData,!1);b&&
c._selectBoxShow()}else e.url?(c.setParm("key",f),c.setUrl(e.url,function(){c._selectBoxShow()})):e.grid&&(c.grid.setParm("key",f),c.grid.reload());this._acto=null}else c.clear(),c.selectBox.hide()}},_setAutocomplete:function(a){var b=this,c=this.options;a&&!c.readonly&&(b.inputText.removeAttr("readonly"),b.lastInputText=b.inputText.val(),b.inputText.blur(function(){var a=!1,f=b.inputText.val();if(f&&b.loadedData){var f=f.replace(/(^\s*)|(\s*$)/g,""),g=b.loadedData,h;for(h in g)g[h][c.autocompleteKeyField]==
f&&(b._changeValue(g[h][c.valueField],g[h][c.textField],!1),a=!0);c.isTextBoxMode&&setTimeout(function(){b.setData(b.loadedData,!1)},200);a||(c.isTextBoxMode?b._changeValue("",f,!1):(b.inputText.val(""),b.inputText.trigger(d.browser.msie?"propertychange":"input"),b._changeValue("","",!1)))}}),b.inputText.bind("input propertychange",function(c){this._acto&&clearTimeout(this._acto);this._acto=setTimeout(function(c){return function(){b._updateInput(c,!0)}}(a),300)}))}});d.ligerui.controls.ComboBox.prototype.setValue=
d.ligerui.controls.ComboBox.prototype.selectValue;d.ligerui.controls.ComboBox.prototype.setInputValue=d.ligerui.controls.ComboBox.prototype._changeValue;(function(){d(document).unbind("keydown.ligercombobox");d(document).bind("keydown.ligercombobox",function(a){function b(){f.selectBox.is(":visible")||f.selectBox.show();f.downFocus()}function c(){var c=f.selectBox.table.find("td.l-over").eq(0);f.options.isMultiSelect?(c.find(".l-checkbox").trigger("click"),f.trigger("textBoxKeyEnter",[{rowdata:h}])):
h?(f._changeValue(h[g.valueField],h[g.textField],!0),f.selectBox.hide(),f.trigger("textBoxKeyEnter",[{rowdata:h}])):(f._changeValue(k,c.attr("text"),!0),f.selectBox.hide(),f.trigger("textBoxKeyEnter",[{element:c.get(0)}]))}var e=d("input:focus");if(e.length&&e.attr("data-comboboxid")){var f=liger.get(e.attr("data-comboboxid"));if(f){var g=f.options;if(f.get("keySupport"))if(38==a.keyCode)f.upFocus();else if(40==a.keyCode)f.hasBind("textBoxKeyDown")?f.trigger("textBoxKeyDown",[{callback:function(){b()}}]):
b();else if(13==a.keyCode&&f.selectBox.is(":visible")){var h=null;f.grid&&(h=f.grid.getSelected());a=f.selectBox.table.find("td.l-over");if(h||a.length){var k=a.attr("value");h&&h.ID&&(k=h.ID);f.enabledLoadDetail()?f.loadDetail(k,function(b){if(!h){var a=f.getRowIndex(k);if(-1==a)return;f.data=f.data||[];f.data[a]=f.selected=b}c()}):c()}}}}})})()})(jQuery);
(function(d){d.fn.ligerDateEditor=function(){return d.ligerui.run.call(this,"ligerDateEditor",arguments)};d.fn.ligerGetDateEditorManager=function(){return d.ligerui.run.call(this,"ligerGetDateEditorManager",arguments)};d.ligerDefaults.DateEditor={format:"yyyy-MM-dd hh:mm",width:null,showTime:!1,onChangeDate:!1,absolute:!0,cancelable:!0,readonly:!1};d.ligerDefaults.DateEditorString={dayMessage:"日一二三四五六".split(""),monthMessage:"一月 二月 三月 四月 五月 六月 七月 八月 九月 十月 十一月 十二月".split(" "),todayMessage:"今天",closeMessage:"关闭"};
d.ligerMethos.DateEditor={};d.ligerui.controls.DateEditor=function(a,b){d.ligerui.controls.DateEditor.base.constructor.call(this,a,b)};d.ligerui.controls.DateEditor.ligerExtend(d.ligerui.controls.Input,{__getType:function(){return"DateEditor"},__idPrev:function(){return"DateEditor"},_extendMethods:function(){return d.ligerMethos.DateEditor},_render:function(){var a=this,b=this.options;!b.showTime&&-1<b.format.indexOf(" hh:mm")&&(b.format=b.format.replace(" hh:mm",""));!b.showTime&&-1<b.format.indexOf(" hh:mm:ss")&&
(b.format=b.format.replace(" hh:mm:ss",""));if("input"==this.element.tagName.toLowerCase()&&"text"==this.element.type){a.inputText=d(this.element);a.inputText.hasClass("l-text-field")||a.inputText.addClass("l-text-field");a.link=d('\x3cdiv class\x3d"l-trigger"\x3e\x3cdiv class\x3d"l-trigger-icon"\x3e\x3c/div\x3e\x3c/div\x3e');a.text=a.inputText.wrap('\x3cdiv class\x3d"l-text l-text-date"\x3e\x3c/div\x3e').parent();a.text.append('\x3cdiv class\x3d"l-text-l"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-text-r"\x3e\x3c/div\x3e');
a.text.append(a.link);a.textwrapper=a.text.wrap('\x3cdiv class\x3d"l-text-wrapper"\x3e\x3c/div\x3e').parent();a.dateeditor=d("\x3cdiv class\x3d'l-box-dateeditor' style\x3d'display:none'\x3e    \x3cdiv class\x3d'l-box-dateeditor-header'\x3e        \x3cdiv class\x3d'l-box-dateeditor-header-btn l-box-dateeditor-header-prevyear'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e        \x3cdiv class\x3d'l-box-dateeditor-header-btn l-box-dateeditor-header-prevmonth'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e        \x3cdiv class\x3d'l-box-dateeditor-header-text'\x3e\x3ca class\x3d'l-box-dateeditor-header-month'\x3e\x3c/a\x3e , \x3ca  class\x3d'l-box-dateeditor-header-year'\x3e\x3c/a\x3e\x3c/div\x3e        \x3cdiv class\x3d'l-box-dateeditor-header-btn l-box-dateeditor-header-nextmonth'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e        \x3cdiv class\x3d'l-box-dateeditor-header-btn l-box-dateeditor-header-nextyear'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e    \x3c/div\x3e    \x3cdiv class\x3d'l-box-dateeditor-body'\x3e        \x3ctable cellpadding\x3d'0' cellspacing\x3d'0' border\x3d'0' class\x3d'l-box-dateeditor-calendar'\x3e            \x3cthead\x3e                \x3ctr\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3c/tr\x3e            \x3c/thead\x3e            \x3ctbody\x3e                \x3ctr class\x3d'l-first'\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3ctd align\x3d'center'\x3e\x3c/td\x3e\x3c/tr\x3e            \x3c/tbody\x3e        \x3c/table\x3e        \x3cul class\x3d'l-box-dateeditor-monthselector'\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3c/ul\x3e        \x3cul class\x3d'l-box-dateeditor-yearselector'\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3c/ul\x3e        \x3cul class\x3d'l-box-dateeditor-hourselector'\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3c/ul\x3e        \x3cul class\x3d'l-box-dateeditor-minuteselector'\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3c/ul\x3e    \x3c/div\x3e    \x3cdiv class\x3d'l-box-dateeditor-toolbar'\x3e        \x3cdiv class\x3d'l-box-dateeditor-time'\x3e\x3c/div\x3e        \x3cdiv class\x3d'l-button l-button-today'\x3e\x3c/div\x3e        \x3cdiv class\x3d'l-button l-button-close'\x3e\x3c/div\x3e        \x3cdiv class\x3d'l-clear'\x3e\x3c/div\x3e    \x3c/div\x3e\x3c/div\x3e");
b.absolute?a.dateeditor.appendTo("body").addClass("l-box-dateeditor-absolute"):a.textwrapper.append(a.dateeditor);a.header=d(".l-box-dateeditor-header",a.dateeditor);a.body=d(".l-box-dateeditor-body",a.dateeditor);a.toolbar=d(".l-box-dateeditor-toolbar",a.dateeditor);a.body.thead=d("thead",a.body);a.body.tbody=d("tbody",a.body);a.body.monthselector=d(".l-box-dateeditor-monthselector",a.body);a.body.yearselector=d(".l-box-dateeditor-yearselector",a.body);a.body.hourselector=d(".l-box-dateeditor-hourselector",
a.body);a.body.minuteselector=d(".l-box-dateeditor-minuteselector",a.body);a.toolbar.time=d(".l-box-dateeditor-time",a.toolbar);a.toolbar.time.hour=d("\x3ca\x3e\x3c/a\x3e");a.toolbar.time.minute=d("\x3ca\x3e\x3c/a\x3e");a.buttons={btnPrevYear:d(".l-box-dateeditor-header-prevyear",a.header),btnNextYear:d(".l-box-dateeditor-header-nextyear",a.header),btnPrevMonth:d(".l-box-dateeditor-header-prevmonth",a.header),btnNextMonth:d(".l-box-dateeditor-header-nextmonth",a.header),btnYear:d(".l-box-dateeditor-header-year",
a.header),btnMonth:d(".l-box-dateeditor-header-month",a.header),btnToday:d(".l-button-today",a.toolbar),btnClose:d(".l-button-close",a.toolbar)};var c=new Date;a.now={year:c.getFullYear(),month:c.getMonth()+1,day:c.getDay(),date:c.getDate(),hour:c.getHours(),minute:c.getMinutes()};a.currentDate={year:c.getFullYear(),month:c.getMonth()+1,day:c.getDay(),date:c.getDate(),hour:c.getHours(),minute:c.getMinutes()};a.selectedDate=null;a.usedDate=null;d("td",a.body.thead).each(function(c,a){d(a).html(b.dayMessage[c])});
d("li",a.body.monthselector).each(function(c,a){d(a).html(b.monthMessage[c])});a.buttons.btnToday.html(b.todayMessage);a.buttons.btnClose.html(b.closeMessage);b.showTime&&(a.toolbar.time.show(),a.toolbar.time.append(a.toolbar.time.hour).append(":").append(a.toolbar.time.minute),d("li",a.body.hourselector).each(function(c,b){b=c;10>c&&(b="0"+c.toString());d(this).html(b)}),d("li",a.body.minuteselector).each(function(c,b){b=c;10>c&&(b="0"+c.toString());d(this).html(b)}));a.bulidContent();b.initValue&&
a.inputText.val(b.initValue);if(""!=a.inputText.val())a.onTextChange();a.dateeditor.hover(null,function(c){a.dateeditor.is(":visible")&&!a.editorToggling&&a.toggleDateEditor(!0)});a.link.hover(function(){b.disabled||(this.className="l-trigger-hover")},function(){b.disabled||(this.className="l-trigger")}).mousedown(function(){b.disabled||(this.className="l-trigger-pressed")}).mouseup(function(){b.disabled||(this.className="l-trigger-hover")}).click(function(){b.disabled||(a.bulidContent(),a.toggleDateEditor(a.dateeditor.is(":visible")))});
b.disabled&&(a.inputText.attr("readonly","readonly"),a.text.addClass("l-text-disabled"));a.buttons.btnClose.click(function(){a.toggleDateEditor(!0)});d("td",a.body.tbody).hover(function(){d(this).hasClass("l-box-dateeditor-today")||d(this).addClass("l-box-dateeditor-over")},function(){d(this).removeClass("l-box-dateeditor-over")}).click(function(){d(".l-box-dateeditor-selected",a.body.tbody).removeClass("l-box-dateeditor-selected");d(this).hasClass("l-box-dateeditor-today")||d(this).addClass("l-box-dateeditor-selected");
a.currentDate.date=parseInt(d(this).html());a.currentDate.day=(new Date(a.currentDate.year,a.currentDate.month-1,1)).getDay();d(this).hasClass("l-box-dateeditor-out")&&(0==d("tr",a.body.tbody).index(d(this).parent())?0==--a.currentDate.month&&(a.currentDate.month=12,a.currentDate.year--):13==++a.currentDate.month&&(a.currentDate.month=1,a.currentDate.year++));a.selectedDate={year:a.currentDate.year,month:a.currentDate.month,date:a.currentDate.date};a.showDate();a.editorToggling=!0;a.dateeditor.slideToggle("fast",
function(){a.editorToggling=!1})});d(".l-box-dateeditor-header-btn",a.header).hover(function(){d(this).addClass("l-box-dateeditor-header-btn-over")},function(){d(this).removeClass("l-box-dateeditor-header-btn-over")});a.buttons.btnYear.click(function(){a.body.yearselector.is(":visible")||d("li",a.body.yearselector).each(function(c,b){c=a.currentDate.year+(c-4);c==a.currentDate.year?d(this).addClass("l-selected"):d(this).removeClass("l-selected");d(this).html(c)});a.body.yearselector.slideToggle()});
a.body.yearselector.hover(function(){},function(){d(this).slideUp()});d("li",a.body.yearselector).click(function(){a.currentDate.year=parseInt(d(this).html());a.body.yearselector.slideToggle();a.bulidContent()});a.buttons.btnMonth.click(function(){d("li",a.body.monthselector).each(function(c,b){a.currentDate.month==c+1?d(this).addClass("l-selected"):d(this).removeClass("l-selected")});a.body.monthselector.slideToggle()});a.body.monthselector.hover(function(){},function(){d(this).slideUp("fast")});
d("li",a.body.monthselector).click(function(){var c=d("li",a.body.monthselector).index(this);a.currentDate.month=c+1;a.body.monthselector.slideToggle();a.bulidContent()});a.toolbar.time.hour.click(function(){d("li",a.body.hourselector).each(function(c,b){a.currentDate.hour==c?d(this).addClass("l-selected"):d(this).removeClass("l-selected")});a.body.hourselector.slideToggle()});a.body.hourselector.hover(function(){},function(){d(this).slideUp("fast")});d("li",a.body.hourselector).click(function(){var c=
d("li",a.body.hourselector).index(this);a.currentDate.hour=c;a.body.hourselector.slideToggle();a.bulidContent();a.showDate()});a.toolbar.time.minute.click(function(){d("li",a.body.minuteselector).each(function(c,b){a.currentDate.minute==c?d(this).addClass("l-selected"):d(this).removeClass("l-selected")});a.body.minuteselector.slideToggle("fast",function(){if(29<d("li",this).index(d("li.l-selected",this))){var c=d("li.l-selected",this).offset().top-d(this).offset().top;d(this).animate({scrollTop:c})}})});
a.body.minuteselector.hover(function(){},function(){d(this).slideUp("fast")});d("li",a.body.minuteselector).click(function(){var c=d("li",a.body.minuteselector).index(this);a.currentDate.minute=c;a.body.minuteselector.slideToggle("fast");a.bulidContent();a.showDate()});a.buttons.btnPrevMonth.click(function(){0==--a.currentDate.month&&(a.currentDate.month=12,a.currentDate.year--);a.bulidContent()});a.buttons.btnNextMonth.click(function(){13==++a.currentDate.month&&(a.currentDate.month=1,a.currentDate.year++);
a.bulidContent()});a.buttons.btnPrevYear.click(function(){a.currentDate.year--;a.bulidContent()});a.buttons.btnNextYear.click(function(){a.currentDate.year++;a.bulidContent()});a.buttons.btnToday.click(function(){a.currentDate={year:a.now.year,month:a.now.month,day:a.now.day,date:a.now.date};a.selectedDate={year:a.now.year,month:a.now.month,day:a.now.day,date:a.now.date};a.showDate();a.dateeditor.slideToggle("fast")});a.inputText.change(function(){a.onTextChange()}).blur(function(){a.text.removeClass("l-text-focus")}).focus(function(){a.text.addClass("l-text-focus")});
a.text.hover(function(){a.text.addClass("l-text-over")},function(){a.text.removeClass("l-text-over")});b.label&&(a.labelwrapper=a.textwrapper.wrap('\x3cdiv class\x3d"l-labeltext"\x3e\x3c/div\x3e').parent(),a.labelwrapper.prepend('\x3cdiv class\x3d"l-text-label" style\x3d"float:left;display:inline;"\x3e'+b.label+":\x26nbsp\x3c/div\x3e"),a.textwrapper.css("float","left"),b.labelWidth?d(".l-text-label",a.labelwrapper).outerWidth(b.labelWidth):b.labelWidth=d(".l-text-label",a.labelwrapper).outerWidth(),
d(".l-text-label",a.labelwrapper).width(b.labelWidth),d(".l-text-label",a.labelwrapper).height(a.text.height()),a.labelwrapper.append('\x3cbr style\x3d"clear:both;" /\x3e'),b.labelAlign&&d(".l-text-label",a.labelwrapper).css("text-align",b.labelAlign),a.textwrapper.css({display:"inline"}),a.labelwrapper.width(a.text.outerWidth()+b.labelWidth+2));a.set(b);d(document).bind("click.dateeditor",function(c){a.dateeditor.is(":visible")&&0==d(c.target||c.srcElement).closest(".l-box-dateeditor, .l-text-date").length&&
a.toggleDateEditor(!0)})}},destroy:function(){this.textwrapper&&this.textwrapper.remove();this.dateeditor&&this.dateeditor.remove();this.options=null;d.ligerui.remove(this)},bulidContent:function(){var a=this,b=this.options,c=(new Date(a.currentDate.year,a.currentDate.month-1,1)).getDay(),e=a.currentDate.month,f=a.currentDate.year;13==++e&&(e=1,f++);var g=(new Date(f,e-1,0)).getDate(),h=(new Date(a.currentDate.year,a.currentDate.month-1,0)).getDate();a.buttons.btnMonth.html(b.monthMessage[a.currentDate.month-
1]);a.buttons.btnYear.html(a.currentDate.year);a.toolbar.time.hour.html(a.currentDate.hour);a.toolbar.time.minute.html(a.currentDate.minute);1==a.toolbar.time.hour.html().length&&a.toolbar.time.hour.html("0"+a.toolbar.time.hour.html());1==a.toolbar.time.minute.html().length&&a.toolbar.time.minute.html("0"+a.toolbar.time.minute.html());d("td",this.body.tbody).each(function(){this.className=""});d("tr",this.body.tbody).each(function(b,e){d("td",e).each(function(e,f){var k=7*b+(e-c),m=k+1;a.selectedDate&&
a.currentDate.year==a.selectedDate.year&&a.currentDate.month==a.selectedDate.month&&k+1==a.selectedDate.date?(0!=e&&6!=e||d(f).addClass("l-box-dateeditor-holiday"),d(f).addClass("l-box-dateeditor-selected"),d(f).siblings().removeClass("l-box-dateeditor-selected")):a.currentDate.year==a.now.year&&a.currentDate.month==a.now.month&&k+1==a.now.date?(0!=e&&6!=e||d(f).addClass("l-box-dateeditor-holiday"),d(f).addClass("l-box-dateeditor-today")):0>k?(m=h+m,d(f).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")):
k>g-1?(m-=g,d(f).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")):0==e||6==e?d(f).addClass("l-box-dateeditor-holiday").removeClass("l-box-dateeditor-selected"):f.className="";d(f).html(m)})})},updateSelectBoxPosition:function(){if(this.options.absolute){var a=d(document).height();Number(this.text.offset().top+1+this.text.outerHeight()+this.dateeditor.height())>a&&a>Number(this.dateeditor.height()+1)?this.dateeditor.css({left:this.text.offset().left,top:this.text.offset().top-
1-this.dateeditor.height()}):this.dateeditor.css({left:this.text.offset().left,top:this.text.offset().top+1+this.text.outerHeight()})}else this.text.offset().top+4>this.dateeditor.height()&&this.text.offset().top+this.dateeditor.height()+textHeight+4-d(window).scrollTop()>d(window).height()?(this.dateeditor.css("marginTop",-1*(this.dateeditor.height()+textHeight+5)),this.showOnTop=!0):this.showOnTop=!1},toggleDateEditor:function(a){for(var b=this,c=d.ligerui.find(d.ligerui.controls.ComboBox),e=0,
f=c.length;e<f;e++){var g=c[e];g.id!=b.id&&null!=g.selectBox.is(":visible")&&g.selectBox.is(":visible")&&g.selectBox.hide()}c=d.ligerui.find(d.ligerui.controls.DateEditor);e=0;for(f=c.length;e<f;e++)g=c[e],g.id!=b.id&&null!=g.dateeditor.is(":visible")&&g.dateeditor.is(":visible")&&g.dateeditor.hide();b.text.height();b.editorToggling=!0;a?b.dateeditor.hide("fast",function(){b.editorToggling=!1}):(b.updateSelectBoxPosition(),b.dateeditor.slideDown("fast",function(){b.editorToggling=!1}))},showDate:function(){if(this.currentDate){this.currentDate.hour=
parseInt(this.toolbar.time.hour.html(),10);this.currentDate.minute=parseInt(this.toolbar.time.minute.html(),10);var a=this.currentDate.year+"/"+this.currentDate.month+"/"+this.currentDate.date+" "+this.currentDate.hour+":"+this.currentDate.minute,a=this.getFormatDate(new Date(a));this.inputText.val(a);this.onTextChange()}},isDateTime:function(a){a=a.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(null==a)return!1;var b=new Date(a[1],a[3]-1,a[4]);return"NaN"==b?!1:b.getFullYear()==a[1]&&b.getMonth()+
1==a[3]&&b.getDate()==a[4]},isLongDateTime:function(a){a=a.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/);if(null==a)return!1;var b=new Date(a[1],a[3]-1,a[4],a[5],a[6]);return"NaN"==b?!1:b.getFullYear()==a[1]&&b.getMonth()+1==a[3]&&b.getDate()==a[4]&&b.getHours()==a[5]&&b.getMinutes()==a[6]},getFormatDate:function(a){if(null===a||"NaN"==a)return null;var b=this.options.format,c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+
3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)(new RegExp("("+d+")")).test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b},clear:function(){this.options.disabled||(this.set("value",""),this.usedDate=null)},_setCancelable:function(a){var b=this,c=this.options;!a&&b.unselect&&(b.unselect.remove(),b.unselect=null);if(a||b.unselect)b.unselect=d('\x3cdiv class\x3d"l-trigger l-trigger-cancel"\x3e\x3cdiv class\x3d"l-trigger-icon"\x3e\x3c/div\x3e\x3c/div\x3e').hide(),
b.text.hover(function(){b.unselect.show()},function(){b.unselect.hide()}),!c.disabled&&c.cancelable&&b.text.append(b.unselect),b.unselect.hover(function(){this.className="l-trigger-hover l-trigger-cancel"},function(){this.className="l-trigger l-trigger-cancel"}).click(function(){c.readonly||b.clear()})},_rever:function(){this.usedDate?this.inputText.val(this.getFormatDate(this.usedDate)):this.inputText.val("")},_getMatch:function(a){var b=[-1,-1,-1,-1,-1,-1],c=0,d="^";for(a=a||this.options.format;;){var f=
a.match(/^yyyy|MM|dd|mm|hh|HH|ss|-|\/|:|\s/);if(f){var g=f[0].charAt(0),f=f[0].length,h="yMdhms".indexOf(g);-1!=h?(b[h]=c+1,d+="(\\d{1,"+f+"})"):d+="("+(" "==g?"\\s":g)+")";c++;if(f==a.length)break;a=a.substring(f)}else return null}return{reg:new RegExp(d+"$"),position:b}},_bulidDate:function(a){var b=this.options,c=this._getMatch();if(!c)return null;var d=a.match(c.reg);if(!d)return null;var f=-1==c.position[0]?1900:d[c.position[0]],g=-1==c.position[1]?0:parseInt(d[c.position[1]],10)-1,h=-1==c.position[2]?
1:parseInt(d[c.position[2]],10);a=-1==c.position[3]?0:parseInt(d[c.position[3]],10);var k=-1==c.position[4]?0:parseInt(d[c.position[4]],10),c=-1==c.position[5]?0:parseInt(d[c.position[5]],10);if(0>g||11<g||0>h||31<h)return null;f=new Date(f,g,h);if(b.showTime){if(0>k||59<k||0>a||23<a||0>c||59<c)return null;f.setHours(a);f.setMinutes(k);f.setSeconds(c)}return f},updateStyle:function(){this.onTextChange()},onTextChange:function(){var a=this.inputText.val();if(!a)return this.selectedDate=null,!0;(a=
this._bulidDate(a))?(this.usedDate=a,this.selectedDate={year:this.usedDate.getFullYear(),month:this.usedDate.getMonth()+1,day:this.usedDate.getDay(),date:this.usedDate.getDate(),hour:this.usedDate.getHours(),minute:this.usedDate.getMinutes()},this.currentDate={year:this.usedDate.getFullYear(),month:this.usedDate.getMonth()+1,day:this.usedDate.getDay(),date:this.usedDate.getDate(),hour:this.usedDate.getHours(),minute:this.usedDate.getMinutes()},a=this.getFormatDate(a),this.inputText.val(a),this.trigger("changeDate",
[a]),d(this.dateeditor).is(":visible")&&this.bulidContent(),this.inputText.attr("validate")&&this.inputText.valid()):this._rever()},_setHeight:function(a){4<a&&(this.text.css({height:a}),this.inputText.css({height:a}),this.textwrapper.css({height:a}))},_setWidth:function(a){20<a&&(this.text.css({width:a}),this.inputText.css({width:a-20}),this.textwrapper.css({width:a}))},_setValue:function(a){a||this.inputText.val("");"string"==typeof a&&(/^\/Date/.test(a)?(a=a.replace(/^\//,"new ").replace(/\/$/,
""),eval("value \x3d "+a),this.inputText.val(a),this.usedDate=a):a&&(a=new Date(a)));"object"==typeof a&&a instanceof Date&&(this.inputText.val(this.getFormatDate(a)),this.onTextChange())},_getValue:function(){return this.usedDate},setEnabled:function(){var a=this.options;this.inputText.removeAttr("readonly");this.text.removeClass("l-text-disabled");a.disabled=!1},setDisabled:function(){var a=this.options;this.inputText.attr("readonly","readonly");this.text.addClass("l-text-disabled");a.disabled=
!0}})})(jQuery);
(function(d){var a=d.ligerui;d(".l-dialog-btn").on({mouseover:function(){d(this).addClass("l-dialog-btn-over")},mouseout:function(){d(this).removeClass("l-dialog-btn-over")}});d(".l-dialog-tc .l-dialog-close").on({mouseover:function(){d(this).addClass("l-dialog-close-over")},mouseout:function(){d(this).removeClass("l-dialog-close-over")}});d.ligerDialog=function(){return a.run.call(null,"ligerDialog",arguments,{isStatic:!0})};d.ligerui.DialogImagePath="../../lib/ligerUI/skins/Aqua/images/win/";d.ligerDefaults.Dialog=
{cls:null,contentCls:null,id:null,buttons:null,isDrag:!0,width:280,height:null,content:"",target:null,url:null,urlParms:null,load:!1,type:"none",left:null,top:null,modal:!0,data:null,name:null,isResize:!1,allowClose:!0,opener:null,timeParmName:null,closeWhenEnter:null,isHidden:!0,show:!0,title:"提示",showMax:!1,showToggle:!1,showMin:!1,slide:d.browser.msie?!1:!0,fixedType:null,showType:null,layoutMode:1,onLoaded:null,onExtend:null,onExtended:null,onCollapse:null,onCollapseed:null,onContentHeightChange:null,
onClose:null,onClosed:null,onStopResize:null,minIsHide:!1};d.ligerDefaults.DialogString={titleMessage:"提示",ok:"确定",yes:"是",no:"否",cancel:"取消",waittingMessage:"正在等待中,请稍候..."};d.ligerMethos.Dialog=d.ligerMethos.Dialog||{};a.controls.Dialog=function(b){a.controls.Dialog.base.constructor.call(this,null,b)};a.controls.Dialog.ligerExtend(a.core.Win,{__getType:function(){return"Dialog"},__idPrev:function(){return"Dialog"},_extendMethods:function(){return d.ligerMethos.Dialog},_render:function(){function b(){var b,
a,f=e.width||c.dialog.width();1==e.slide&&(e.slide="fast");null!=e.left?b=e.left:e.left=b=.5*(d(window).width()-f);null!=e.top?a=e.top:e.top=a=.5*(d(window).height()-c.dialog.height())+d(window).scrollTop()-10;0>b&&(e.left=b=0);0>a&&(e.top=a=0);c.dialog.css({left:b,top:a})}var c=this,e=this.options,f="";c.set(e,!0);var g=d('\x3cdiv class\x3d"l-dialog"\x3e\x3ctable class\x3d"l-dialog-table" cellpadding\x3d"0" cellspacing\x3d"0" border\x3d"0"\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd class\x3d"l-dialog-tl"\x3e\x3c/td\x3e\x3ctd class\x3d"l-dialog-tc"\x3e\x3cdiv class\x3d"l-dialog-tc-inner"\x3e\x3cdiv class\x3d"l-dialog-icon"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-dialog-title"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-dialog-winbtns"\x3e\x3cdiv class\x3d"l-dialog-winbtn l-dialog-close"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd class\x3d"l-dialog-tr"\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd class\x3d"l-dialog-cl"\x3e\x3c/td\x3e\x3ctd class\x3d"l-dialog-cc"\x3e\x3cdiv class\x3d"l-dialog-body"\x3e\x3cdiv class\x3d"l-dialog-image"\x3e\x3c/div\x3e \x3cdiv class\x3d"l-dialog-content"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-dialog-buttons"\x3e\x3cdiv class\x3d"l-dialog-buttons-inner"\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd class\x3d"l-dialog-cr"\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd class\x3d"l-dialog-bl"\x3e\x3c/td\x3e\x3ctd class\x3d"l-dialog-bc"\x3e\x3c/td\x3e\x3ctd class\x3d"l-dialog-br"\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e');
d("body").append(g);c.dialog=g;2==e.layoutMode&&g.find("td.l-dialog-tl,td.l-dialog-cl,td.l-dialog-bl,td.l-dialog-tr,td.l-dialog-cr,td.l-dialog-br").remove();c.element=g[0];c.dialog.body=d(".l-dialog-body:first",c.dialog);c.dialog.header=d(".l-dialog-tc-inner:first",c.dialog);c.dialog.winbtns=d(".l-dialog-winbtns:first",c.dialog.header);c.dialog.buttons=d(".l-dialog-buttons:first",c.dialog);c.dialog.content=d(".l-dialog-content:first",c.dialog);c.set(e,!1);0==e.allowClose&&d(".l-dialog-close",c.dialog).remove();
if(e.target||e.url||"none"==e.type)e.type=null,c.dialog.addClass("l-dialog-win");e.cls&&c.dialog.addClass(e.cls);e.id&&c.dialog.attr("id",e.id);c.mask();e.isDrag&&c._applyDrag();e.isResize&&c._applyResize();e.type?c._setImage():(d(".l-dialog-image",c.dialog).remove(),c.dialog.content.addClass("l-dialog-content-noimage"));e.contentCls&&c.dialog.content.addClass(e.contentCls);e.show||(c.unmask(),c.dialog.hide());if(e.target)c.dialog.content.prepend(e.target),d(e.target).show();else if(e.url){var h=
d.isFunction(e.url)?e.url.call(c):e.url,g=d.isFunction(e.urlParms)?e.urlParms.call(c):e.urlParms;e.timeParmName&&(g=g||{},g[e.timeParmName]=(new Date).getTime());if(g)for(var k in g)h+=-1==h.indexOf("?")?"?":"\x26",h+=k+"\x3d"+g[k];e.load?c.dialog.body.load(h,function(){c._saveStatus();c.trigger("loaded")}):(c.jiframe=d("\x3ciframe frameborder\x3d'0'\x3e\x3c/iframe\x3e"),f=e.name?e.name:"ligerwindow"+(new Date).getTime(),c.jiframe.attr("name",f),c.jiframe.attr("id",f),c.dialog.content.prepend(c.jiframe),
c.dialog.content.addClass("l-dialog-content-nopadding l-dialog-content-frame"),setTimeout(function(){0==c.dialog.body.find(".l-dialog-loading:first").length&&c.dialog.body.append("\x3cdiv class\x3d'l-dialog-loading' style\x3d'display:block;'\x3e\x3c/div\x3e");var b=d(".l-dialog-loading:first",c.dialog.body);c.jiframe[0].dialog=c;c.jiframe.attr("src",h).bind("load.dialog",function(){b.hide();c.trigger("loaded")});c.frame=window.frames[c.jiframe.attr("name")]},0),f="jquery_ligerui_"+(new Date).getTime(),
c.tmpInput=d("\x3cinput\x3e\x3c/input\x3e"),c.tmpInput.attr("id",f),c.dialog.content.prepend(c.tmpInput))}e.opener&&(c.dialog.opener=e.opener);e.buttons?d(e.buttons).each(function(b,a){var e=d('\x3cdiv class\x3d"l-dialog-btn"\x3e\x3cdiv class\x3d"l-dialog-btn-l"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-dialog-btn-r"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-dialog-btn-inner"\x3e\x3c/div\x3e\x3c/div\x3e');d(".l-dialog-btn-inner",e).html(a.text);d(".l-dialog-buttons-inner",c.dialog.buttons).prepend(e);a.width&&
e.width(a.width);a.onclick&&e.click(function(){a.onclick(a,c,b)});a.cls&&e.addClass(a.cls)}):c.dialog.buttons.remove();d(".l-dialog-buttons-inner",c.dialog.buttons).append("\x3cdiv class\x3d'l-clear'\x3e\x3c/div\x3e");d(".l-dialog-title",c.dialog).bind("selectstart",function(){return!1});c.dialog.click(function(){a.win.setFront(c)});d(".l-dialog-tc .l-dialog-close",c.dialog).click(function(){e.isHidden?c.hide():c.close()});e.fixedType||("auto"==e.width?setTimeout(function(){b()},100):b());c.show();
d("body").bind("keydown.dialog",function(b){b=b.which;13==b?c.enter():27==b&&c.esc()});c._updateBtnsWidth();c._saveStatus();c._onReisze();""!=f&&(d("#"+f).focus(),d("#"+f).remove())},_borderX:12,_borderY:32,doMax:function(b){var c=this,e=this.options,f=d(window).width(),g=d(window).height(),h=0;a.win.taskbar&&(g-=a.win.taskbar.outerHeight(),a.win.top&&(h+=a.win.taskbar.outerHeight()));b?(c.dialog.body.animate({width:f-c._borderX},e.slide),c.dialog.animate({left:0,top:h},e.slide),c.dialog.content.animate({height:g-
c._borderY-c.dialog.buttons.outerHeight()},e.slide,function(){c._onReisze()})):(c.set({width:f,height:g,left:0,top:h}),c._onReisze())},max:function(){var b=this,c=this.options;b.winmax&&(b.winmax.addClass("l-dialog-recover"),b.doMax(c.slide),b.wintoggle&&(b.wintoggle.hasClass("l-dialog-extend")?b.wintoggle.addClass("l-dialog-toggle-disabled l-dialog-extend-disabled"):b.wintoggle.addClass("l-dialog-toggle-disabled l-dialog-collapse-disabled")),b.resizable&&b.resizable.set({disabled:!0}),b.draggable&&
b.draggable.set({disabled:!0}),b.maximum=!0,d(window).bind("resize.dialogmax",function(){b.doMax(!1)}))},recover:function(){var b=this,c=this.options;b.winmax&&(b.winmax.removeClass("l-dialog-recover"),c.slide?(b.dialog.body.animate({width:b._width-b._borderX},c.slide),b.dialog.animate({left:b._left,top:b._top},c.slide),b.dialog.content.animate({height:b._height-b._borderY-b.dialog.buttons.outerHeight()},c.slide,function(){b._onReisze()})):(b.set({width:b._width,height:b._height,left:b._left,top:b._top}),
b._onReisze()),b.wintoggle&&b.wintoggle.removeClass("l-dialog-toggle-disabled l-dialog-extend-disabled l-dialog-collapse-disabled"),d(window).unbind("resize.dialogmax"));this.resizable&&this.resizable.set({disabled:!1});b.draggable&&b.draggable.set({disabled:!1});b.maximum=!1},min:function(){var b=this,c=this.options;if(c.minIsHide)b.dialog.hide();else{var d=a.win.getTask(this);c.slide?(b.dialog.body.animate({width:1},c.slide),d.y=d.offset().top+d.height(),d.x=d.offset().left+d.width()/2,b.dialog.animate({left:d.x,
top:d.y},c.slide,function(){b.dialog.hide()})):b.dialog.hide()}b.unmask();b.minimize=!0;b.actived=!1},active:function(){var b=this.options;if(this.minimize){var c=this._width,e=this._height,f=this._left,g=this._top;this.maximum&&(c=d(window).width(),e=d(window).height(),f=g=0,a.win.taskbar&&(e-=a.win.taskbar.outerHeight(),a.win.top&&(g+=a.win.taskbar.outerHeight())));b.slide?(this.dialog.body.animate({width:c-this._borderX},b.slide),this.dialog.animate({left:f,top:g},b.slide)):this.set({width:c,height:e,
left:f,top:g})}this.actived=!0;this.minimize=!1;a.win.setFront(this);this.show()},toggle:function(){this.wintoggle&&(this.wintoggle.hasClass("l-dialog-extend")?this.extend():this.collapse())},collapse:function(b){var c=this.options;this.wintoggle&&(c.slide&&0!=b?this.dialog.content.animate({height:1},c.slide):this.dialog.content.height(1),this.resizable&&this.resizable.set({disabled:!0}),this.wintoggle.addClass("l-dialog-extend"))},extend:function(){var b=this.options;if(this.wintoggle){var c=this._height-
this._borderY-this.dialog.buttons.outerHeight();b.slide?this.dialog.content.animate({height:c},b.slide):this.dialog.content.height(c);this.resizable&&this.resizable.set({disabled:!1});this.wintoggle.removeClass("l-dialog-extend")}},_updateBtnsWidth:function(){var b=d("\x3ediv",this.dialog.winbtns).length;this.dialog.winbtns.width(22*b)},_setLeft:function(b){this.dialog&&null!=b&&this.dialog.css({left:b})},_setTop:function(b){this.dialog&&null!=b&&this.dialog.css({top:b})},_setWidth:function(b){this.dialog&&
b>=this._borderX&&this.dialog.body.width(b-this._borderX)},_setHeight:function(b){var c=this.options;this.dialog&&("auto"==b?this.dialog.content.height("auto"):b>=this._borderY&&(b=b-this._borderY-this.dialog.buttons.outerHeight(),0!=this.trigger("ContentHeightChange",[b])&&(c.load?this.dialog.body.height(b):this.dialog.content.height(b),this.trigger("ContentHeightChanged",[b]))))},_setShowMax:function(b){var c=this;b?c.winmax||(c.winmax=d('\x3cdiv class\x3d"l-dialog-winbtn l-dialog-max"\x3e\x3c/div\x3e').appendTo(c.dialog.winbtns).hover(function(){d(this).hasClass("l-dialog-recover")?
d(this).addClass("l-dialog-recover-over"):d(this).addClass("l-dialog-max-over")},function(){d(this).removeClass("l-dialog-max-over l-dialog-recover-over")}).click(function(){d(this).hasClass("l-dialog-recover")?c.recover():c.max()})):c.winmax&&(c.winmax.remove(),c.winmax=null);c._updateBtnsWidth()},_setShowMin:function(b){var c=this,e=this.options;b?c.winmin||(c.winmin=d('\x3cdiv class\x3d"l-dialog-winbtn l-dialog-min"\x3e\x3c/div\x3e').appendTo(c.dialog.winbtns).hover(function(){d(this).addClass("l-dialog-min-over")},
function(){d(this).removeClass("l-dialog-min-over")}).click(function(){c.min()}),e.minIsHide||a.win.addTask(c)):c.winmin&&(c.winmin.remove(),c.winmin=null);c._updateBtnsWidth()},_setShowToggle:function(b){var c=this;b?c.wintoggle||(c.wintoggle=d('\x3cdiv class\x3d"l-dialog-winbtn l-dialog-collapse"\x3e\x3c/div\x3e').appendTo(c.dialog.winbtns).hover(function(){d(this).hasClass("l-dialog-toggle-disabled")||(d(this).hasClass("l-dialog-extend")?d(this).addClass("l-dialog-extend-over"):d(this).addClass("l-dialog-collapse-over"))},
function(){d(this).removeClass("l-dialog-extend-over l-dialog-collapse-over")}).click(function(){d(this).hasClass("l-dialog-toggle-disabled")||(c.wintoggle.hasClass("l-dialog-extend")?0!=c.trigger("extend")&&(c.wintoggle.removeClass("l-dialog-extend"),c.extend(),c.trigger("extended")):0!=c.trigger("collapse")&&(c.wintoggle.addClass("l-dialog-extend"),c.collapse(),c.trigger("collapseed")))})):c.wintoggle&&(c.wintoggle.remove(),c.wintoggle=null)},enter:function(){var b=this.options,c;if(void 0!=b.closeWhenEnter)c=
b.closeWhenEnter;else if("warn"==b.type||"error"==b.type||"success"==b.type||"question"==b.type)c=!0;c&&this.close()},esc:function(){},_removeDialog:function(){function b(){var b=d("iframe",c.dialog);if(b.length){var a=b[0];a.src="about:blank";if(a.contentWindow&&a.contentWindow.document)try{a.contentWindow.document.write("")}catch(h){console.error(h)}d.browser.msie&&CollectGarbage();b.remove()}c.dialog.remove()}var c=this,a=this.options;a.showType&&a.fixedType?c.dialog.animate({bottom:-1*a.height},
function(){b()}):b()},close:function(){0!=this.trigger("Close")&&(this.doClose(),this.trigger("Closed"))},doClose:function(){a.win.removeTask(this);d.ligerui.remove(this);this.unmask();this._removeDialog();d("body").unbind("keydown.dialog")},_getVisible:function(){return this.dialog.is(":visible")},_setUrl:function(b){var c=this,a=this.options;a.url=b;a.load?c.dialog.body.html("").load(a.url,function(){c.trigger("loaded")}):c.jiframe&&c.jiframe.attr("src",a.url)},_setContent:function(b){this.dialog.content.html(b)},
_setTitle:function(b){b&&d(".l-dialog-title",this.dialog).html(b)},_hideDialog:function(){var b=this,c=this.options;c.showType&&c.fixedType?b.dialog.animate({bottom:-1*c.height},function(){b.dialog.hide()}):b.dialog.hide()},hidden:function(){a.win.removeTask(this);this.dialog.hide();this.unmask()},show:function(){var b=this.options;this.mask();b.fixedType?b.showType?(this.dialog.css({bottom:-1*b.height}).addClass("l-dialog-fixed"),this.dialog.show().animate({bottom:0})):this.dialog.show().css({bottom:0}).addClass("l-dialog-fixed"):
this.dialog.show();d.ligerui.win.setFront.ligerDefer(d.ligerui.win,100,[this])},setUrl:function(b){this._setUrl(b)},_saveStatus:function(){this._width=this.dialog.body.width();this._height=this.dialog.body.height();var b=0,c=0;isNaN(parseInt(this.dialog.css("top")))||(b=parseInt(this.dialog.css("top")));isNaN(parseInt(this.dialog.css("left")))||(c=parseInt(this.dialog.css("left")));this._top=b;this._left=c},_applyDrag:function(){var b=this,c=this.options;d.fn.ligerDrag&&(b.draggable=b.dialog.ligerDrag({handler:".l-dialog-title",
animate:!1,onStartDrag:function(){a.win.setFront(b);var c=d("\x3cdiv class\x3d'l-dragging-mask' style\x3d'display:block'\x3e\x3c/div\x3e").height(b.dialog.height());b.dialog.append(c);b.dialog.content.addClass("l-dialog-content-dragging")},onDrag:function(c,b){if(0>(b.pageY||b.screenY))return!1},onStopDrag:function(){b.dialog.find("div.l-dragging-mask:first").remove();b.dialog.content.removeClass("l-dialog-content-dragging");if(c.target){var e=a.find(d.ligerui.controls.DateEditor),f=a.find(d.ligerui.controls.ComboBox);
d(d.merge(e,f)).each(function(){this.updateSelectBoxPosition&&this.updateSelectBoxPosition()})}b._saveStatus()}}))},_onReisze:function(){var b=this.options;if(b.target||b.url){var c=d(b.target).liger();c||(c=d(b.target).find(":first").liger());if(c){var b=this.dialog.content.height(),a=this.dialog.content.width();c.trigger("resize",[{width:a,height:b}])}}},_applyResize:function(){var b=this;d.fn.ligerResizable&&(b.resizable=b.dialog.ligerResizable({onStopResize:function(c,a){var d=a=0;isNaN(parseInt(b.dialog.css("top")))||
(a=parseInt(b.dialog.css("top")));isNaN(parseInt(b.dialog.css("left")))||(d=parseInt(b.dialog.css("left")));c.diffLeft&&b.set({left:d+c.diffLeft});c.diffTop&&b.set({top:a+c.diffTop});c.newWidth&&(b.set({width:c.newWidth}),b.dialog.body.css({width:c.newWidth-b._borderX}));c.newHeight&&b.set({height:c.newHeight});b._onReisze();b._saveStatus();b.trigger("stopResize");return!1},animate:!1}))},_setImage:function(){var b=this.options;if(b.type){var c={paddingLeft:74,paddingRight:15,paddingBottom:30};"success"==
b.type||"donne"==b.type||"ok"==b.type?(d(".l-dialog-image",this.dialog).addClass("l-dialog-image-donne").show(),this.dialog.content.css(c)):"error"==b.type?(d(".l-dialog-image",this.dialog).addClass("l-dialog-image-error").show(),this.dialog.content.css(c)):"warn"==b.type?(d(".l-dialog-image",this.dialog).addClass("l-dialog-image-warn").show(),this.dialog.content.css(c)):"question"==b.type&&(d(".l-dialog-image",this.dialog).addClass("l-dialog-image-question").show(),this.dialog.content.css(c))}}});
a.controls.Dialog.prototype.hide=a.controls.Dialog.prototype.hidden;d.ligerDialog.open=function(b){return d.ligerDialog(b)};d.ligerDialog.close=function(){var b=a.find(a.controls.Dialog.prototype.__getType()),c;for(c in b){var d=b[c];d.destroy.ligerDefer(d,5)}a.win.unmask()};d.ligerDialog.show=function(b){var c=a.find(a.controls.Dialog.prototype.__getType());if(c.length)for(var e in c){c[e].show();return}return d.ligerDialog(b)};d.ligerDialog.hide=function(){var b=a.find(a.controls.Dialog.prototype.__getType()),
c;for(c in b)b[c].hide()};d.ligerDialog.tip=function(b){b=d.extend({showType:"slide",width:240,modal:!1,height:100},b||{});d.extend(b,{fixedType:"se",type:"none",isDrag:!1,isResize:!1,showMax:!1,showToggle:!1,showMin:!1});return d.ligerDialog.open(b)};d.ligerDialog.alert=function(b,c,a,f,g){"function"==typeof c?(f=c,a=null):"function"==typeof a&&(f=a);p={content:b||"",buttons:[{text:d.ligerDefaults.DialogString.ok,onclick:function(c,b,a){b.close();f&&f(c,b,a)}}]};"string"==typeof c&&""!=c&&(p.title=
c);"string"==typeof a&&""!=a&&(p.type=a);d.extend(p,{showMax:!1,showToggle:!1,showMin:!1},g||{});return d.ligerDialog(p)};d.ligerDialog.confirm=function(b,c,a){"function"==typeof c&&(a=c,type=null);var e=function(c,b){b.close();a&&a("ok"==c.type)};p={type:"question",content:b,buttons:[{text:d.ligerDefaults.DialogString.yes,onclick:e,type:"ok",cls:"l-dialog-btn-ok"},{text:d.ligerDefaults.DialogString.no,onclick:e,type:"no",cls:"l-dialog-btn-no"}]};"string"==typeof c&&""!=c&&(p.title=c);d.extend(p,
{showMax:!1,showToggle:!1,showMin:!1});return d.ligerDialog(p)};d.ligerDialog.warning=function(b,c,a,f){"function"==typeof c&&(a=c,type=null);var e=function(c,b){b.close();a&&a(c.type)};p={type:"question",content:b,buttons:[{text:d.ligerDefaults.DialogString.yes,onclick:e,type:"yes"},{text:d.ligerDefaults.DialogString.no,onclick:e,type:"no"},{text:d.ligerDefaults.DialogString.cancel,onclick:e,type:"cancel"}]};"string"==typeof c&&""!=c&&(p.title=c);d.extend(p,{showMax:!1,showToggle:!1,showMin:!1},
f||{});return d.ligerDialog(p)};d.ligerDialog.waitting=function(b){b=b||d.ligerDefaults.Dialog.waittingMessage;return d.ligerDialog.open({cls:"l-dialog-waittingdialog",type:"none",content:'\x3cdiv style\x3d"padding:4px"\x3e'+b+"\x3c/div\x3e",allowClose:!1})};d.ligerDialog.closeWaitting=function(){var b=a.find(a.controls.Dialog),c;for(c in b){var d=b[c];d.dialog.hasClass("l-dialog-waittingdialog")&&d.close()}};d.ligerDialog.success=function(b,c,a,f){return d.ligerDialog.alert(b,c,"success",a,f)};d.ligerDialog.error=
function(b,c,a,f){return d.ligerDialog.alert(b,c,"error",a,f)};d.ligerDialog.warn=function(b,c,a,f){return d.ligerDialog.alert(b,c,"warn",a,f)};d.ligerDialog.question=function(b,c,a){return d.ligerDialog.alert(b,c,"question",null,a)};d.ligerDialog.prompt=function(b,c,a,f){var e=d('\x3cinput type\x3d"text" class\x3d"l-dialog-inputtext"/\x3e');"function"==typeof a&&(f=a);"function"==typeof c?f=c:"boolean"==typeof c&&(a=c);"boolean"==typeof a&&a&&(e=d('\x3ctextarea class\x3d"l-dialog-textarea"\x3e\x3c/textarea\x3e'));
"string"!=typeof c&&"int"!=typeof c||e.val(c);c=function(c,b,a){b.close();f&&f("yes"==c.type,e.val())};p={title:b,target:e,width:320,buttons:[{text:d.ligerDefaults.DialogString.ok,onclick:c,type:"yes"},{text:d.ligerDefaults.DialogString.cancel,onclick:c,type:"cancel"}]};return d.ligerDialog(p)}})(jQuery);
(function(d){var a=d.ligerui;d.fn.ligerDrag=function(b){return a.run.call(this,"ligerDrag",arguments,{idAttrName:"ligeruidragid",hasElement:!1,propertyToElemnt:"target"})};d.fn.ligerGetDragManager=function(){return a.run.call(this,"ligerGetDragManager",arguments,{idAttrName:"ligeruidragid",hasElement:!1,propertyToElemnt:"target"})};d.ligerDefaults.Drag={onStartDrag:!1,onDrag:!1,onStopDrag:!1,handler:null,position:!1,posFromCss:!1,bindElem:null,clickDelay:100,proxy:!0,revert:!1,animate:!0,onRevert:null,
onEndRevert:null,receive:null,onDragEnter:null,onDragOver:null,onDragLeave:null,onDrop:null,disabled:!1,proxyX:null,proxyY:null};a.controls.Drag=function(b){a.controls.Drag.base.constructor.call(this,null,b)};a.controls.Drag.ligerExtend(a.core.UIComponent,{__getType:function(){return"Drag"},__idPrev:function(){return"Drag"},_render:function(){function b(c){g.disabled||2==c.button||(f.mouseDowned=!0,setTimeout(function(){f.mouseDowned&&f._start.call(f,c)},g.clickDelay||100),c.preventDefault(),c.stopPropagation())}
function c(){g.disabled||f.handler.css("cursor",f.cursor)}function a(){}var f=this,g=this.options;this.set(g);f.cursor="move";f.handler.css("cursor",f.cursor);f.mouseDowned=!1;if(g.bindElem)f.handler.on("mousedown.drag",g.bindElem,b),f.handler.on("mousemove.drag",c),f.handler.on("mouseup.drag",a);else f.handler.on({"mousedown.drag":b,"mousemove.drag":c,"mouseup.drag":a});d(document).bind("mouseup",function(){f.mouseDowned=!1})},_rendered:function(){this.options.target.ligeruidragid=this.id},_start:function(b){var c=
this,e=this.options;if(!c.reverting&&!e.disabled){c.current={target:c.target,startX:b.pageX||b.screenX,startY:b.pageY||b.clientY};if(e.posFromCss){var f=c.target.css("left"),g=c.target.css("top");c.current.left="auto"===f?0:parseInt(f);c.current.top="auto"===g?0:parseInt(g)}else e.position?(c.current.left=c.target.position().left,c.current.top=c.target.position().top):(c.current.left=c.target.offset().left,c.current.top=c.target.offset().top);if(0==c.trigger("startDrag",[c.current,b]))return!1;c.cursor=
"move";c._createProxy(e.proxy,b);if(e.proxy&&!c.proxy)return!1;(c.proxy||c.handler).css("cursor",c.cursor);d(document).bind("mousemove.drag",function(){c._drag.apply(c,arguments)});a.draggable.dragging=!0;d(document).bind("mouseup.drag",function(){a.draggable.dragging=!1;c._stop.apply(c,arguments)})}},_drag:function(b){var c=this;if(c.current){var a=b.pageX||b.screenX,f=b.pageY||b.screenY;c.current.diffX=a-c.current.startX;c.current.diffY=f-c.current.startY;(c.proxy||c.handler).css("cursor",c.cursor);
c.receive&&c.receive.each(function(e,h){var g=d(h),m=g.offset();a>m.left&&a<m.left+g.width()&&f>m.top&&f<m.top+g.height()?c.receiveEntered[e]?c.trigger("dragOver",[h,c.proxy||c.target,b]):(c.receiveEntered[e]=!0,c.trigger("dragEnter",[h,c.proxy||c.target,b])):c.receiveEntered[e]&&(c.receiveEntered[e]=!1,c.trigger("dragLeave",[h,c.proxy||c.target,b]))});c.hasBind("drag")?0!=c.trigger("drag",[c.current,b])?c._applyDrag():c.proxy?c._removeProxy():c._stop():c._applyDrag()}},_stop:function(b){var c=this,
a=this.options;d(document).unbind("mousemove.drag");d(document).unbind("mouseup.drag");d(document).unbind("selectstart.drag");c.receive&&c.receive.each(function(a,d){c.receiveEntered[a]&&c.trigger("drop",[d,c.proxy||c.target,b])});c.proxy&&(a.revert?c.hasBind("revert")?0!=c.trigger("revert",[c.current,b])?c._revert(b):c._removeProxy():c._revert(b):(c._applyDrag(c.target),c._removeProxy()));c.cursor="move";c.trigger("stopDrag",[c.current,b]);c.current=null;c.handler.css("cursor",c.cursor)},_revert:function(b){var c=
this;c.reverting=!0;c.proxy.animate({left:c.current.left,top:c.current.top},function(){c.reverting=!1;c._removeProxy();c.trigger("endRevert",[c.current,b]);c.current=null})},_applyDrag:function(b){var c=this,a=this.options;b=b||c.proxy||c.target;var d={},g=b==c.target;c.current.diffX&&(d.left=g||null==a.proxyX?c.current.left+c.current.diffX:c.current.startX+a.proxyX+c.current.diffX);c.current.diffY&&(d.top=g||null==a.proxyY?c.current.top+c.current.diffY:c.current.startY+a.proxyY+c.current.diffY);
b==c.target&&c.proxy&&a.animate?(c.reverting=!0,b.animate(d,function(){c.reverting=!1})):b.css(d)},_setReceive:function(b){this.receiveEntered={};b&&(this.receive="string"==typeof b?d(b):b)},_setHandler:function(b){var c=this.options;this.handler=b?"string"==typeof b?d(b,c.target):b:d(c.target)},_setTarget:function(b){this.target=d(b)},_setCursor:function(b){this.cursor=b;(this.proxy||this.handler).css("cursor",b)},_createProxy:function(b,c){if(b){var a=this.options;"function"==typeof b?this.proxy=
b.call(this.options.target,this,c):"clone"==b?(this.proxy=this.target.clone().css("position","absolute"),this.proxy.appendTo("body")):(this.proxy=d("\x3cdiv class\x3d'l-draggable'\x3e\x3c/div\x3e"),this.proxy.width(this.target.width()).height(this.target.height()),this.proxy.attr("dragid",this.id).appendTo("body"));this.proxy.css({left:null==a.proxyX?this.current.left:this.current.startX+a.proxyX,top:null==a.proxyY?this.current.top:this.current.startY+a.proxyY}).show()}},_removeProxy:function(){this.proxy&&
(this.proxy.remove(),this.proxy=null)}})})(jQuery);
(function(d){d.fn.ligerEasyTab=function(){return d.ligerui.run.call(this,"ligerEasyTab",arguments)};d.fn.ligerGetEasyTabManager=function(){return d.ligerui.run.call(this,"ligerGetEasyTabManager",arguments)};d.ligerDefaults.EasyTab={};d.ligerMethos.EasyTab={};d.ligerui.controls.EasyTab=function(a,b){d.ligerui.controls.EasyTab.base.constructor.call(this,a,b)};d.ligerui.controls.EasyTab.ligerExtend(d.ligerui.core.UIComponent,{__getType:function(){return"EasyTab"},__idPrev:function(){return"EasyTab"},
_extendMethods:function(){return d.ligerMethos.EasyTab},_render:function(){var a=this,b=this.options;a.tabs=d(this.element);a.tabs.addClass("l-easytab");var c=0;0<d("\x3e div[lselected\x3dtrue]",a.tabs).length&&(c=d("\x3e div",a.tabs).index(d("\x3e div[lselected\x3dtrue]",a.tabs)));a.tabs.ul=d('\x3cul class\x3d"l-easytab-header"\x3e\x3c/ul\x3e');d("\x3e div",a.tabs).each(function(b,f){var e=d("\x3cli\x3e\x3cspan\x3e\x3c/span\x3e\x3c/li\x3e");b==c&&d("span",e).addClass("l-selected");d(f).attr("title")&&
(d("span",e).html(d(f).attr("title")),d(f).removeAttr("title"));a.tabs.ul.append(e);d(f).hasClass("l-easytab-panelbox")||d(f).addClass("l-easytab-panelbox")});a.tabs.ul.prependTo(a.tabs);d(".l-easytab-panelbox:eq("+c+")",a.tabs).show().siblings(".l-easytab-panelbox").hide();d("\x3e ul:first span",a.tabs).click(function(){if(!d(this).hasClass("l-selected")){var c=d("\x3e ul:first span",a.tabs).index(this);d(this).addClass("l-selected").parent().siblings().find("span.l-selected").removeClass("l-selected");
d(".l-easytab-panelbox:eq("+c+")",a.tabs).show().siblings(".l-easytab-panelbox").hide()}}).not("l-selected").hover(function(){d(this).addClass("l-over")},function(){d(this).removeClass("l-over")});a.set(b)}})})(jQuery);
(function(d){d.fn.ligerFilter=function(){return d.ligerui.run.call(this,"ligerFilter",arguments)};d.fn.ligerGetFilterManager=function(){return d.ligerui.run.call(this,"ligerGetFilterManager",arguments)};d.ligerDefaults.Filter={fields:[],operators:{},editors:{},buttonCls:null};d.ligerDefaults.FilterString={strings:{and:"并且",or:"或者",equal:"相等",notequal:"不相等",startwith:"以..开始",endwith:"以..结束",like:"相似",greater:"大于",greaterorequal:"大于或等于",less:"小于",lessorequal:"小于或等于","in":"包括在...",notin:"不包括...",addgroup:"增加分组",
addrule:"增加条件",deletegroup:"删除分组"}};d.ligerDefaults.Filter.operators.string=d.ligerDefaults.Filter.operators.text="equal notequal startwith endwith like greater greaterorequal less lessorequal in notin".split(" ");d.ligerDefaults.Filter.operators.number=d.ligerDefaults.Filter.operators["int"]=d.ligerDefaults.Filter.operators["float"]=d.ligerDefaults.Filter.operators.date="equal notequal greater greaterorequal less lessorequal in notin".split(" ");d.ligerDefaults.Filter.editors.string={create:function(a,
b){var c=d("\x3cinput type\x3d'text'/\x3e");a.append(c);c.ligerTextBox(b.editor.options||{});return c},setValue:function(a,b){a.val(b)},getValue:function(a){return a.liger("option","value")},destroy:function(a){a.liger("destroy")}};d.ligerDefaults.Filter.editors.date={create:function(a,b){var c=d("\x3cinput type\x3d'text'/\x3e");a.append(c);c.ligerDateEditor(b.editor.options||{});return c},setValue:function(a,b){a.liger("option","value",b)},getValue:function(a,b){return a.liger("option","value")},
destroy:function(a){a.liger("destroy")}};d.ligerDefaults.Filter.editors.number={create:function(a,b){var c=d("\x3cinput type\x3d'text'/\x3e");a.append(c);c.ligerSpinner(d.extend({minValue:b.editor.minValue,maxValue:b.editor.maxValue},b.editor.options||{}));return c},setValue:function(a,b){a.val(b)},getValue:function(a,b){return"int"==b.editor.type?parseInt(a.val(),10):parseFloat(a.val())},destroy:function(a){a.liger("destroy")}};d.ligerDefaults.Filter.editors.combobox={create:function(a,b){var c=
d("\x3cinput type\x3d'text'/\x3e");a.append(c);a={data:b.data,slide:!1,valueField:b.editor.valueField||b.editor.valueColumnName,textField:b.editor.textField||b.editor.displayColumnName};d.extend(a,b.editor.options||{});c.ligerComboBox(a);return c},setValue:function(a,b){a.liger("option","value",b)},getValue:function(a){return a.liger("option","value")},destroy:function(a){a.liger("destroy")}};d.ligerui.controls.Filter=function(a,b){d.ligerui.controls.Filter.base.constructor.call(this,a,b)};d.ligerui.controls.Filter.ligerExtend(d.ligerui.core.UIComponent,
{__getType:function(){return"Filter"},__idPrev:function(){return"Filter"},_init:function(){var a=this.options;d.ligerui.controls.Filter.base._init.call(this);for(var b in liger.editors){var c=liger.editors[b];!c||b in a.editors||(a.editors[b]=liger.getEditor(d.extend({type:b,master:this},c)))}},_render:function(){var a=this;a.set(this.options);d(a.element).bind("click",function(b){b.preventDefault();b=d(b.target||b.srcElement);var c=b.get(0).className;0<=c.indexOf("addgroup")?(b=b.parent().parent().parent().parent(),
a.addGroup(b)):0<=c.indexOf("deletegroup")?(b=b.parent().parent().parent().parent(),a.deleteGroup(b)):0<=c.indexOf("addrule")?(b=b.parent().parent().parent().parent(),a.addRule(b)):0<=c.indexOf("deleterole")&&(b=b.parent().parent(),a.deleteRule(b))})},_setFields:function(a){a=this.options;this.group&&this.group.remove();this.group=d(this._bulidGroupTableHtml()).appendTo(this.element);a.buttonCls&&this.group.find(".addgroup,.addrule,.deletegroup").addClass(a.buttonCls)},editors:{},editorCounter:0,
addGroup:function(a){var b=this.options;a=d(a||this.group);var c=d("\x3etbody:first \x3e tr:last",a),e=[];e.push('\x3ctr class\x3d"l-filter-rowgroup"\x3e\x3ctd class\x3d"l-filter-cellgroup" colSpan\x3d"4"\x3e');a=!a.hasClass("l-filter-group-alt");e.push(this._bulidGroupTableHtml(a,!0));e.push("\x3c/td\x3e\x3c/tr\x3e");e=d(e.join(""));b.buttonCls&&e.find(".addgroup,.addrule,.deletegroup").addClass(b.buttonCls);c.before(e);c=e.find("table:first");b.addDefult&&this.addRule(c);return c},deleteGroup:function(a){var b=
this;d("td.l-filter-value",a).each(function(){var c=d(this).parent();d("select.fieldsel",c).unbind();b.removeEditor(c)});d(a).parent().parent().remove()},removeEditor:function(a){var b=this.options,c=d(a).attr("editortype"),e=d(a).attr("editorid");(e=this.editors[e])&&b.editors[c].destroy&&b.editors[c].destroy(e);d("td.l-filter-value:first",a).html("")},setData:function(a,b){var c=this,e=this.options;b=b||c.group;var f=d("\x3etbody:first \x3e tr:last",b);b&&b.find("\x3etbody:first \x3e tr").not(f).remove();
d("select:first",f).val(a.op);a.rules&&d(a.rules).each(function(){var a=c.addRule(b),f=this.field;a:{for(var k=0;k<e.fields.length;k++)if(e.fields[k].name==f){f=e.fields[k];break a}f=null}d("select.opsel",a).html(c._bulidOpSelectOptionsHtml(this.type||"string",f.operator));a.attr("fieldtype",this.type||"string");d("select.opsel",a).val(this.op);d("select.fieldsel",a).val(this.field).trigger("change");(k=a.attr("editorid"))&&c.editors[k]?(f=c.getField(this.field))&&f.editor&&e.editors[f.editor.type].setValue.call(c,
c.editors[k],this.value,{field:f,filter:c}):d(":text",a).val(this.value)});a.groups&&d(a.groups).each(function(){var a=c.addGroup(b);c.setData(this,a)})},addRule:function(a){var b=this,c=this.options;a=a||b.group;a=d("\x3etbody:first \x3e tr:last",a);var e=d(b._bulidRuleRowHtml());a.before(e);c.fields.length&&b.appendEditor(e,c.fields[0]);d("select.fieldsel",e).bind("change",function(){var c=d(this).parent().next().find("select:first"),a=d(this).val();if(a){var a=b.getField(a),h=a.type||"string",
k=e.attr("fieldtype");h!=k&&(c.html(b._bulidOpSelectOptionsHtml(h,a.operator)),e.attr("fieldtype",h));c=null;h=e.attr("editortype");b.enabledEditor(a)&&(c=a.editor.type);h&&b.removeEditor(e);c?b.appendEditor(e,a):(e.removeAttr("editortype").removeAttr("editorid"),d("td.l-filter-value:first",e).html('\x3cinput type\x3d"text" class\x3d"valtxt l-text" /\x3e'))}});return e},deleteRule:function(a){d("select.fieldsel",a).unbind();this.removeEditor(a);d(a).remove()},appendEditor:function(a,b){var c=this.options;
if(this.enabledEditor(b)){var e=d("td.l-filter-value:first",a).html(""),c=c.editors[b.editor.type],f=++this.editorCounter,g={filter:this};g.field=d.extend(!0,{},b);g.field.name=b.name+"_"+f;this.editors[f]=c.create.call(this,e,g);a.attr("editortype",b.editor.type).attr("editorid",f)}},getData:function(a){var b=this;a=a||b.group;var c={};d("\x3e tbody \x3e tr",a).each(function(a,f){a=d(f).hasClass("l-filter-rowlast");if(d(f).hasClass("l-filter-rowgroup"))f=d("\x3e td:first \x3e table:first",f),f.length&&
(c.groups||(c.groups=[]),c.groups.push(b.getData(f)));else if(a)c.op=d(".groupopsel:first",f).val();else{a=d("select.fieldsel:first",f).val();var e=b.getField(a),h=d(".opsel:first",f).val(),e=b._getRuleValue(f,e);f=d(f).attr("fieldtype")||"string";c.rules||(c.rules=[]);null!=e&&c.rules.push({field:a,op:h,value:e,type:f})}});return c},_getRuleValue:function(a,b){var c=this.options,e=d(a).attr("editorid"),f=d(a).attr("editortype"),e=this.editors[e];b={field:b,filter:this};return e?c.editors[f].getValue.call(this,
e,b):d(".valtxt:first",a).val()},enabledEditor:function(a){return a.editor&&a.editor.type?a.editor.type in this.options.editors:!1},getField:function(a){for(var b=this.options,c=0,d=b.fields.length;c<d;c++){var f=b.fields[c];if(f.name==a)return f}return null},_bulidGroupTableHtml:function(a,b){var c=this.options,d=[];d.push('\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" border\x3d"0" class\x3d"l-filter-group');a&&d.push(" l-filter-group-alt");d.push('"\x3e\x3ctbody\x3e');d.push('\x3ctr class\x3d"l-filter-rowlast"\x3e\x3ctd class\x3d"l-filter-rowlastcell" align\x3d"right" colSpan\x3d"4"\x3e');
d.push('\x3cselect class\x3d"groupopsel"\x3e');d.push('\x3coption value\x3d"and"\x3e'+c.strings.and+"\x3c/option\x3e");d.push('\x3coption value\x3d"or"\x3e'+c.strings.or+"\x3c/option\x3e");d.push("\x3c/select\x3e");d.push('\x3cinput type\x3d"button" value\x3d"'+c.strings.addgroup+'" class\x3d"addgroup"\x3e');d.push('\x3cinput type\x3d"button" value\x3d"'+c.strings.addrule+'" class\x3d"addrule"\x3e');b&&d.push('\x3cinput type\x3d"button" value\x3d"'+c.strings.deletegroup+'" class\x3d"deletegroup"\x3e');
d.push("\x3c/td\x3e\x3c/tr\x3e");d.push("\x3c/tbody\x3e\x3c/table\x3e");return d.join("")},_bulidRuleRowHtml:function(a){var b=this.options;a=a||b.fields;var b=[],c=a&&a.length&&a[0].type?a[0].type:"string";b.push('\x3ctr fieldtype\x3d"'+c+'"\x3e\x3ctd class\x3d"l-filter-column"\x3e');b.push('\x3cselect class\x3d"fieldsel"\x3e');for(var d=0,f=a.length;d<f;d++){var g=a[d];b.push('\x3coption value\x3d"'+g.name+'"');0==d&&b.push(" selected ");b.push("\x3e");b.push(g.display);b.push("\x3c/option\x3e")}b.push("\x3c/select\x3e");
b.push("\x3c/td\x3e");b.push('\x3ctd class\x3d"l-filter-op"\x3e');b.push('\x3cselect class\x3d"opsel"\x3e');b.push(this._bulidOpSelectOptionsHtml(c,a&&a.length?a[0].operator:null));b.push("\x3c/select\x3e");b.push("\x3c/td\x3e");b.push('\x3ctd class\x3d"l-filter-value"\x3e');b.push('\x3cinput type\x3d"text" class\x3d"valtxt" /\x3e');b.push("\x3c/td\x3e");b.push("\x3ctd\x3e");b.push('\x3cdiv class\x3d"l-icon-cross deleterole"\x3e\x3c/div\x3e');b.push("\x3c/td\x3e");b.push("\x3c/tr\x3e");return b.join("")},
_bulidOpSelectOptionsHtml:function(a,b){var c=this.options;a=c.operators[a];var d=[];b&&b.length&&(a=b.split(","));a&&a.length||(a=["equal","notequal"]);b=0;for(var f=a.length;b<f;b++){var g=a[b];d[d.length]='\x3coption value\x3d"'+g+'"\x3e';d[d.length]=c.strings[g];d[d.length]="\x3c/option\x3e"}return d.join("")}});d.ligerFilter=function(){};d.ligerFilter.filterTranslator={translateGroup:function(a){var b=[];if(null==a)return" 1\x3d\x3d1 ";var c=!1;b.push("(");if(null!=a.rules)for(var d in a.rules)if("indexOf"!=
d){var f=a.rules[d];c&&b.push(this.getOperatorQueryText(a.op));b.push(this.translateRule(f));c=!0}if(null!=a.groups)for(var g in a.groups)d=a.groups[g],c&&b.push(this.getOperatorQueryText(a.op)),b.push(this.translateGroup(d)),c=!0;b.push(")");return 0==c?" 1\x3d\x3d1 ":b.join("")},translateRule:function(a){var b=[];if(null==a)return" 1\x3d\x3d1 ";if("like"==a.op||"startwith"==a.op||"endwith"==a.op)return b.push("/"),"startwith"==a.op&&b.push("^"),b.push(a.value),"endwith"==a.op&&b.push("$"),b.push("/i.test("),
b.push('o["'),b.push(a.field),b.push('"]'),b.push(")"),b.join("");b.push('o["');b.push(a.field);b.push('"]');b.push(this.getOperatorQueryText(a.op));b.push('"');b.push(a.value);b.push('"');return b.join("")},getOperatorQueryText:function(a){switch(a){case "equal":return" \x3d\x3d ";case "notequal":return" !\x3d ";case "greater":return" \x3e ";case "greaterorequal":return" \x3e\x3d ";case "less":return" \x3c ";case "lessorequal":return" \x3c\x3d ";case "and":return" \x26\x26 ";case "or":return" || ";
default:return" \x3d\x3d "}}};d.ligerFilter.getFilterFunction=function(a){d.isArray(a)&&(a={op:"and",rules:a});a=" return  "+d.ligerFilter.filterTranslator.translateGroup(a);return new Function("o",a)}})(jQuery);
(function(d){function a(b){var c=[];d(b).each(function(b,a){b=d(a.element).parents("li:first").prev("li:first").html();c.push("\x3cdiv\x3e"+b+" "+a.message+"\x3c/div\x3e")});return c.join("")}d.fn.ligerForm=function(){return d.ligerui.run.call(this,"ligerForm",arguments)};d.ligerui.getConditions=function(b,c){if(!b)return null;if((b=liger.get(d(b)))&&b.toConditions)return b.toConditions()};d.ligerDefaults=d.ligerDefaults||{};d.ligerDefaults.Form={width:null,inputWidth:180,labelWidth:90,space:40,rightToken:"：",
labelAlign:"left",align:"left",autoTypePrev:"ui-",fields:[],appendID:!0,prefixID:null,toJSON:d.ligerui.toJSON,labelCss:null,fieldCss:null,spaceCss:null,onAfterSetFields:null,buttons:null,readonly:!1,editors:{},validate:null,unSetValidateAttr:!1,tab:null,clsTab:"ui-tabs-nav ui-helper-clearfix",clsTabItem:"ui-state-default",clsTabItemSelected:"ui-tabs-selected",clsTabContent:"ui-tabs-panel ui-widget-content"};d.ligerDefaults.FormString={invalidMessage:"存在{errorCount}个字段验证不通过，请检查!",detailMessage:"详细",
okMessage:"确定"};d.ligerDefaults.Form.editors.textarea={create:function(b,c,a){var e=d('\x3ctextarea class\x3d"l-textarea" /\x3e'),g=(a.prefixID||"")+c.field.name;d("#"+g).length&&(e=d("#"+g));g=d.extend({id:g,name:g},c.field.attr);e.attr(g);c.field.editor&&c.field.editor.height&&e.height(c.field.editor.height);c=c.field.options||{};(a.readonly||c.readonly)&&e.attr("readonly",!0);(a.disabled||c.disabled)&&e.attr("disabled",!0);b.append(e);return e},getValue:function(b,c){return b.val()},setValue:function(b,
c,a){b.val(c)},resize:function(b,c,a,d){b.css({width:c-2}).parent().css("width","auto")}};d.ligerDefaults.Form.editors.hidden={create:function(b,c,a){var e=d('\x3cinput type \x3d "hidden"  /\x3e');a=(a.prefixID||"")+c.field.name;d("#"+a).length&&(e=d("#"+a));e.attr(d.extend({id:a,name:a},c.field.attr));(c=c.field.editor||c.field.options)&&e.val(c.value);b.append(e);return e},getValue:function(a,c){return a.val()},setValue:function(a,c,d){a.val(c)}};d.ligerDefaults.Form_fields={name:null,textField:null,
type:null,editor:null,label:null,labelInAfter:!1,afterContent:null,beforeContent:null,hideSpace:!1,hideLabel:!1,rightToken:null,attrRender:null,style:null,containerCls:null,newline:!0,op:null,vt:null,attr:null,validate:null};d.ligerDefaults.Form_editor={};d.ligerDefaults.Form.editorBulider=function(a){var c=this.options;if(a&&a.length){var b={},f=a.attr("ltype"),g={};c.readonly&&(b.readonly=!0);b=d.extend({width:(g.width||c.inputWidth)-2},g.options,g.editor,b);g=null;"autocomplete"==f&&(b.autocomplete=
!0);if(a.is("select")&&"none"!=f)g=a.ligerComboBox(b);else if(a.is(":password")&&"none"!=f)g=a.ligerTextBox(b);else if(a.is(":radio")&&"none"!=f)g=a.ligerRadio(b);else if(a.is(":checkbox")&&"none"!=f)g=a.ligerCheckBox(b);else if(a.is("textarea")&&"none"!=f)a.addClass("l-textarea"),g={getValue:function(){return a.val()},setValue:function(c){a.val(c)}};else if(f&&"none"!=f)if(a.is(":text"))switch(f){case "select":case "combobox":case "autocomplete":g=a.ligerComboBox(b);break;case "spinner":g=a.ligerSpinner(b);
break;case "date":g=a.ligerDateEditor(b);break;case "popup":g=a.ligerPopupEdit(b);break;case "currency":g=b.currency=!0;case "float":case "number":b.number=!0;g=a.ligerTextBox(b);break;case "int":case "digits":b.digits=!0;default:g=a.ligerTextBox(b)}else{if(a.is(":hidden"))switch(f){case "select":case "combobox":case "autocomplete":g=a.ligerComboBox(b);break;case "checkboxlist":g=a.ligerCheckBoxList(b);break;case "radiolist":g=a.ligerRadioList(b);break;case "listbox":g=a.ligerListBox(b)}}else{if(f=
a.get(0).className)c=c.autoTypePrev||"ui-",-1!=f.indexOf(c)&&(f=f.replace(c,""));if(!f&&(a.is(":hidden")||a.is(":text"))&&a.attr("name"))g={getValue:function(){return a.val()},setValue:function(c){a.val(c)}};else switch(f){case "textbox":case "password":g=a.ligerTextBox(b);break;case "datepicker":g=a.ligerDateEditor(b);break;case "spinner":g=a.ligerSpinner(b);break;case "checkbox":g=a.ligerCheckBox(b);break;case "combobox":g=a.ligerComboBox(b);break;case "checkboxlist":g=a.ligerCheckBoxList(b);break;
case "radiolist":g=a.ligerRadioList(b);break;case "listbox":g=a.ligerListBox(b)}}return g?{name:a.attr("name"),control:g}:null}};d.ligerui.controls.Form=function(a,c){d.ligerui.controls.Form.base.constructor.call(this,a,c)};d.ligerui.controls.Form.ligerExtend(d.ligerui.core.UIComponent,{__getType:function(){return"Form"},__idPrev:function(){return"Form"},_init:function(){var a=this.options;d.ligerui.controls.Form.base._init.call(this);for(var c in liger.editors){var e=liger.editors[c];!e||c in a.editors||
(a.editors[c]=liger.getEditor(d.extend({type:c,master:this},e)))}},_render:function(){var a=this,c=this.options,e=d(this.element);a.form=e.is("form")?e:e.parents("form:first");d("input,select,textarea",e).each(function(){var b=c.editorBulider.call(a,d(this));b&&(a.autoEditors=a.autoEditors||[],a.autoEditors.push(b))});a.autoEditors&&a.autoEditors.length&&c.validate&&(a.validate=a.validate||{},d(a.autoEditors).each(function(){var c=this.control;this.name&&c.inputText&&c.inputText.attr("validate")&&
(eval("v \x3d "+c.inputText.attr("validate")),c.inputText.attr("validateMessage")&&eval("vm \x3d "+c.inputText.attr("validateMessage")))}));a.set(c);a.initValidate();if(c.buttons){var f=d('\x3cul class\x3d"l-form-buttons"\x3e\x3c/ul\x3e').appendTo(e);d(c.buttons).each(function(){var c=d("\x3cli\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/li\x3e").appendTo(f);d("div:first",c).ligerButton(this)})}d("#"+(a.element.id&&"string"===typeof a.element.id?a.element.id:a.id)+" .togglebtn").on("click",function(){d(this).hasClass("togglebtn-down")?
d(this).removeClass("togglebtn-down"):d(this).addClass("togglebtn-down");for(var c=d(this).parent().nextAll("ul,div"),a=0;a<c.length;a++){var b=d(c[a]);if(b.hasClass("l-group"))break;d(this).hasClass("togglebtn-down")?b.hide():b.show()}})},_setWidth:function(a){a&&this.form.width(a)},getEditor:function(a){function c(c,e){c=null==c?d.fields:c.fields;for(var f=0,g=c.length;f<g;f++){var h=null==e?f:"tab"+e+"_"+f;if(c[f].name==a&&b.editors[h])return b.editors[h].control}}var b=this,d=this.options;if(b.editors){var g=
c(null);if(g)return g;if(d.tab&&d.tab.items)for(var h=0;h<d.tab.items.length;h++)if(g=c(d.tab.items[h],h))return g;return null}},getField:function(a){var c=this.options;return c.fields?c.fields[a]:null},toConditions:function(){var a=this,c=[];d(this.options.fields).each(function(b,d){var e=d.name;(b=a.editors[b])&&e&&(b=b.editor.getValue.call(a,b.control,{field:d}),null!=b&&""!==b&&c.push({op:d.operator||"like",field:e,value:b,type:d.type||"string"}))});return c},_preSetFields:function(a){var c=this.options,
b=null,f=null;d(c.fields).each(function(a,d){(c.readonly||d.readonly||d.editor&&d.editor.readonly)&&delete d.validate;"hidden"!=d.type&&(d.type=d.type||"text",null==d.newline&&(d.newline=!0),b&&!d.group&&(d.group=b,d.groupicon=f),d.group&&(d.group=d.group.toString().replace(/^\s\s*/,"").replace(/\s\s*$/,""),b=d.group,f=d.groupicon))})},_setReadonly:function(a){if(a&&this.editors)for(var c in this.editors)(a=this.editors[c].control)&&a._setReadonly&&a._setReadonly(!0)},_setFields:function(a){var c=
this.options;d.isFunction(c.prefixID)&&(c.prefixID=c.prefixID(this));c=d(this.element).addClass("l-form");this._initFieldsValidate({fields:a});this._initFieldsHtml({panel:c,fields:a});this._createEditors({fields:a});this.trigger("afterSetFields")},_initFieldsValidate:function(a){var c=this,b=this.options;a=a.fields;c.validate=c.validate||{};a&&a.length&&d(a).each(function(a,d){a=d.readonly||d.editor&&d.editor.readonly?!0:!1;var e=(b.prefixID||"")+(d.options&&d.options.isTextBoxMode&&d.comboboxName||
d.textField||d.id||d.name);d.validate&&!a&&(c.validate.rules=c.validate.rules||{},c.validate.rules[e]=d.validate,d.validate.messages&&(d.validateMessage=d.validate.messages,delete d.validate.messages),d.validateMessage&&(c.validate.messages=c.validate.messages||{},c.validate.messages[e]=d.validateMessage))})},_initFieldsHtml:function(a){var c=this,b=this.options,f=a.panel,g=a.fields,h=a.idPrev||c.id,k=a.tabindex;d("\x3e.l-form-container",f).remove();var m=0,n=0;if(g&&g.length){c._preSetFields(g);
var q=['\x3cdiv class\x3d"l-form-container"\x3e'],r=!1,u=null,t=[];d(g).each(function(c,a){a.group||(a.group="");-1==d.inArray(a.group,t)&&t.push(a.group)});d(t).each(function(e,f){d(g).each(function(e,t){if(t.group==f){var v=d.inArray(t,g),w=t.newline,x=(b.prefixID||"")+(t.id||t.name);if(t.id||t.name)if("hidden"==t.type)d("#"+x).length||q.push('\x3cdiv style\x3d"display:none" id\x3d"'+(h+"|"+e)+'"\x3e\x3c/div\x3e');else{e=t.group&&t.group!=u;if(0==v||e)w=!0;w&&(m=0,r&&(q.push("\x3c/ul\x3e"),r=!1),
e&&(q.push('\x3cdiv class\x3d"l-group'),t.groupicon&&q.push(" l-group-hasicon"),q.push('"\x3e'),t.groupicon&&q.push('\x3cimg src\x3d"'+t.groupicon+'" /\x3e'),q.push("\x3cspan\x3e"+t.group+"\x3c/span\x3e\x3c/div\x3e"),u=t.group),q.push('\x3cul class\x3d"clearfix"\x3e'),r=!0);q.push('\x3cli class\x3d"l-fieldcontainer');w&&q.push(" l-fieldcontainer-first");t.containerCls&&q.push(" "+t.containerCls);q.push('"');t.style&&q.push(' style\x3d"'+t.style+'"');q.push(' fieldindex\x3d"'+v+'"');null!=k&&q.push(' tabindex\x3d"'+
k+'"');t.attrRender&&q.push(" "+t.attrRender());q.push("\x3e\x3cul\x3e");t.beforeContent&&(w=d.isFunction(t.beforeContent)?t.afterContent(t):t.beforeContent)&&q.push(w);t.hideLabel||t.labelInAfter||q.push(c._buliderLabelContainer(t,v));q.push(c._buliderControlContainer(t,v,a.idPrev));t.labelInAfter&&q.push(c._buliderLabelContainer(t,v));t.afterContent&&(w=d.isFunction(t.afterContent)?t.afterContent(t):t.afterContent)&&q.push(w);t.hideSpace||q.push(c._buliderSpaceContainer(t,v));q.push("\x3c/ul\x3e\x3c/li\x3e");
m+=t.width||b.inputWidth||0;m+=t.space||b.space||0;m+=t.labelWidth||b.labelWidth||0;m>n&&(n=m)}}})});r&&(q.push("\x3c/ul\x3e"),r=!1);q.push("\x3c/div\x3e");f.append(q.join(""));d(".l-group .togglebtn",f).remove();d(".l-group",f).width(f.width()).append("\x3cdiv class\x3d'togglebtn limit-select'\x3e\x3c/div\x3e")}},_createEditors:function(a){var c=this,b=this.options,f=a.fields,g=a.idPrev||c.id,h=a.editPrev||"";c.editors=c.editors||{};d(c.element);d(f).each(function(a,e){var f=document.getElementById(g+
"|"+a),k=b.editors[e.type];a=h+a;f&&(f=d(f),e=c._createEditor(k,f,{field:e},f.width(),f.height()))&&(c.editors[a]&&c.editors[a].control&&c.editors[a].control.destroy&&c.editors[a].control.destroy(),c.editors[a]={control:e,editor:k})})},getChanges:function(){var a=this.data,c=this.getData();this.data=a;var d={},f;for(f in a)c[f]!=a[f]&&(d[f]=c[f]);return d},setEnabled:function(a,c){function b(a,b){d(a).each(function(a,e){e=e.name;(a=g.editors[(null==b?"":"tab"+b+"_")+a])&&e&&a.editor&&a.editor.setEnabled&&
-1!=d.inArray(e,f)&&a.editor.setEnabled(a.control,c)})}var f=[];d.isArray(a)&&(f=a);"string"==typeof a&&f.push(a);var g=this;a=this.options;b(a.fields);if(a.tab&&a.tab.items)for(var h=0;h<a.tab.items.length;h++)b(a.tab.items[h].fields,h)},setVisible:function(a,c){function b(a,b){d(a).each(function(a,e){-1!=d.inArray(e.name,f)&&g._setFieldPanelVisible(b,a,c)})}var f=[];d.isArray(a)&&(f=a);"string"==typeof a&&f.push(a);var g=this;a=this.options;b(a.fields);if(a.tab&&a.tab.items)for(var h=0;h<a.tab.items.length;h++)b(a.tab.items[h].fields,
h)},_setFieldPanelVisible:function(a,c,e){var b=this.options;if(null==a)d("li.l-fieldcontainer[fieldindex\x3d"+c+"]",this.element)[e?"show":"hide"]();else d("div."+b.clsTabContent+"[data-index\x3d"+a+"] li.l-fieldcontainer[fieldindex\x3d"+c+"]",this.element)[e?"show":"hide"]()},getData:function(){function a(a,b){d(a).each(function(a,d){var e=d.name,f=d.textField;if(a=c.editors[(null==b?"":"tab"+b+"_")+a]){if(e){var g=a.editor.getValue.call(c,a.control,{field:d});c._setValueByName(c.data,e,g||"")}f&&
a.editor.getText&&(g=a.editor.getText.call(c,a.control,{field:d}),c._setValueByName(c.data,f,g||""))}})}var c=this,e=this.options;c.data=c.formData||{};c.autoEditors&&c.autoEditors.length&&d(c.autoEditors).each(function(){var a=this.name,b=this.control;a&&b&&b.getValue&&(c.data[a]=b.getValue()||"")});a(e.fields);if(e.tab&&e.tab.items)for(var f=0;f<e.tab.items.length;f++)a(e.tab.items[f].fields,f);return c.data},_setData:function(a){this.setData(a)},setData:function(a){function c(c,d){if(Array.isArray(c))try{c.forEach(function(c,
e){var f=c.name,g=c.textField;e=b.editors[(d?"tab"+d+"_":"")+e];if(!e)return!0;f&&f in a&&(f=b._getValueByName(a,f),e.editor.setValue.call(b,e.control,f,{field:c}));g&&g in a&&(g=b._getValueByName(a,g),e.editor.setText.call(b,e.control,g,{field:c}))})}catch(m){console.error(m)}}var b=this,d=this.options;if("object"!==typeof a){try{console.error("数据错误")}catch(h){}return!1}for(var g in a)a[g]=a[g]||"";b.autoEditors&&b.autoEditors.length&&b.autoEditors.forEach(function(c,b){b=c.name;c=c.control;b&&a[b]&&
c&&c.setValue&&c.setValue(a[b])});c(d.fields);if(d.tab&&d.tab.items)for(g=0;g<d.tab.items.length;g++)c(d.tab.items[g].fields,g);b.data=a},_setValueByName:function(a,c,d){if(!a||!c)return null;if(-1==c.indexOf("."))a[c]=d;else try{(new Function("data,value","data."+c+"\x3dvalue;"))(a,d)}catch(f){console.error(f)}},_getValueByName:function(a,c){if(!a||!c)return null;if(-1==c.indexOf("."))return a[c];try{return(new Function("data","return data."+c+";"))(a)}catch(e){return console.error(e),null}},valid:function(){return this.form&&
this.validator?this.form.valid():!0},showFieldError:function(a,c){a=d("[name\x3d"+a+"]",this.element);a.hasClass("l-textarea")?a.addClass("l-textarea-invalid"):a.hasClass("l-text-field")&&a.parent().addClass("l-text-invalid");d(a).removeAttr("title").ligerHideTip();d(a).attr("title",c).ligerTip({distanceX:5,distanceY:-3,auto:!0})},hideFieldError:function(a){a=d("[name\x3d"+a+"]",this.element);a.hasClass("l-textarea")?a.removeClass("l-textarea-invalid"):a.parent().removeClass("l-text-invalid");d(a).removeAttr("title").ligerHideTip()},
initValidate:function(){var a=this.options;this.form&&a.validate&&this.form.validate?(a=d.extend({errorPlacement:function(c,a){if(d(c).html()){if(!a.attr("id")){var b=(new Date).getTime();a.attr("id",b);c.attr("for",b)}a.hasClass("l-textarea")?a.addClass("l-textarea-invalid"):a.hasClass("l-text-field")?a.parent().addClass("l-text-invalid"):"hidden"==a.attr("type")&&a.siblings(".l-text-combobox").addClass("l-text-invalid");d(a).removeAttr("title").ligerHideTip();d(a).attr("title",d(c).html()).ligerTip({distanceX:5,
distanceY:-3,auto:!0})}},success:function(c){if(c=c.attr("for"))c=d("#"+c),c.hasClass("l-textarea")?c.removeClass("l-textarea-invalid"):"hidden"==c.attr("type")?c.siblings(".l-text-combobox").removeClass("l-text-invalid"):c.parent().removeClass("l-text-invalid"),d(c).removeAttr("title").ligerHideTip()}},1==a.validate?{}:a.validate,{rules:this.validate.rules,messages:this.validate.messages}),this.validator=this.form.validate(a)):this.validator=null},setFieldValidate:function(a,c,e){a=d("[name\x3d"+
a+"]");if(a.length&&a.rules){var b=a.rules("remove");b&&(a.hasClass("l-text-field")&&a.parent().removeClass("l-text-invalid"),a.removeAttr("title").ligerHideTip(),b.required&&a.parents("li:first").next("li:first").find(".l-star").remove());c&&(e=d.extend({},c,{messages:e}),a.rules("add",e),c.required&&a.parents("li:first").next("li:first").append('\x3cspan class\x3d"l-star"\x3e*\x3c/span\x3e'))}},showInvalid:function(){var b=this.options;if(this.validator){var c=b.invalidMessage.replace("{errorCount}",
this.validator.errorList.length);b.showInvalid?b.showInvalid(c):(c=d('\x3cdiv\x3e\x3cdiv class\x3d"invalid"\x3e'+c+'\x3ca class\x3d"viewInvalidDetail" href\x3d"javascript:void(0)"\x3e'+b.detailMessage+'\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"invalidDetail" style\x3d"display:none;"\x3e'+a(this.validator.errorList)+"\x3c/div\x3e\x3c/div\x3e"),c.find("a.viewInvalidDetail:first").bind("click",function(){d(this).parent().next("div.invalidDetail").toggle()}),d.ligerDialog.open({type:"error",width:350,showMax:!1,
showToggle:!1,showMin:!1,target:c,buttons:[{text:b.okMessage,onclick:function(c,a){a.close()}}]}))}},_createEditor:function(a,c,d,f,g){var b=this.options;try{var e=a.create.call(this,c,d,b);e&&a.resize&&a.resize.call(this,e,f,g,d);return e}catch(m){return console.error(m),null}},_buliderLabelContainer:function(a){var c=this.options,b=a.label||a.display,d=a.labelWidth||a.labelwidth||c.labelWidth,g=a.labelAlign||c.labelAlign;if(b){a=a.rightToken;if(null==a||""==a)a=c.rightToken;b+=a}a=[];a.push("\x3cli");
c.labelCss&&a.push(' class\x3d"'+c.labelCss+'"');a.push(' style\x3d"');/px$/i.test(d)||/auto/i.test(d)||/%$/i.test(d)?a.push("width:"+d+";"):d&&a.push("width:"+d+"px;");g&&"top"!=g&&a.push("text-align:"+g+";");a.push('"\x3e');b&&a.push(b);a.push("\x3c/li\x3e");return a.join("")},_buliderControlContainer:function(a,c,d){var b=this.options,e=a.width||b.inputWidth,h=a.align||a.textAlign||a.textalign||b.align,k=[];d=d||this.id;a=a.labelAlign||b.labelAlign;k.push("\x3cli");k.push(' id\x3d"'+(d+"|"+c)+
'"');b.fieldCss&&k.push(' class\x3d"'+b.fieldCss+'"');k.push(' style\x3d"');/px$/i.test(e)||/auto/i.test(e)||/%$/i.test(e)?k.push("width:"+e+";"):e&&k.push("width:"+e+"px;");h&&k.push("text-align:"+h+";");"top"==a&&k.push("clear:both;");k.push('"\x3e');k.push("\x3c/li\x3e");return k.join("")},_buliderSpaceContainer:function(a){var c=this.options,b=a.space||a.spaceWidth||c.space;if(0===a.space||0===a.spaceWidth)b=0;var d=[];d.push("\x3cli");c.spaceCss&&d.push(' class\x3d"'+c.spaceCss+'"');d.push(' style\x3d"');
(/px$/i.test(b)||/auto/i.test(b)||/%$/i.test(b))&&d.push("width:"+b+";");b&&d.push("width:"+b+"px;");d.push('"\x3e');c.validate&&a.validate&&a.validate.required&&d.push("\x3cspan class\x3d'l-star'\x3e*\x3c/span\x3e");d.push("\x3c/li\x3e");return d.join("")},_getInputAttrHtml:function(a){var c=[],b=(a.type||"text").toLowerCase();"textarea"==b&&(a.cols&&c.push('cols\x3d"'+a.cols+'" '),a.rows&&c.push('rows\x3d"'+a.rows+'" '));c.push('ltype\x3d"'+b+'" ');a.op&&c.push('op\x3d"'+a.op+'" ');a.vt&&c.push('vt\x3d"'+
a.vt+'" ');if(a.attr)for(var d in a.attr)c.push(d+'\x3d"'+a.attr[d]+'" ');return c.join("")},_setTab:function(a){var c=this,b=this.options;if(a&&a.items){for(var f=d('\x3cdiv class\x3d"l-form-tabs"\x3e\x3c/div\x3e').appendTo(c.element),g=d('\x3cul class\x3d"'+b.clsTab+'" original-title\x3d""\x3e').appendTo(f),h=0;h<a.items.length;h++){var k=a.items[h],m=d('\x3cli class\x3d"'+b.clsTabItem+'"\x3e\x3ca href\x3d"javascript:void(0)"\x3e\x3c/a\x3e\x3c/li\x3e').appendTo(g),n=d('\x3cdiv class\x3d"'+b.clsTabContent+
'"\x3e').appendTo(f),q=c.id+"|tdb"+h;m.add(n).attr("data-index",h);k.id&&m.attr("data-id",k.id);m.find("a:first").text(k.title);c._initFieldsValidate({fields:k.fields});c._initFieldsHtml({panel:n,fields:k.fields,tabindex:h,idPrev:q});c._createEditors({fields:k.fields,idPrev:q,editPrev:"tab"+h+"_"})}g.find("li").click(function(){d(this).addClass(b.clsTabItemSelected)},function(){d(this).removeClass(b.clsTabItemSelected)}).click(function(){var a=d(this).attr("data-index");c.selectTab(a)});c.selectTab(0)}},
selectTab:function(a){var c=this.options,b=d(this.element).find(".l-form-tabs:first"),f=b.find(".ui-tabs-nav li"),b=b.find(".ui-tabs-panel");f.filter("[data-index\x3d"+a+"]").addClass(c.clsTabItemSelected);f.filter("[data-index!\x3d"+a+"]").removeClass(c.clsTabItemSelected);b.filter("[data-index\x3d"+a+"]").show();b.filter("[data-index!\x3d"+a+"]").hide()},destroy:function(){try{liger.remove(this);for(var a in this.editors){var c=this.editors[a].control;c&&c.destroy&&c.destroy()}d(this.element).remove()}catch(e){console.error(e)}}})})(jQuery);
(function(d){function a(c,a){for(var b=c.length-1;0<=b;b--)a(c[b])&&c.splice(b,1)}var b=d.ligerui;d.fn.ligerGrid=function(c){return d.ligerui.run.call(this,"ligerGrid",arguments)};d.fn.ligerGetGridManager=function(){return d.ligerui.run.call(this,"ligerGetGridManager",arguments)};d.ligerDefaults.Grid={title:null,width:"auto",height:"auto",columnWidth:null,autoStretch:!1,dataChangedConfirm:null,resizable:!0,url:!1,urlParms:null,data:null,usePager:!0,hideLoadButton:!1,pagerRender:null,page:1,pageSize:50,
pageSizeOptions:[20,50,100,200,500,1E3,2E3],parms:[],columns:[],minColToggle:1,dataType:"server",dataAction:"server",showTableToggleBtn:!1,switchPageSizeApplyComboBox:!1,allowAdjustColWidth:!0,checkbox:!1,isSingleCheck:!1,allowHideColumn:!0,enabledEdit:!1,isScroll:!0,dateFormat:"yyyy-MM-dd",inWindow:!0,inWindowComplete:!1,statusName:"__status",method:"post",async:!0,fixedCellHeight:!0,heightDiff:0,cssClass:null,root:"Rows",record:"Total",pageParmName:"page",pagesizeParmName:"pagesize",sortnameParmName:"sortname",
sortorderParmName:"sortorder",allowUnSelectRow:!1,alternatingRow:!0,mouseoverRowCssClass:"l-grid-row-over",enabledSort:!0,rowClsRender:null,rowAttrRender:null,groupColumnName:null,groupColumnDisplay:"分组",groupRender:null,totalRender:null,delayLoad:!1,where:null,selectRowButtonOnly:!1,selectable:!0,whenRClickToSelect:!1,contentType:null,checkboxColWidth:27,detailColWidth:29,clickToEdit:!0,detailToEdit:!1,onEndEdit:null,minColumnWidth:80,tree:null,isChecked:null,isSelected:null,frozen:!0,frozenDetail:!1,
frozenCheckbox:!0,detail:null,detailHeight:260,isShowDetailToggle:null,rownumbers:!1,frozenRownumbers:!0,rownumbersColWidth:26,colDraggable:!1,rowDraggable:!1,rowDraggingRender:null,autoCheckChildren:!0,onBeforeMoveRow:null,onRowDragDrop:null,rowHeight:28,headerRowHeight:28,toolbar:null,toolbarShowInLeft:!0,headerImg:null,editorTopDiff:3,editorLeftDiff:1,editorHeightDiff:-1,unSetValidateAttr:!0,autoFilter:!1,rowSelectable:!0,scrollToPage:!1,scrollToAppend:!0,localStorageName:null,noHideWidth:!0,onDragCol:null,
onToggleCol:null,onChangeSort:null,onSuccess:null,onDblClickRow:null,onSelectRow:null,onBeforeSelectRow:null,onUnSelectRow:null,onBeforeCheckRow:null,onCheckRow:null,onBeforeCheckAllRow:null,onCheckAllRow:null,onBeforeShowData:null,onAfterShowData:null,onShowDataed:null,onError:null,onSubmit:null,onReload:null,onToFirst:null,onToPrev:null,onToNext:null,onToLast:null,onAfterAddRow:null,onBeforeEdit:null,onBeforeSubmitEdit:null,onAfterEdit:null,onLoading:null,onLoaded:null,onContextmenu:null,onBeforeCancelEdit:null,
onAfterSubmitEdit:null,onRowDragDroped:null,onGroupExtend:null,onGroupCollapse:null,onTreeExpand:null,onTreeCollapse:null,onTreeExpanded:null,onTreeCollapsed:null,onLoadData:null,onHeaderCellBulid:null,onColChangeText:null};d.ligerDefaults.GridString={errorMessage:"发生错误",pageStatMessage:"显示从{from}到{to}，总 {total} 条 。每页显示：{pagesize}",pageTextMessage:"Page",loadingMessage:"加载中...",findTextMessage:"查找",noRecordMessage:"没有符合条件的记录存在",isContinueByDataChanged:"数据已经改变,如果继续将丢失数据,是否继续?",cancelMessage:"取消",saveMessage:"保存",
applyMessage:"应用",draggingMessage:"{count}行"};d.ligerDefaults.Grid_columns={id:null,name:null,totalSummary:null,display:null,headerRender:null,isAllowHide:!0,isSort:!1,type:null,columns:null,width:120,minWidth:80,format:null,align:"left",hide:!1,editor:null,render:null,textField:null};d.ligerDefaults.Grid_editor={type:null,ext:null,onChange:null,onChanged:null};d.ligerMethos.Grid=d.ligerMethos.Grid||{};d.ligerDefaults.Grid.sorters=d.ligerDefaults.Grid.sorters||{};d.ligerDefaults.Grid.formatters=d.ligerDefaults.Grid.formatters||
{};d.ligerDefaults.Grid.editors=d.ligerDefaults.Grid.editors||{};d.ligerDefaults.Grid.sorters.date=function(c,a){return c<a?-1:c>a?1:0};d.ligerDefaults.Grid.sorters["int"]=function(c,a){return parseInt(c)<parseInt(a)?-1:parseInt(c)>parseInt(a)?1:0};d.ligerDefaults.Grid.sorters["float"]=function(c,a){return parseFloat(c)<parseFloat(a)?-1:parseFloat(c)>parseFloat(a)?1:0};d.ligerDefaults.Grid.sorters.string=function(c,a){return c?c.localeCompare(a):!1};d.ligerDefaults.Grid.formatters.date=function(c,
a){function b(c,a){if(isNaN(c))return null;var b={"M+":c.getMonth()+1,"d+":c.getDate(),"h+":c.getHours(),"m+":c.getMinutes(),"s+":c.getSeconds(),"q+":Math.floor((c.getMonth()+3)/3),S:c.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(c.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in b)(new RegExp("("+d+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[d]:("00"+b[d]).substr((""+b[d]).length)));return a}if(!c)return"";"string"==typeof c&&(/^\/Date/.test(c)?(c=c.replace(/^\//,
"new ").replace(/\/$/,""),eval("value \x3d "+c)):c=new Date(c));return c instanceof Date?b(c,a.format||this.options.dateFormat||"yyyy-MM-dd"):c.toString()};d.ligerDefaults.Grid.formatters.ref=function(c){return d.isArray(c)?1<c.length?c[1]:c[0]:c};d.ligerui.controls.Grid=function(c,a){d.ligerui.controls.Grid.base.constructor.call(this,c,a)};d.ligerui.controls.Grid.ligerExtend(d.ligerui.core.UIComponent,{__getType:function(){return"$.ligerui.controls.Grid"},__idPrev:function(){return"grid"},_extendMethods:function(){return d.ligerMethos.Grid},
_init:function(){d.ligerui.controls.Grid.base._init.call(this);var c=this,a=this.options;a.dataType=a.url?"server":"local";"local"==a.dataType&&(a.data=a.data||[],a.dataAction="local");0==a.isScroll&&(a.height="auto");a.frozen||(a.frozenCheckbox=!1,a.frozenDetail=!1,a.frozenRownumbers=!1);a.detailToEdit&&(a.enabledEdit=!0,a.clickToEdit=!1,a.detail={height:"auto",onShowDetail:function(b,e,f){function g(){d(e).parent().parent().remove();c.collapseDetail(b)}d(e).addClass("l-grid-detailpanel-edit");c.beginEdit(b,
function(c,b){c=d("\x3cdiv class\x3d'l-editbox'\x3e\x3c/div\x3e");c.width(120).height(a.rowHeight+1);c.appendTo(e);return c});d("\x3cdiv class\x3d'l-clear'\x3e\x3c/div\x3e").appendTo(e);d("\x3cdiv class\x3d'l-button'\x3e"+a.saveMessage+"\x3c/div\x3e").appendTo(e).click(function(){c.endEdit(b);g()});d("\x3cdiv class\x3d'l-button'\x3e"+a.applyMessage+"\x3c/div\x3e").appendTo(e).click(function(){c.submitEdit(b)});d("\x3cdiv class\x3d'l-button'\x3e"+a.cancelMessage+"\x3c/div\x3e").appendTo(e).click(function(){c.cancelEdit(b);
g()})}});a.tree&&(a.tree.childrenName=a.tree.childrenName||"children",a.tree.isParent=a.tree.isParent||function(c){return a.tree.childrenName in c},a.tree.isExtend=a.tree.isExtend||function(c){return"isextend"in c&&0==c.isextend?!1:!0});for(var b in liger.editors){var g=liger.editors[b];!g||b in a.editors||(a.editors[b]=liger.getEditor(d.extend({type:b,master:c},g)))}a.localStorageName&&(a.optionsColumns=Object.assign([],a.columns),a.pageSize=window.localStorage[a.localStorageName+"PageSize"]?window.localStorage[a.localStorageName+
"PageSize"]:a.pageSize,c.useColumnLocalStorage())},_render:function(){var c=this,a=this.options;c.grid=d(c.element);c.grid.addClass("l-panel");var b=[];b.push("        \x3cdiv class\x3d'l-panel-header'\x3e\x3cspan class\x3d'l-panel-header-text'\x3e\x3c/span\x3e\x3c/div\x3e");b.push("                    \x3cdiv class\x3d'l-grid-loading'\x3e\x3c/div\x3e");b.push("        \x3cdiv class\x3d'l-panel-topbar' style\x3d'display:none'\x3e\x3cdiv class\x3d'l-panel-topbarinner'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'l-clear'\x3e\x3c/div\x3e");
b.push("        \x3cdiv class\x3d'l-panel-bwarp'\x3e");b.push("            \x3cdiv class\x3d'l-panel-body'\x3e");b.push("                \x3cdiv class\x3d'l-grid'\x3e");b.push("                    \x3cdiv class\x3d'l-grid-dragging-line'\x3e\x3c/div\x3e");b.push("                    \x3cdiv class\x3d'l-grid-popup'\x3e\x3ctable cellpadding\x3d'0' cellspacing\x3d'0'\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e");b.push("                  \x3cdiv class\x3d'l-grid1'\x3e");b.push("                      \x3cdiv class\x3d'l-grid-header l-grid-header1'\x3e");
b.push("                          \x3cdiv class\x3d'l-grid-header-inner'\x3e\x3ctable class\x3d'l-grid-header-table' cellpadding\x3d'0' cellspacing\x3d'0'\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e");b.push("                      \x3c/div\x3e");b.push("                      \x3cdiv class\x3d'l-grid-body l-grid-body1'\x3e");b.push("                      \x3c/div\x3e");b.push("                  \x3c/div\x3e");b.push("                  \x3cdiv class\x3d'l-grid2'\x3e");b.push("                      \x3cdiv class\x3d'l-grid-header l-grid-header2'\x3e");
b.push("                          \x3cdiv class\x3d'l-grid-header-inner'\x3e\x3ctable class\x3d'l-grid-header-table' cellpadding\x3d'0' cellspacing\x3d'0'\x3e\x3ctbody\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e");b.push("                      \x3c/div\x3e");b.push("                      \x3cdiv class\x3d'l-grid-body l-grid-body2 l-scroll'\x3e");b.push("                      \x3c/div\x3e");b.push("                  \x3c/div\x3e");b.push("                 \x3c/div\x3e");b.push("              \x3c/div\x3e");
b.push("         \x3c/div\x3e");b.push("         \x3cdiv class\x3d'l-panel-bar'\x3e");b.push("            \x3cdiv class\x3d'l-panel-bbar-inner'\x3e");b.push("                \x3cdiv class\x3d'l-bar-group  l-bar-message'\x3e\x3cspan class\x3d'l-bar-text'\x3e\x3c/span\x3e\x3c/div\x3e");b.push("            \x3cdiv class\x3d'l-bar-group l-bar-selectpagesize'\x3e\x3c/div\x3e");b.push("                \x3cdiv class\x3d'l-bar-separator'\x3e\x3c/div\x3e");b.push("                \x3cdiv class\x3d'l-bar-group'\x3e");
b.push("                    \x3cdiv class\x3d'l-bar-button l-bar-btnfirst'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e");b.push("                    \x3cdiv class\x3d'l-bar-button l-bar-btnprev'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e");b.push("                \x3c/div\x3e");b.push("                \x3cdiv class\x3d'l-bar-separator'\x3e\x3c/div\x3e");b.push("                \x3cdiv class\x3d'l-bar-group'\x3e\x3cspan class\x3d'pcontrol'\x3e \x3cinput type\x3d'text' size\x3d'4' value\x3d'1' style\x3d'width:20px' maxlength\x3d'3' /\x3e / \x3cspan\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e");
b.push("                \x3cdiv class\x3d'l-bar-separator'\x3e\x3c/div\x3e");b.push("                \x3cdiv class\x3d'l-bar-group'\x3e");b.push("                     \x3cdiv class\x3d'l-bar-button l-bar-btnnext'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e");b.push("                    \x3cdiv class\x3d'l-bar-button l-bar-btnlast'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e");b.push("                \x3c/div\x3e");b.push("                \x3cdiv class\x3d'l-bar-separator'\x3e\x3c/div\x3e");b.push("                \x3cdiv class\x3d'l-bar-group'\x3e");
b.push("                     \x3cdiv class\x3d'l-bar-button l-bar-btnload'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e");b.push("                \x3c/div\x3e");b.push("                \x3cdiv class\x3d'l-bar-separator'\x3e\x3c/div\x3e");b.push("                \x3cdiv class\x3d'l-clear'\x3e\x3c/div\x3e");b.push("            \x3c/div\x3e");b.push("         \x3c/div\x3e");c.grid.html(b.join(""));c.header=d(".l-panel-header:first",c.grid);c.body=d(".l-panel-body:first",c.grid);c.toolbar=d(".l-panel-bar:first",
c.grid);c.popup=d(".l-grid-popup:first",c.grid);c.gridloading=d(".l-grid-loading:first",c.grid);c.draggingline=d(".l-grid-dragging-line",c.grid);c.topbar=d(".l-panel-topbarinner:first",c.grid);c.gridview=d(".l-grid:first",c.grid);c.gridview.attr("id",c.id+"grid");c.gridview1=d(".l-grid1:first",c.gridview);c.gridview2=d(".l-grid2:first",c.gridview);c.gridheader=d(".l-grid-header:first",c.gridview2);c.gridbody=d(".l-grid-body:first",c.gridview2);a.autoFilter&&(b={text:"高级查询",gridid:c.id,click:function(){c.showFilter()},
icon:"search2"},a.toolbar&&a.toolbar.items?a.toolbar.items.push(b):a.toolbar={items:[b]});c.f={};c.f.gridheader=d(".l-grid-header:first",c.gridview1);c.f.gridbody=d(".l-grid-body:first",c.gridview1);c.currentData=null;c.changedCells={};c.editors={};c.editor={editing:!1};c.cacheData={};"auto"==a.height&&c.bind("SysGridHeightChanged",function(){c.enabledFrozen()&&c.gridview.height(Math.max(c.gridview1.height(),c.gridview2.height()))});b=d.extend({},a);this._bulid();this._setColumns(a.columns);delete b.columns;
delete b.data;delete b.url;c.set(b);a.delayLoad||(a.url?c.set({url:a.url}):a.data&&c.set({data:a.data}))},_rendered:function(){var c=this.options;this.element&&d(this.element).attr("ligeruiid",this.id);c.localStorageName&&this._addClearStorageButton()},_setFrozen:function(c){c?this.grid.addClass("l-frozen"):this.grid.removeClass("l-frozen")},_setCssClass:function(c){this.grid.addClass(c)},_setLoadingMessage:function(c){this.gridloading.html(c)},_setToolbar:function(c){var a=this.options;if(c&&d.fn.ligerToolBar){this.topbar.parent().show();
this.toolbarManager=this.topbar.ligerToolBar(c);if(c.title){var b=d("\x3cdiv class\x3d'l-panel-topbartitle'\x3e\x3cspan\x3e"+c.title+"\x3c/span\x3e\x3c/div\x3e");c.icon&&(b.append("\x3cimg class\x3d'l-panel-topbaricon' src\x3d'"+c.icon+"'\x3e\x3c/img\x3e"),b.addClass("l-panel-topbartitle-hasicon"));this.topbar.parent().append(b)}a.toolbarShowInLeft&&this.topbar.addClass("l-panel-topbarinner-left")}else this.topbar.parent().remove()},isHorizontalScrollShowed:function(){var c=this.gridbody.find(".l-grid-body-inner:first");
return c.length?this.gridbody.width()-20<c.width():!1},_setHeight:function(c){var a=this,b=this.options;a.unbind("SysGridHeightChanged");if("auto"==c)a.bind("SysGridHeightChanged",function(){a.enabledFrozen()&&a.gridview.height(Math.max(a.gridview1.height(),a.gridview2.height()))});else{c=a._calculateGridBodyHeight(c);if(0<c){a.gridbody.height(c);if(b.frozen){var g=a.gridbody.width(),h=d(":first-child",a.gridbody).width();h&&h+18>g?18<c&&a.f.gridbody.height(c-18):a.f.gridbody.height(c)}a.gridview.height(c+
(b.headerRowHeight*(a._columnMaxLevel-1)+b.headerRowHeight-1))}a._updateHorizontalScrollStatus.ligerDefer(a,10)}},_calculateGridBodyHeight:function(c){var a=this.options;if("string"==typeof c&&0<c.indexOf("%")){if(a.inWindow)if(a.inWindowComplete)c=d(window).height()*parseInt(c)*.01;else{if(c=(d(window).height()-parseInt(d("body").css("paddingTop"))-parseInt(d("body").css("paddingBottom")))*parseInt(c)*.01,a.inWindow||"body"==this.grid.parent()[0].tagName.toLowerCase())c-=this.grid.offset().top-d("body").offset().top-
parseInt(d("body").css("paddingTop"))}else c=this.grid.parent().height()*parseInt(c)*.01;c+=a.heightDiff}a.title&&(c-=24);if(a.usePager&&a.pagerRender||!a.scrollToPage)this.toolbar.is(":hidden")||(c-=this.toolbar.outerHeight());a.totalRender&&(c-=25);a.toolbar&&(c-=this.topbar.outerHeight());return c-(a.headerRowHeight*(this._columnMaxLevel-1)+a.headerRowHeight-1||0)},_updateHorizontalScrollStatus:function(){this.isHorizontalScrollShowed()?this.gridview.addClass("l-grid-hashorizontal"):this.gridview.removeClass("l-grid-hashorizontal")},
_updateFrozenWidth:function(){if(this.enabledFrozen()){this.gridview1.width(this.f.gridtablewidth);var c=this.gridview.width()-this.f.gridtablewidth;this.gridview2.css({left:this.f.gridtablewidth});0<c&&this.gridview2.css({width:c})}},_setWidth:function(c){this.enabledFrozen()&&this._onResize()},_setUrl:function(c){(this.options.url=c)?(this.options.dataType="server",this.loadData(!0)):this.options.dataType="local"},removeParm:function(c){var b=this.get("parms");b||(b={});b instanceof Array?a(b,function(a){return a.name==
c}):delete b[c];this.set("parms",b)},setParm:function(c,b){var d=this.get("parms");d||(d={});d instanceof Array?(a(d,function(a){return a.name==c}),d.push({name:c,value:b})):d[c]=b;this.set("parms",d)},_setData:function(c){this.loadData(this.options.data);this.trigger("afterSetData")},loadData:function(c,a){var b=this.options;this.loading=!0;this.trigger("loadData");var e=null,h=!0;"function"==typeof c?(e=c,this.lastData?this.data=this.lastData:(this.data=this.currentData,this.data||(this.data={}),
this.data[b.root]||(this.data[b.root]=[]),this.lastData=this.data),h=!1):"boolean"==typeof c?h=c:"object"==typeof c&&c?(h=!1,b.dataType="local",b.data=c):"number"==typeof c&&(b.newPage=c);b.newPage||(b.newPage=1);"server"!=b.dataAction||b.sortOrder||(b.sortOrder="asc");var k=[];if(b.parms)if(c=d.isFunction(b.parms)?b.parms():b.parms,c.length){d(c).each(function(){k.push({name:this.name,value:this.value})});for(var m=c.length-1;0<=m;m--)c[m].temp&&c.splice(m,1)}else if("object"==typeof c)for(m in c)k.push({name:m,
value:c[m]});"server"==b.dataAction&&(b.usePager&&(k.push({name:b.pageParmName,value:b.newPage}),k.push({name:b.pagesizeParmName,value:b.pageSize})),b.sortName&&(k.push({name:b.sortnameParmName,value:b.sortName}),k.push({name:b.sortorderParmName,value:b.sortOrder})));d(".l-bar-btnload span",this.toolbar).addClass("l-disabled");"local"==b.dataType?(this.filteredData=d.extend(!0,{},b.data||this.currentData),e&&(this.filteredData[b.root]=this._searchData(this.filteredData[b.root],e)),this.currentData=
b.usePager?this._getCurrentPageData(this.filteredData):this.filteredData,this._convertTreeData(),this._showData()):"local"!=b.dataAction||h?this.loadServerData(k,e,a):this.data&&this.data[b.root]&&(this.filteredData=this.data,e&&(this.filteredData[b.root]=this._searchData(this.filteredData[b.root],e)),this.currentData=this._getCurrentPageData(this.filteredData),this._convertTreeData(),this._showData());this.loading=!1},_convertTreeData:function(){var c=this.options;c.tree&&c.tree.idField&&c.tree.parentIDField&&
(this.currentData[c.root]=this.arrayToTree(this.currentData[c.root],c.tree.idField,c.tree.parentIDField),this.currentData[c.record]=this.currentData[c.root].length)},loadServerData:function(c,a,b){function e(c){if(!c)return"null";var a={};if(d.isArray(c))for(var b=0;b<c.length;b++)a[c[b].name]=c[b].value;else a=c;return liger.toJSON(a)}var f=this,k=this.options,m=k.url;d.isFunction(m)&&(m=m.call(f));var n=d.isFunction(k.urlParms)?k.urlParms.call(f):k.urlParms;if(n)for(name in n)m+=-1==m.indexOf("?")?
"?":"\x26",m+=name+"\x3d"+n[name];m={type:k.method,url:m,data:c,async:k.async,dataType:"json",beforeSend:function(){f.hasBind("loading")?f.trigger("loading"):f.toggleLoading(!0)},success:function(c){f.trigger("success",[c,f]);var d=f.trigger("setsuccessdata",[c,f]);(c=d?d:c)&&c[k.root]&&c[k.root].length?(f.data=c,null!=f.data[k.record]&&(f.cacheData.records=f.data[k.record]),"server"==k.dataAction?(f.currentData=f.data,null==f.currentData[k.record]&&f.cacheData.records&&(f.currentData[k.record]=f.cacheData.records)):
(f.filteredData=f.data,a&&(f.filteredData[k.root]=f._searchData(f.filteredData[k.root],a)),f.currentData=k.usePager?f._getCurrentPageData(f.filteredData):f.filteredData),f._convertTreeData(),f._showData.ligerDefer(f,10,[b])):(f.currentData=f.data={},f.currentData[k.root]=f.data[k.root]=[],f.currentData[k.record]=c&&c[k.record]?f.data[k.record]=c[k.record]:f.data[k.record]=0,f._convertTreeData(),f._showData(b))},complete:function(){f.trigger("complete",[f]);f.hasBind("loaded")?f.trigger("loaded",[f]):
f.toggleLoading.ligerDefer(f,10,[!1])},error:function(c,a,b){f.currentData=f.data={};f.currentData[k.root]=f.data[k.root]=[];f.currentData[k.record]=f.data[k.record]=0;f.toggleLoading.ligerDefer(f,10,[!1]);d(".l-bar-btnload span",f.toolbar).removeClass("l-disabled");f.trigger("error",[c,a,b])}};k.contentType&&(m.contentType=k.contentType);"application/json"==k.contentType&&"string"!=typeof parms&&(m.data=e(c));d.ajax(m)},toggleLoading:function(c){this.gridloading[c?"show":"hide"]()},_createEditor:function(c,
a,b,g,h){a=c.create.call(this,a,b);c.setValue&&c.setValue.call(this,a,b.value,b);b.column.editor&&b.column.editor.initSelect&&(a.element&&d(a.element).is(":text")&&d(a.element).select(),a instanceof jQuery&&(a.is(":text")?a.select():a.find(":text").select()));c.setText&&b.column.textField&&c.setText.call(this,a,b.text,b);c.resize&&c.resize.call(this,a,g,h,b);return a},beginEdit:function(c,a){var b=this,e=this.options;if(e.enabledEdit&&(c=b.getRow(c),!c._editing&&0!=b.trigger("beginEdit",{record:c,
rowindex:c.__index}))){b.editors[c.__id]={};c._editing=!0;b.reRender({rowdata:c});a=a||function(c,a){var e=b.getCellObj(c,a),e=d(e).html("");b.setCellEditing(c,a,!0);return e};for(var h=0,k=b.columns.length;h<k;h++){var m=b.columns[h];if(m.name&&m.editor&&m.editor.type&&e.editors[m.editor.type]){var n=e.editors[m.editor.type],q={record:c,value:b._getValueByName(c,m.name),column:m,rowindex:c.__index,grid:b},r=a(c,m),u=r.width(),t=r.height(),u=b._createEditor(n,r,q,u,t);b.editors[c.__id][m.__id]={editor:n,
input:u,editParm:q,container:r}}}b.trigger("afterBeginEdit",{record:c,rowindex:c.__index})}},cancelEdit:function(c){if(void 0==c)for(var a in this.editors)this.cancelEdit(a);else if(c=this.getRow(c),this.editors[c.__id]&&0!=this.trigger("beforeCancelEdit",{record:c,rowindex:c.__index})){for(var b in this.editors[c.__id])a=this.editors[c.__id][b],a.editor.destroy&&a.editor.destroy(a.input,a.editParm);delete this.editors[c.__id];delete c._editing;this.reRender({rowdata:c})}},addEditRow:function(c,a){this.submitEdit();
c=this.add(c);this.beginEdit(c,a)},submitEdit:function(c){if(void 0==c)for(var a in this.editors)this.submitEdit(a);else if(c=this.getRow(c),a={},c&&this.editors[c.__id]){for(var b in this.editors[c.__id]){var d=this.editors[c.__id][b],h=d.editParm.column;h.name&&(a[h.name]=d.editor.getValue(d.input,d.editParm));h.textField&&d.editor.getText&&(a[h.textField]=d.editor.getText(d.input,d.editParm))}if(0==this.trigger("beforeSubmitEdit",{record:c,rowindex:c.__index,newdata:a}))return!1;this.updateRow(c,
a);this.trigger("afterSubmitEdit",{record:c,rowindex:c.__index,newdata:a})}},_enabledEditByCell:function(c){return(c=this.getColumn(c))?c.editor&&c.editor.type:!1},endEditToNext:function(){var c=this.editor,a=null,b=null;if(c){var g=function(){return b.parent("tr").next(".l-grid-row").find("td:first")},c=c.editParm;d.inArray(c.column,this.columns);c=this.getCellObj(c.record,c.column);b=d(c);a=b.next();a.length||(a=g());if(a.length)for(;!this._enabledEditByCell(a.get(0));)b=a,a=a.next(),a.length||
(a=g())}this.endEdit();a&&a.length&&this._applyEditor(a.get(0))},endEdit:function(c){if(this.editor.editing)c=this.editor,this.trigger("sysEndEdit",[this.editor.editParm]),this.trigger("endEdit",[this.editor.editParm]),c.editor.destroy&&c.editor.destroy(c.input,c.editParm),this.editor.container.remove(),this.reRender({rowdata:this.editor.editParm.record,column:this.editor.editParm.column}),this.trigger("afterEdit",[this.editor.editParm]),this.editor={editing:!1};else if(void 0!=c){var a=this.getRow(c);
if(!this.editors[a.__id])return;if(0==this.submitEdit(c))return!1;for(var b in this.editors[a.__id])c=this.editors[a.__id][b],c.editor.destroy&&c.editor.destroy(c.input,c.editParm);delete this.editors[a.__id];delete a._editing;this.trigger("afterEdit",{record:a,rowindex:a.__index})}else for(a in this.editors)this.endEdit(a);this._fixHeight.ligerDefer(this,10)},setWidth:function(c){return this._setWidth(c)},setHeight:function(c){return this._setHeight(c)},enabledCheckbox:function(){return this.options.checkbox?
!0:!1},enabledFrozen:function(){var c=this.options;if(!c.frozen)return!1;var a=this.columns||[];if(this.enabledDetail()&&c.frozenDetail||this.enabledCheckbox()&&c.frozenCheckbox||c.frozenRownumbers&&c.rownumbers)return!0;for(var c=0,b=a.length;c<b;c++)if(a[c].frozen)return!0;this._setFrozen(!1);return!1},enabledDetailEdit:function(){return this.enabledDetail()?this.options.detailToEdit?!0:!1:!1},enabledDetail:function(){return this.options.detail&&this.options.detail.onShowDetail?!0:!1},enabledGroup:function(){return this.options.groupColumnName?
!0:!1},deleteSelectedRow:function(){if(this.selected){for(var c in this.selected){var a=this.selected[c];a.__id in this.records&&this._deleteData.ligerDefer(this,10,[a])}this.reRender.ligerDefer(this,20)}},removeRange:function(c){var a=this;d.each(c,function(){a._removeData(this)});a.reRender()},remove:function(c){this.getRow(c);this._removeData(c);this.reRender()},deleteRange:function(c){var a=this;d.each(c,function(){a._deleteData(this)});a.reRender()},deleteRow:function(c){if(c=this.getRow(c))this._deleteData(c),
this.reRender(),this.isDataChanged=!0},_deleteData:function(c){var a=this.options;c=this.getRow(c);c[a.statusName]="delete";if(a.tree){var b=this.getChildren(c,!0);if(b)for(var d=0,h=b.length;d<h;d++)b[d][a.statusName]="delete"}this.deletedRows=this.deletedRows||[];this.deletedRows.push(c);this._removeSelected(c)},updateCell:function(c,a,b){var e=this.options,f,k;if("string"==typeof c)for(e=0,k=this.columns.length;e<k;e++)this.columns[e].name==c&&this.updateCell(e,a,b);else"number"==typeof c?(f=this.columns[c],
k=this.getRow(b),this.getCellObj(k,f)):"object"==typeof c&&c.__id?(f=c,k=this.getRow(b),this.getCellObj(k,f)):(b=c.id.split("|"),f=this._columns[b[b.length-1]],c=d(c).parent(),k=k||this.getRow(c[0])),null!=a&&f.name&&(this._setValueByName(k,f.name,a),"add"!=k[e.statusName]&&(k[e.statusName]="update"),this.isDataChanged=!0),this.reRender({rowdata:k,column:f})},addRows:function(c,a,b,g){var e=this;d(c).each(function(){e.addRow(this,a,b,g)})},_createRowid:function(){return"r"+(1E3+this.recordNumber)},
_isRowId:function(c){return c in this.records},_addNewRecord:function(c,a,b){var d=this.options;this.recordNumber++;c.__id=this._createRowid();if((c.__previd=a)&&-1!=a){a=this.records[a];if(a.__nextid&&-1!=a.__nextid){var e=this.records[a.__nextid];e&&(e.__previd=c.__id)}a.__nextid=c.__id;c.__index=a.__index+1}else c.__index=0;d.tree&&(b&&-1!=b?(a=this.records[b],c.__pid=b,c.__level=a.__level+1):(c.__pid=-1,c.__level=1),c.__hasChildren=c[d.tree.childrenName]?!0:!1);c[d.statusName]=c[d.statusName]||
"nochanged";this.rows[c.__index]=c;return this.records[c.__id]=c},_getRows:function(c){function a(c){if(c&&c.length)for(var e=0,f=c.length;e<f;e++){var g=c[e];d.push(g);g[b.tree.childrenName]&&a(g[b.tree.childrenName])}}var b=this.options,d=[];a(c);return d},_updateGridData:function(){function c(e,f){if(e&&e.length)for(var g=0,h=e.length;g<h;g++){var k=e[g];a.formatRecord(k);"delete"!=k[b.statusName]&&(a._addNewRecord(k,d,f),d=k.__id,k.__hasChildren&&c(k[b.tree.childrenName],k.__id))}}var a=this,
b=this.options;a.recordNumber=0;a.rows=[];a.records={};var d=-1;c(a.currentData[b.root],-1);return a.rows},_moveData:function(c,a,b){c=this.getRow(c);var e=this.getRow(a);if(!1===this.trigger("beforeMoveRow",[c,e]))return!1;var f;a=this._getParentChildren(c);f=d.inArray(c,a);a.splice(f,1);a=this._getParentChildren(e);e=d.inArray(e,a);a.splice(e+(b?1:0),0,c)},move:function(c,a,b){this._moveData(c,a,b);this.reRender()},moveRange:function(c,a,b){for(var d in c)this._moveData(c[d],a,b);this.reRender()},
up:function(c){c=this.getRow(c);var a=this._getParentChildren(c),b=d.inArray(c,a);if(-1!=b&&0!=b){var g=this.getSelected();this.move(c,a[b-1],!1);this.select(g)}},down:function(c){c=this.getRow(c);var a=this._getParentChildren(c),b=d.inArray(c,a);if(-1!=b&&b!=a.length-1){var g=this.getSelected();this.move(c,a[b+1],!0);this.select(g)}},addRow:function(c,a,b,d){var e=this.options;c=c||{};this._addData(c,d,a,b);this.reRender();c[e.statusName]="add";if(e.tree&&(a=this.getChildren(c,!0)))for(b=0,d=a.length;b<
d;b++)a[b][e.statusName]="add";this.isDataChanged=!0;e.total=e.total?e.total+1:1;e.pageCount=Math.ceil(e.total/e.pageSize);this._buildPager();this.trigger("SysGridHeightChanged");this.trigger("afterAddRow",[c]);return c},updateRow:function(c,a){var b=this.options;c=this.getRow(c);this.isDataChanged=!0;d.extend(c,a||{});"add"!=c[b.statusName]&&(c[b.statusName]="update");this.reRender.ligerDefer(this,10,[{rowdata:c}]);return c},setCellEditing:function(c,a,b){var e=this.getCellObj(c,a);b=b?"addClass":
"removeClass";d(e)[b]("l-grid-row-cell-editing");if(0!=c.__id){e=d(this.getRowObj(c.__id)).prev();if(!e.length||0>=e.length||null==e[0].id||""==e[0].id)return;e=this.getRow(e[0]);e=this.getCellObj(e,a);if(!e)return;d(e)[b]("l-grid-row-cell-editing-topcell")}-1!=a.__previd&&null!=a.__previd&&(e=d(this.getCellObj(c,a)).prev(),d(e)[b]("l-grid-row-cell-editing-leftcell"))},reRender:function(c){function a(c){if(c.totalSummary)for(var a=0;a<b.totalNumber;a++){var e=document.getElementById(b.id+"|total"+
a+"|"+c.__id);d("div:first",e).html(b._getTotalCellContent(c,b.groups&&b.groups[a]?b.groups[a]:b.currentData[g.root]))}}var b=this,g=this.options;c=c||{};var h=c.rowdata,k=c.column;if(!k||!k.isdetail&&!k.ischeckbox)if(!h||"delete"!=h[g.statusName])if(c.totalOnly)d(b.columns).each(function(){a(this)});else if(h&&k)c=b.getCellObj(h,k),d(c).html(b._getCellHtml(h,k)),k.issystem||b.setCellEditing(h,k,!1);else if(h)d(b.columns).each(function(){b.reRender({rowdata:h,column:this})});else if(k){for(var m in b.records)b.reRender({rowdata:b.records[m],
column:k});a(k)}else b._showData()},getData:function(c,a){var b=this.options,e=[];void 0==a&&(a=!0);for(var h in this.records){var k=d.extend(!0,{},this.records[h]);k[b.statusName]!=c&&void 0!=c||e.push(this.formatRecord(k,a))}return e},formatRecord:function(c,a){delete c.__id;delete c.__previd;delete c.__nextid;delete c.__index;this.options.tree&&(delete c.__pid,delete c.__level,delete c.__hasChildren);a&&delete c[this.options.statusName];return c},getUpdated:function(){return this.getData("update",
!0)},getDeleted:function(){return this.deletedRows},getAdded:function(){return this.getData("add",!0)},getChanges:function(){var c=this,a=[];this.deletedRows&&d(this.deletedRows).each(function(){var b=d.extend(!0,{},this);a.push(c.formatRecord(b,!1))});d.merge(a,c.getData("update",!1));d.merge(a,c.getData("add",!1));return a},getColumn:function(c){return"string"==typeof c?this._isColumnId(c)?this._columns[c]:this.columns[parseInt(c)]:"number"==typeof c?this.columns[c]:"object"==typeof c&&1==c.nodeType?
(c=c.id.split("|"),this._columns[c[c.length-1]]):c},getColumnByName:function(c){for(i=0;i<this.columns.length;i++)if(this.columns[i].name==c)return this.columns[i];return null},getColumnType:function(c){for(i=0;i<this.columns.length;i++)if(this.columns[i].name==c)return this.columns[i].type?this.columns[i].type:"string";return null},isTotalSummary:function(){for(var c=0;c<this.columns.length;c++)if(this.columns[c].totalSummary)return!0;return!1},getColumns:function(c){var a=[],b;for(b in this._columns){var d=
this._columns[b];void 0!=c?d.__level==c&&a.push(d):d.__leaf&&a.push(d)}return a},changeSort:function(c,a){var b=this,d=this.options;if(b.loading)return!0;if("local"==d.dataAction){var e=b.getColumnType(c);b.sortedData||(b.sortedData=b.filteredData);if(!b.sortedData||!b.sortedData[d.root])return;d.sortName==c?b.sortedData[d.root].reverse():b.sortedData[d.root].sort(function(a,d){return b._compareData(a,d,c,e)});b.currentData=d.usePager?b._getCurrentPageData(b.sortedData):b.sortedData;b._showData()}d.sortName=
c;d.sortOrder=a;"server"==d.dataAction&&b.loadData(d.where)},changePage:function(c){var a=this.options;if(this.loading)return!0;var b=a.dataChangedConfirm||confirm;if("local"!=a.dataAction&&this.isDataChanged&&!b(a.isContinueByDataChanged))return!1;a.pageCount=parseInt(d(".pcontrol span",this.toolbar).html());switch(c){case "first":if(1==a.page)return;a.newPage=1;break;case "prev":if(1==a.page)return;1<a.page&&(a.newPage=parseInt(a.page)-1);break;case "next":if(a.page>=a.pageCount)return;a.newPage=
parseInt(a.page)+1;break;case "last":if(a.page>=a.pageCount)return;a.newPage=a.pageCount;break;case "input":c=parseInt(d(".pcontrol input",this.toolbar).val()),isNaN(c)&&(c=1),1>c?c=1:c>a.pageCount&&(c=a.pageCount),d(".pcontrol input",this.toolbar).val(c),a.newPage=c}if(a.newPage==a.page)return!1;1==a.newPage?(d(".l-bar-btnfirst span",this.toolbar).addClass("l-disabled"),d(".l-bar-btnprev span",this.toolbar).addClass("l-disabled")):(d(".l-bar-btnfirst span",this.toolbar).removeClass("l-disabled"),
d(".l-bar-btnprev span",this.toolbar).removeClass("l-disabled"));a.newPage==a.pageCount?(d(".l-bar-btnlast span",this.toolbar).addClass("l-disabled"),d(".l-bar-btnnext span",this.toolbar).addClass("l-disabled")):(d(".l-bar-btnlast span",this.toolbar).removeClass("l-disabled"),d(".l-bar-btnnext span",this.toolbar).removeClass("l-disabled"));this.trigger("changePage",[a.newPage]);if("server"==a.dataAction)a.parms||(a.parms=[]),d.isArray(a.parms)?a.parms.push({name:"changepage",value:"1",temp:!0}):a.parms.changepage=
"1",this.loadData(a.where);else{this.currentData=this._getCurrentPageData(this.filteredData);if(a.tree){var g=a.tree.childrenName;d(this.filteredData[a.root]).each(function(a,c){c[g]&&(c[g]=[])});this._convertTreeData()}this._showData()}},getSelectedRow:function(){for(var a in this.selected){var b=this.selected[a];if(b.__id in this.records)return b}return null},getSelectedRows:function(){var a=[],b;for(b in this.selected){var d=this.selected[b];d.__id in this.records&&a.push(d)}return a},getSelectedRowObj:function(){for(var a in this.selected){var b=
this.selected[a];if(b.__id in this.records)return this.getRowObj(b)}return null},getSelectedRowObjs:function(){var a=[],b;for(b in this.selected){var d=this.selected[b];d.__id in this.records&&a.push(this.getRowObj(d))}return a},getCellObj:function(a,b){a=this.getRow(a);b=this.getColumn(b);return document.getElementById(this._getCellDomId(a,b))},getRowObj:function(a,b){return null==a?null:"string"==typeof a?this._isRowId(a)?document.getElementById(this.id+(b?"|1|":"|2|")+a):document.getElementById(this.id+
(b?"|1|":"|2|")+this.rows[parseInt(a)].__id):"number"==typeof a?document.getElementById(this.id+(b?"|1|":"|2|")+this.rows[a].__id):"object"==typeof a&&a.__id?this.getRowObj(a.__id,b):a},getRow:function(a){return null==a?null:"string"==typeof a?this._isRowId(a)?this.records[a]:this.rows[parseInt(a)]:"number"==typeof a?this.rows[parseInt(a)]:"object"!=typeof a||1!=a.nodeType||a.__id?a:this._getRowByDomId(a.id)},_setColumnVisible:function(a,b){if(b){if(a._hide=!0,document.getElementById(a.__domid).style.display=
"none",-1!=a.__pid){var c=!0,d=this._columns[a.__pid];for(a=0;d&&a<d.columns.length;a++)if(!d.columns[a]._hide){c=!1;break}c&&(d._hide=!0,document.getElementById(d.__domid).style.display="none",this._setColumnVisible(d,b))}}else if(a._hide=!1,document.getElementById(a.__domid).style.display="",-1!=a.__pid){var d=this._columns[a.__pid];d._hide&&(document.getElementById(d.__domid).style.display="",this._setColumnVisible(d,b))}},toggleCol:function(a,b,f){var c=this.options,e=this.getColumn(a);if(e){a=
e.__leafindex;var k=document.getElementById(e.__domid);if(k){var k=d(k),k=[],m;for(m in this.rows){var n=this.getCellObj(this.rows[m],e);n&&k.push(n)}for(m=0;m<this.totalNumber;m++)(n=document.getElementById(this.id+"|total"+m+"|"+e.__id))&&k.push(n);this._setColumnVisible(e,!b);b?d(k).show():d(k).hide();this.resetColumnsWidth();this._updateFrozenWidth();f||d(":checkbox[columnindex\x3d"+a+"]",this.popup).each(function(){this.checked=b;if(d.fn.ligerCheckBox){var a=d(this).ligerGetCheckBoxManager();
a&&a.updateStyle()}});if(c.localStorageName){var q=e.storageName||e.name;f=JSON.parse(localStorage[c.localStorageName]).map(function(a){a.name===q&&(a.hide=e._hide);return a});this.setColumnLocalStorage(f)}e.hide=e._hide;this.trigger("toggleCol",[e,e._hide,b])}}},resetColumnsWidth:function(a){var c=this.options,b=this.columns,g,h=Number(this.enabledDetail())+Number(this.enabledCheckbox())+Number(this.options.rownumbers);a=a||!0;for(var k=h,m=b.length;k<m;k++)g=b[k],a&&g._hide||(g._width=0,g._width=
this._getColumnWidth(g));c.autoStretch&&this._autoStretch(a);for(k=c=0;k<h;k++)g=b[k],c+=g._width+1;for(k=h;k<m;k++)g=b[k],a&&g._hide||(this.setColumnWidth(g,g._width),c+=g._width+1);this.gridtablewidth=c;d("div:first",this.gridheader).width(this.gridtablewidth+40);d("div:first",this.gridbody).width(this.gridtablewidth)},setColumnWidth:function(a,b){var c=this,e=this.options;if(b){b=parseInt(b,10);var h;if("number"==typeof a)h=c.columns[a];else if("object"==typeof a&&a.__id)h=a;else if("string"==
typeof a)if(c._isColumnId(a))h=c._columns[a];else{d(c.columns).each(function(){this.name==a&&c.setColumnWidth(this,b)});return}if(h){var k=e.minColumnWidth;h.minWidth&&(k=h.minWidth);b=b<k?k:b;k=b-h._width;if(0!=c.trigger("beforeChangeColumnWidth",[h,b])){h._width=b;h.frozen?(c.f.gridtablewidth+=k,d("div:first",c.f.gridheader).width(c.f.gridtablewidth),d("div:first",c.f.gridbody).width(c.f.gridtablewidth)):(c.gridtablewidth+=k,d("div:first",c.gridheader).width(c.gridtablewidth+40),d("div:first",c.gridbody).width(c.gridtablewidth));
d(document.getElementById(h.__domid)).css("width",b);var k=[],m;for(m in c.records){var n=c.getCellObj(c.records[m],h);n&&k.push(n);!c.enabledDetailEdit()&&c.editors[m]&&c.editors[m][h.__id]&&(n=c.editors[m][h.__id],n.editor.resize&&n.editor.resize(n.input,b,n.container.height(),n.editParm))}for(m=0;m<c.totalNumber;m++)(n=document.getElementById(c.id+"|total"+m+"|"+h.__id))&&k.push(n);d(k).css("width",b).find("\x3e div.l-grid-row-cell-inner:first").css("width",b-8);c._updateFrozenWidth();c._updateHorizontalScrollStatus.ligerDefer(c,
10);if(e.localStorageName){var q=h.storageName||h.name,e=JSON.parse(localStorage[e.localStorageName]).map(function(a){a.name===q&&(a.width=b);return a});c.setColumnLocalStorage(e)}c.trigger("afterChangeColumnWidth",[h,b])}}}},changeHeaderText:function(a,b){var c=this,e=this.options,h;if("number"==typeof a)h=c.columns[a];else if("object"==typeof a&&a.__id)h=a;else if("string"==typeof a)if(c._isColumnId(a))h=c._columns[a];else{d(c.columns).each(function(){this.name==a&&c.changeHeaderText(this,b)});
return}if(h){var k=h.__leafindex,m=document.getElementById(h.__domid);d(".l-grid-hd-cell-text",m).html(b);e.allowHideColumn&&d(":checkbox[columnindex\x3d"+k+"]",c.popup).parent().next().html(b);c.trigger("colChangeText",[h,b,h.display])}},changeCol:function(a,b,f){var c=this.options;f=c.columns;if(a&&b){a=this.getColumn(a);b=this.getColumn(b);a.frozen=b.frozen;var e,k,m=-1==a.__pid?f:this._columns[a.__pid].columns,n=-1==b.__pid?f:this._columns[b.__pid].columns;e=d.inArray(a,m);k=d.inArray(b,n);a.frozen=
b.frozen;f.splice(e,1);f.splice(k,0,a);this._setColumns(f);this.reRender();c.localStorageName&&function(a,b){if(!localStorage[c.localStorageName])return!1;var d={};JSON.parse(localStorage[c.localStorageName]).forEach(function(a,c){a.index||(a.index=c);d[a.name]=a});a.setColumnLocalStorage(b.map(function(a,c){var b=d[a.storageName||a.name];return{name:a.storageName||a.name,width:(b?b.width:0)||a.width,index:c,hide:a.hide}}))}(this,f);this.trigger("colChangePlace",[m,n,e,k,c.columns])}},collapseDetail:function(a){if(a=
this.getRow(a))for(var c=0,b=this.columns.length;c<b;c++)if(this.columns[c].isdetail){b=this.getRowObj(a);a=this.getCellObj(a,this.columns[c]);d(b).next("tr.l-grid-detailpanel").hide();d(".l-grid-row-cell-detailbtn:first",a).removeClass("l-open");this.trigger("SysGridHeightChanged");break}},extendDetail:function(a){if(a=this.getRow(a))for(var c=0,b=this.columns.length;c<b;c++)if(this.columns[c].isdetail){b=this.getRowObj(a);a=this.getCellObj(a,this.columns[c]);d(b).next("tr.l-grid-detailpanel").show();
d(".l-grid-row-cell-detailbtn:first",a).addClass("l-open");this.trigger("SysGridHeightChanged");break}},getParent:function(a){return this.options.tree?(a=this.getRow(a))?a.__pid in this.records?this.records[a.__pid]:null:null:null},getChildren:function(a,b){function c(a){if(a[d.tree.childrenName])for(var f=0,g=a[d.tree.childrenName].length;f<g;f++){var h=a[d.tree.childrenName][f];"delete"!=h[d.statusName]&&(e.push(h),b&&c(h))}}var d=this.options;if(!d.tree)return null;a=this.getRow(a);if(!a)return null;
var e=[];c(a);return e},isLeaf:function(a){if(a=this.getRow(a))return a.__hasChildren?!1:!0},hasChildren:function(a){var c=this.options;if(a=this.getRow(a))return a[c.tree.childrenName]&&a[c.tree.childrenName].length?!0:!1},existRecord:function(a){for(var c in this.records)if(this.records[c]==a)return!0;return!1},_removeSelected:function(a){if(this.options.tree){var c=this.getChildren(a,!0);if(c)for(var b=0,g=c.length;b<g;b++){var h=d.inArray(c[b],this.selected);-1!=h&&this.selected.splice(h,1)}}a=
d.inArray(a,this.selected);-1!=a&&this.selected.splice(a,1)},_getParentChildren:function(a){var c=this.options;a=this.getRow(a);return c.tree&&this.existRecord(a)&&a.__pid in this.records?this.records[a.__pid][c.tree.childrenName]:this.currentData[c.root]},_removeData:function(a){var c=this._getParentChildren(a),b=d.inArray(a,c);-1!=b&&c.splice(b,1);this._removeSelected(a)},_addData:function(a,b,f,g){var c=this.options;this.currentData||(this.currentData={});this.currentData[c.root]||(this.currentData[c.root]=
[]);var e=this.currentData[c.root];f?(c.tree&&(b?e=b[c.tree.childrenName]:f.__pid in this.records&&(e=this.records[f.__pid][c.tree.childrenName])),b=d.inArray(f,e),e.splice(-1==b?-1:b+(g?0:1),0,a)):(c.tree&&b&&(e=b[c.tree.childrenName]),e.push(a))},_appendData:function(a,b,d,g){a[this.options.statusName]="update";this._removeData(a);this._addData(a,b,d,g)},appendRange:function(a,b,f,g){var c=this,e=!1;d.each(a,function(a,d){d.__id&&c.existRecord(d)?(c.isLeaf(b)&&c.upgrade(b),c._appendData(d,b,f,g),
e=!0):c.appendRow(d,b,f,g)});e&&c.reRender()},appendRow:function(a,b,f,g){d.isArray(a)?this.appendRange(a,b,f,g):a.__id&&this.existRecord(a)?(this._appendData(a,b,f,g),this.reRender()):(b&&this.isLeaf(b)&&this.upgrade(b),this.addRow(a,f,g?!0:!1,b))},upgrade:function(a){var c=this.options;(a=this.getRow(a))&&c.tree&&(a[c.tree.childrenName]=a[c.tree.childrenName]||[],a.__hasChildren=!0,c=[this.getRowObj(a)],this.enabledFrozen()&&c.push(this.getRowObj(a,!0)),d("\x3e td \x3e div \x3e .l-grid-tree-space:last",
c).addClass("l-grid-tree-link l-grid-tree-link-open"))},demotion:function(a){var c=this.options;if((a=this.getRow(a))&&c.tree){c=[this.getRowObj(a)];this.enabledFrozen()&&c.push(this.getRowObj(a,!0));d("\x3e td \x3e div \x3e .l-grid-tree-space:last",c).removeClass("l-grid-tree-link l-grid-tree-link-open l-grid-tree-link-close");if(this.hasChildren(a))for(var c=this.getChildren(a),b=0,g=c.length;b<g;b++)this.deleteRow(c[b]);a.__hasChildren=!1}},collapseAll:function(){var a=this;d(a.rows).each(function(c,
b){c=a.getRowObj(b);d(".l-grid-tree-link",c).hasClass("l-grid-tree-link-close")||a.toggle(b)})},expandAll:function(){var a=this;d(a.rows).each(function(c,b){c=a.getRowObj(b);d(".l-grid-tree-link",c).hasClass("l-grid-tree-link-open")||a.toggle(b)})},collapse:function(a){var c=this.getRowObj(a);d(".l-grid-tree-link",c).hasClass("l-grid-tree-link-close")||this.toggle(a)},expand:function(a){var c=this.getRowObj(a);d(".l-grid-tree-link",c).hasClass("l-grid-tree-link-open")||this.toggle(a)},toggle:function(a){function c(a){for(var b=
0,e=a.length;b<e;b++){var f=a[b],h=g.getChildren(f,!1),k=h&&h.length?!0:!1,m=d([g.getRowObj(f.__id)]);g.enabledFrozen()&&(m=m.add(g.getRowObj(f.__id,!0)));k?d(".l-grid-tree-link",m).hasClass("l-grid-tree-link-close")?m.show():(m.show(),c(h)):(d(".l-grid-tree-link",m).removeClass("l-grid-tree-link-close").addClass("l-grid-tree-link-open"),m.show())}}function b(){var a=[];n?(a=g.getChildren(h,!1),c(a),g.trigger("treeExpanded",[h])):(a=g.getChildren(h,!0),d(a).each(function(){d(g.getRowObj(this)).hide();
g.enabledFrozen()&&d(g.getRowObj(this,!0)).hide()}),g.trigger("treeCollapsed",[h]))}if(a){var g=this,h=g.getRow(a);a=[g.getRowObj(h)];g.enabledFrozen()&&a.push(g.getRowObj(h,!0));var k,m=d(".l-grid-tree-link:first",a),n=!0;g.collapsedRows=g.collapsedRows||[];if(m.hasClass("l-grid-tree-link-close")){var q=function(){m.removeClass("l-grid-tree-link-close").addClass("l-grid-tree-link-open");k=d.inArray(h,g.collapsedRows);-1!=k&&g.collapsedRows.splice(k,1)};a={update:function(){q();b()}};if(g.hasBind("treeExpand")&&
0==g.trigger("treeExpand",[h,a]))return!1;q()}else{var r=function(){m.addClass("l-grid-tree-link-close").removeClass("l-grid-tree-link-open");k=d.inArray(h,g.collapsedRows);-1==k&&g.collapsedRows.push(h)};a={update:function(){r();b()}};if(g.hasBind("treeCollapse")&&0==g.trigger("treeCollapse",[h,a]))return!1;n=!1;r()}b()}},_bulid:function(){this._clearGrid();this._initBuildHeader();this._initHeight();this._initFootbar();this._buildPager();this._setEvent()},_setColumns:function(){this._initColumns();
this._initBuildGridHeader();this._initBuildPopup()},setTitle:function(a,b){d(".l-panel-header-text",this.header).html(a);b&&this.header.append("\x3cimg src\x3d'"+b+"' /\x3e").addClass("l-panel-header-hasicon")},_initBuildHeader:function(){var a=this.options;a.title?a.headerImg?setTitle(a.title,a.headerImg):setTitle(a.title):this.header.hide();a.toolbar?d.fn.ligerToolBar&&(this.toolbarManager=this.topbar.ligerToolBar(a.toolbar),0==this.topbar.height()?this.topbar.parent().height(25):this.topbar.parent().height(this.topbar.height())):
this.topbar.parent().remove()},_createColumnId:function(a){return null!=a.id&&""!=a.id?a.id.toString():"c"+(100+this._columnCount)},_isColumnId:function(a){return a in this._columns},_initColumns:function(){function a(c,d,e,f){c.editorType&&(c.editor=c.editor||{},c.editor.type=c.editorType);var g="__id __pid __previd __nextid __domid __leaf __leafindex __level __colSpan __rowSpan".split(" "),h;for(h in g)g[h]in c&&delete c[g[h]];d>b._columnMaxLevel&&(b._columnMaxLevel=d);b._columnCount++;c.__id=b._createColumnId(c);
c.__domid=b.id+"|hcell|"+c.__id;b._columns[c.__id]=c;c.columns&&c.columns.length||(c.__leafindex=b._columnLeafCount++);c.__level=d;c.__pid=e;c.__previd=f;if(!c.columns||!c.columns.length)return c.__leaf=!0,1;e=0;f=-1;g=0;for(h=c.columns.length;g<h;g++){var k=c.columns[g];e+=a(k,d+1,c.__id,f);f=k.__id}return c.__leafcount=e}var b=this,f=this.options;b._columns={};b._columnCount=0;b._columnLeafCount=0;b._columnMaxLevel=1;if(f.columns){var g=-1;if(f.rownumbers){var h=b.enabledGroup()?!1:f.frozen&&f.frozenRownumbers,
h={isrownumber:!0,issystem:!0,width:f.rownumbersColWidth,frozen:h};a(h,1,-1,g);g=h.__id}b.enabledDetail()&&(h=b.enabledGroup()?!1:f.frozen&&f.frozenDetail,h={isdetail:!0,issystem:!0,width:f.detailColWidth,frozen:h},a(h,1,-1,g),g=h.__id);b.enabledCheckbox()&&(h=b.enabledGroup()?!1:f.frozen&&f.frozenCheckbox,h={ischeckbox:!0,issystem:!0,width:f.checkboxColWidth,frozen:h},a(h,1,-1,g),g=h.__id);for(var k=0,m=f.columns.length;k<m;k++)if(h=f.columns[k])a(h,1,-1,g),g=h.__id;for(var n in b._columns)h=b._columns[n],
1<h.__leafcount&&(h.__colSpan=h.__leafcount),h.__leaf&&h.__level!=b._columnMaxLevel&&(h.__rowSpan=b._columnMaxLevel-h.__level+1);b.columns=b.getColumns();d(b.columns).each(function(a,c){c.columnname=c.name;c.columnindex=a;c.type=c.type||"string";c.islast=a==b.columns.length-1;c.isSort=0==c.isSort?!1:!0;c.frozen=c.frozen?!0:!1;c._width=b._getColumnWidth(c);c._hide=c.hide?!0:!1});f.autoStretch&&b._autoStretch(!1)}},_autoStretch:function(a){var c=this.grid.width(),b=this.columns,d=b.length,h=0,k,m=0,
n=Number(this.enabledDetail())+Number(this.enabledCheckbox())+Number(this.options.rownumbers);for(k=0;k<d;k++)a&&b[k]._hide||(h+=b[k]._width,m++);if(!(0>=m)&&h<c){var q=Math.floor((c-h-m)/(m-n));for(k=n;k<d;k++)a&&b[k]._hide||(b[k]._width+=q);b[--k]._width+=(c-h-m)%(m-n)}},_getColumnWidth:function(a){var c=this,b=this.options;if(a._width)return a._width;var g=a.width||b.columnWidth;if(!g||"auto"==g){var h=0,k=0;d(c.columns).each(function(a,d){(a=d.width||b.columnWidth)&&"auto"!=a?k+=parseInt(c._getColumnWidth(d))+
1:h++});g=parseInt((c.grid.width()-k)/h)-1}if("string"==typeof g&&0<g.indexOf("%")){var m=0;c.enabledDetail()&&(m+=b.detailColWidth);c.enabledCheckbox()&&(m+=b.checkboxColWidth);c.options.rownumbers&&(m+=c.options.rownumbersColWidth);a._width=g=Math.floor(.01*parseInt(g)*(c.grid.width()-m-c.columns.length))}a.minWidth&&g<a.minWidth&&(g=a.minWidth);a.maxWidth&&g>a.maxWidth&&(g=a.maxWidth);return g},_createHeaderCell:function(a){var c=this,b=this.options,g=d("\x3ctd class\x3d'l-grid-hd-cell'\x3e\x3cdiv class\x3d'l-grid-hd-cell-inner'\x3e\x3cspan class\x3d'l-grid-hd-cell-text'\x3e\x3c/span\x3e\x3c/div\x3e\x3c/td\x3e");
g.attr("id",a.__domid);a.__leaf||g.addClass("l-grid-hd-cell-mul");a.columnindex==c.columns.length-1&&g.addClass("l-grid-hd-cell-last");a.isrownumber&&(g.addClass("l-grid-hd-cell-rownumbers"),g.html("\x3cdiv class\x3d'l-grid-hd-cell-inner'\x3e\x3c/div\x3e"));a.ischeckbox&&(g.addClass("l-grid-hd-cell-checkbox"),g.html("\x3cdiv class\x3d'l-grid-hd-cell-inner'\x3e\x3cdiv class\x3d'l-grid-hd-cell-text l-grid-hd-cell-btn-checkbox'\x3e\x3c/div\x3e\x3c/div\x3e"));a.isdetail&&(g.addClass("l-grid-hd-cell-detail"),
g.html("\x3cdiv class\x3d'l-grid-hd-cell-inner'\x3e\x3cdiv class\x3d'l-grid-hd-cell-text l-grid-hd-cell-btn-detail'\x3e\x3c/div\x3e\x3c/div\x3e"));a.heightAlign&&d(".l-grid-hd-cell-inner:first",g).css("textAlign",a.heightAlign);a.__colSpan&&g.attr("colSpan",a.__colSpan);if(a.__rowSpan){g.attr("rowSpan",a.__rowSpan);g.height(b.headerRowHeight*a.__rowSpan);var h=(b.headerRowHeight*a.__rowSpan-b.headerRowHeight)/2-5;d(".l-grid-hd-cell-inner:first",g).css("paddingTop",h)}else g.height(b.headerRowHeight);
a.__leaf&&(g.width(a._width),g.attr("columnindex",a.__leafindex));h=g.height();!a.__rowSpan&&10<h&&d("\x3ediv:first",g).height(h);a._hide&&g.hide();a.name&&g.attr({columnname:a.name});h="";h=a.display&&""!=a.display?a.display:a.headerRender?a.headerRender(a):"\x26nbsp;";d(".l-grid-hd-cell-text:first",g).html(h);!a.issystem&&a.__leaf&&!1!==a.resizable&&d.fn.ligerResizable&&b.allowAdjustColWidth&&(c.colResizable[a.__id]=g.ligerResizable({handles:"e",onStartResize:function(a,b){this.proxy.hide();c.draggingline.css({height:c.body.height(),
top:0,left:b.pageX-c.grid.offset().left+parseInt(c.body[0].scrollLeft)}).show()},onResize:function(a,b){c.colresizing=!0;c.draggingline.css({left:b.pageX-c.grid.offset().left+parseInt(c.body[0].scrollLeft)});d("body").add(g).css("cursor","e-resize")},onStopResize:function(b){c.colresizing=!1;d("body").add(g).css("cursor","default");c.draggingline.hide();c.setColumnWidth(a,parseInt(a._width)+b.diffX);return!1}}));c.trigger("headerCellBulid",[g,a]);return g},_initBuildGridHeader:function(){var a=this,
b=this.options;a.gridtablewidth=0;a.f.gridtablewidth=0;if(a.colResizable){for(var f in a.colResizable)a.colResizable[f].destroy();a.colResizable=null}a.colResizable={};d("tbody:first",a.gridheader).html("");d("tbody:first",a.f.gridheader).html("");for(f=1;f<=a._columnMaxLevel;f++){var g=a.getColumns(f),h=f==a._columnMaxLevel,k=d("\x3ctr class\x3d'l-grid-hd-row'\x3e\x3c/tr\x3e"),m=d("\x3ctr class\x3d'l-grid-hd-row'\x3e\x3c/tr\x3e");h||k.add(m).addClass("l-grid-hd-mul");d("tbody:first",a.gridheader).append(k);
d("tbody:first",a.f.gridheader).append(m);g.forEach(function(c,d){(c.frozen?m:k).append(a._createHeaderCell(c));c.__leaf&&(d=(c._hide||c.hide)&&b.noHideWidth?0:c._width,c.frozen?a.f.gridtablewidth+=(parseInt(d)?parseInt(d):0)+1:a.gridtablewidth+=(parseInt(d)?parseInt(d):0)+1)})}0<a._columnMaxLevel&&(f=b.headerRowHeight*a._columnMaxLevel,a.gridheader.add(a.f.gridheader).height(f),b.rownumbers&&b.frozenRownumbers&&a.f.gridheader.find("td:first").height(f));a._updateFrozenWidth();d("div:first",a.gridheader).width(a.gridtablewidth+
40)},_initBuildPopup:function(){var a=this,b=this.options;d(":checkbox",a.popup).unbind();d("tbody tr",a.popup).remove();d(a.columns).each(function(c,b){if(!b.issystem&&0!=b.isAllowHide){var e='checked\x3d"checked"';b._hide&&(e="");b=b.display;d("tbody",a.popup).append('\x3ctr\x3e\x3ctd class\x3d"l-column-left"\x3e\x3cinput type\x3d"checkbox" '+e+' class\x3d"l-checkbox" columnindex\x3d"'+c+'"/\x3e\x3c/td\x3e\x3ctd class\x3d"l-column-right"\x3e'+b+"\x3c/td\x3e\x3c/tr\x3e")}});d.fn.ligerCheckBox&&d("input:checkbox",
a.popup).ligerCheckBox({onBeforeClick:function(c){return c.checked?d("input:checked",a.popup).length<=b.minColToggle?!1:!0:!0}});b.colDraggable&&a._onContextmenuDrop();if(b.allowHideColumn){d("tr",a.popup).hover(function(){d(this).addClass("l-popup-row-over")},function(){d(this).removeClass("l-popup-row-over")});var f=function(){if(d("input:checked",a.popup).length+1<=b.minColToggle)return!1;a.toggleCol(parseInt(d(this).attr("columnindex")),this.checked,!0)};d.fn.ligerCheckBox?d(":checkbox",a.popup).bind("change",
f):d(":checkbox",a.popup).bind("click",f)}},_initHeight:function(){var a=this.options;"auto"==a.height&&(this.gridbody.height("auto"),this.f.gridbody.height("auto"));a.width&&this.grid.width(a.width);this._onResize.call(this)},_initFootbar:function(){var a=this,b=this.options;if(b.usePager)if(b.pagerRender)a.toolbar.html(b.pagerRender.call(a));else if(b.scrollToPage)a.toolbar.hide();else{var f="",g=-1;b.pageSizeOptions.forEach(function(a,c){parseInt(b.pageSize)===a&&(g=c);f+="\x3coption value\x3d'"+
a+"'\x3e"+a+"\x3c/option\x3e"});d(".l-bar-selectpagesize",a.toolbar).append("\x3cselect name\x3d'rp'\x3e"+f+"\x3c/select\x3e");-1!=g&&(d(".l-bar-selectpagesize select",a.toolbar)[0].selectedIndex=g);b.switchPageSizeApplyComboBox&&d.fn.ligerComboBox&&d(".l-bar-selectpagesize select",a.toolbar).ligerComboBox({onBeforeSelect:function(){var c=b.dataChangedConfirm||confirm;return b.url&&a.isDataChanged&&!c(b.isContinueByDataChanged)?!1:!0},width:45})}else a.toolbar.hide()},_searchData:function(a,b){for(var c=
[],d=0;d<a.length;d++)b(a[d],d)&&(c[c.length]=a[d]);return c},_clearGrid:function(){this._fixRows();for(var a in this.rows){var b=d(this.getRowObj(this.rows[a]));this.enabledFrozen()&&(b=b.add(this.getRowObj(this.rows[a],!0)));b.unbind()}this.gridbody.html("");this.f.gridbody.html("");this.recordNumber=0;this.records={};this.rows=[];this._fixRows();this.selected=[];this.editorcounter=this.totalNumber=0},_fixRows:function(){if(this.rows)for(var a in this.rows)d.isFunction(this.rows[a])&&delete this.rows[a]},
_fillGridBody:function(a,b,f){var c=this,e=this.options,k="scrollappend"==f?[]:['\x3cdiv class\x3d"l-grid-body-inner"\x3e\x3ctable class\x3d"l-grid-body-table" cellpadding\x3d0 cellspacing\x3d0\x3e\x3ctbody\x3e'];if(c.enabledGroup()){var m=[],n=[];c.groups=n;for(var q in a){var r=a[q],u=r[e.groupColumnName],t=d.inArray(u,m);-1==t&&(m.push(u),t=m.length-1,n.push([]));n[t].push(r)}d(n).each(function(a,d){1==n.length&&k.push('\x3ctr class\x3d"l-grid-grouprow l-grid-grouprow-last l-grid-grouprow-first"');
a==n.length-1?k.push('\x3ctr class\x3d"l-grid-grouprow l-grid-grouprow-last"'):0==a?k.push('\x3ctr class\x3d"l-grid-grouprow l-grid-grouprow-first"'):k.push('\x3ctr class\x3d"l-grid-grouprow"');k.push(' groupindex"\x3d'+a+'" \x3e');k.push('\x3ctd colSpan\x3d"'+c.columns.length+'" class\x3d"l-grid-grouprow-cell"\x3e');k.push('\x3cspan class\x3d"l-grid-group-togglebtn"\x3e\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/span\x3e');e.groupRender?k.push(e.groupRender(m[a],d,e.groupColumnDisplay)):k.push(e.groupColumnDisplay+
":"+m[a]);k.push("\x3c/td\x3e");k.push("\x3c/tr\x3e");k.push(c._getHtmlFromData(d,b));c.isTotalSummary()&&k.push(c._getTotalSummaryHtml(d,"l-grid-totalsummary-group",b))})}else k.push(c._getHtmlFromData(a,b));"scrollappend"==!f&&k.push("\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e");"scrollappend"==f?(b?c.f.gridbody:c.gridbody).find("tbody:first").append(k.join("")):(b?c.f.gridbody:c.gridbody).html(k.join(""));b&&(c.f.gridbody.find("\x3el-jplace").remove(),c.f.gridbody.append('\x3cdiv class\x3d"l-jplace"\x3e\x3c/div\x3e'));
e.usePager&&e.scrollToPage&&!e.scrollToAppend&&(a=b?c.f.gridbody.find("\x3e .l-grid-body-inner"):c.gridbody.find("\x3e .l-grid-body-inner"),f=a.find("\x3e .l-scrollreplacetop"),f=f.length?f:d('\x3cdiv class\x3d"l-scrollreplacetop"\x3e\x3c/div\x3e').prependTo(a),f.css("width","80%").height(c.lastScrollTop),f=a.find("\x3e .l-scrollreplacebottom"),f=f.length?f:d('\x3cdiv class\x3d"l-scrollreplacebottom"\x3e\x3c/div\x3e').appendTo(a),f.css("width","80%").height((e.pageCount-e.newPage)*c._getOnePageHeight()));
c.enabledGroup()||c._bulidTotalSummary(b);d("\x3e div:first",c.gridbody).width(c.gridtablewidth);c._onResize()},_showData:function(a){var c=this,b=this.options;c.changedCells={};var g=c.currentData[b.root];b.usePager&&("server"==b.dataAction&&c.data&&c.data[b.record]?b.total=c.data[b.record]:c.filteredData&&c.filteredData[b.root]?b.total=c.filteredData[b.root].length:c.data&&c.data[b.root]?b.total=c.data[b.root].length:g&&(b.total=g.length),b.page=b.newPage,b.total||(b.total=0),b.page||(b.page=1),
b.pageCount=Math.ceil(b.total/b.pageSize),b.pageCount||(b.pageCount=1),b.scrollToPage||c._buildPager());d(".l-bar-btnloading:first",c.toolbar).removeClass("l-bar-btnloading");if(0!=c.trigger("beforeShowData",[c.currentData]))if("scrollappend"!=a&&c._clearGrid(),c.isDataChanged=!1,g&&g.length){c.gridview.removeClass("l-grid-empty");d(c.element).removeClass("l-empty");d(".l-bar-btnload:first span",c.toolbar).removeClass("l-disabled");c._updateGridData();c.enabledFrozen()&&c._fillGridBody(c.rows,!0,
a);c._fillGridBody(c.rows,!1,a);c.trigger("SysGridHeightChanged");"scroll"==a&&c.trigger("sysScrollLoaded");b.totalRender&&(d(".l-panel-bar-total",c.element).remove(),d(".l-panel-bar",c.element).before('\x3cdiv class\x3d"l-panel-bar-total"\x3e'+b.totalRender(c.data,c.filteredData)+"\x3c/div\x3e"));if(b.mouseoverRowCssClass)for(var h in c.rows)a=d(c.getRowObj(c.rows[h])),c.enabledFrozen()&&(a=a.add(c.getRowObj(c.rows[h],!0))),a.bind("mouseover.gridrow",function(){c._onRowOver(this,!0)}).bind("mouseout.gridrow",
function(){c._onRowOver(this,!1)});c._fixHeight();b.pagerRender?c.toolbar.html(b.pagerRender.call(c)):(c.gridbody.trigger("scroll.grid"),c.trigger("showDataed",[c.currentData]),c.trigger("afterShowData",[c.currentData]))}else c.gridview.addClass("l-grid-empty"),d(c.element).addClass("l-empty"),d("\x3cdiv\x3e\x3c/div\x3e").addClass("l-grid-body-inner").appendTo(c.gridbody).css({width:c.gridheader.find("\x3ediv:first").width(),height:c.gridbody.height()}),b.pagerRender?c.toolbar.html(b.pagerRender.call(c)):
(c._onResize.ligerDefer(c,50),c.trigger("showDataed",[c.currentData]))},_fixHeight:function(){var a=this.options;if(!a.fixedCellHeight&&a.frozen){var b,f,g;for(g in this.columns){a=this.columns[g];if(b&&f)break;a.frozen&&!b?b=a:a.frozen||f||(f=a)}if(b&&f)for(var h in this.records){g=this.getCellObj(h,b);var a=this.getCellObj(h,f),k=Math.max(d(g).height(),d(a).height());d(g).add(a).height(k)}}},_getRowDomId:function(a,b){return this.id+"|"+(b?"1":"2")+"|"+a.__id},_getCellDomId:function(a,b){return this._getRowDomId(a,
b.frozen)+"|"+b.__id},_getHtmlFromData:function(a,b){if(!a)return"";for(var c=this,e=this.options,h=[],k=0,m=a.length;k<m;k++){var n=a[k],q=n.__id;if(n){h.push("\x3ctr");h.push(' id\x3d"'+c._getRowDomId(n,b)+'"');h.push(' class\x3d"l-grid-row');!b&&c.enabledCheckbox()&&e.isChecked&&e.isChecked(n)?(c.select(n),h.push(" l-selected")):c.isSelected(n)?h.push(" l-selected"):e.isSelected&&e.isSelected(n)&&(c.select(n),h.push(" l-selected"));1==n.__index%2&&e.alternatingRow&&h.push(" l-grid-row-alt");if(e.rowClsRender){var r=
e.rowClsRender(n,q,a,k);r&&h.push(" "+r)}h.push('" ');e.rowAttrRender&&h.push(e.rowAttrRender(n,q));e.tree&&c.collapsedRows&&c.collapsedRows.length?(r=function(){for(var a=c.getParent(n);a;){if(-1!=d.inArray(a,c.collapsedRows))return!0;a=c.getParent(a)}return!1},r()&&h.push(' style\x3d"display:none;" ')):e.tree&&e.tree.isExtend&&(r=function(){for(var a=c.getParent(n);a;){if(0==e.tree.isExtend(a))return!0;a=c.getParent(a)}return!1},r()&&h.push(' style\x3d"display:none;" '));h.push("\x3e");d(c.columns).each(function(a,
d){b==d.frozen&&(h.push("\x3ctd"),h.push(' id\x3d"'+c._getCellDomId(n,this)+'"'),this.isrownumber?(h.push(' class\x3d"l-grid-row-cell l-grid-row-cell-rownumbers" style\x3d"width:'+this.width+'px"\x3e\x3cdiv class\x3d"l-grid-row-cell-inner"'),e.fixedCellHeight?h.push(' style \x3d "height:'+e.rowHeight+'px;" '):h.push(' style \x3d "min-height:'+e.rowHeight+'px;" '),h.push("\x3e"+(parseInt(n.__index)+1)+"\x3c/div\x3e\x3c/td\x3e")):this.ischeckbox?(h.push(' class\x3d"l-grid-row-cell l-grid-row-cell-checkbox" style\x3d"width:'+
this.width+'px"\x3e\x3cdiv class\x3d"l-grid-row-cell-inner"'),e.fixedCellHeight?h.push(' style \x3d "height:'+e.rowHeight+'px;" '):h.push(' style \x3d "min-height:'+e.rowHeight+'px;" '),h.push("\x3e"),h.push('\x3cspan class\x3d"l-grid-row-cell-btn-checkbox"\x3e\x3c/span\x3e'),h.push("\x3c/div\x3e\x3c/td\x3e")):this.isdetail?(h.push(' class\x3d"l-grid-row-cell l-grid-row-cell-detail" style\x3d"width:'+this.width+'px"\x3e\x3cdiv class\x3d"l-grid-row-cell-inner"'),e.fixedCellHeight?h.push(' style \x3d "height:'+
e.rowHeight+'px;" '):h.push(' style \x3d "min-height:'+e.rowHeight+'px;" '),h.push("\x3e"),e.isShowDetailToggle&&!e.isShowDetailToggle(n)||h.push('\x3cspan class\x3d"l-grid-row-cell-detailbtn"\x3e\x3c/span\x3e'),h.push("\x3c/div\x3e\x3c/td\x3e")):(a=this._width,h.push(' class\x3d"l-grid-row-cell '),c.changedCells[q+"_"+this.__id]&&h.push("l-grid-row-cell-edited "),this.islast&&h.push("l-grid-row-cell-last "),h.push('"'),h.push(' style \x3d "'),h.push("width:"+a+"px; "),d._hide&&h.push("display:none;"),
h.push(' "\x3e'),h.push(c._getCellHtml(n,d)),h.push("\x3c/td\x3e")))});h.push("\x3c/tr\x3e")}}return h.join("")},_getCellHtml:function(a,b){var c=this.options;if(b.isrownumber)return'\x3cdiv class\x3d"l-grid-row-cell-inner"\x3e'+(parseInt(a.__index)+1)+"\x3c/div\x3e";var d=[];d.push('\x3cdiv class\x3d"l-grid-row-cell-inner"');d.push(' style \x3d "width:'+parseInt(b._width-8)+"px;");c.fixedCellHeight&&d.push("height:"+c.rowHeight+"px;");d.push("min-height:"+c.rowHeight+"px; ");b.align&&d.push("text-align:"+
b.align+";");a=this._getCellContent(a,b);d.push('"\x3e'+a+"\x3c/div\x3e");return d.join("")},_setValueByName:function(a,b,d){if(!a||!b)return null;if(-1==b.indexOf("."))a[b]=d;else try{(new Function("data,value","data."+b+"\x3dvalue;"))(a,d)}catch(g){console.error(g)}},_getValueByName:function(a,b){if(!a||!b)return null;if(-1==b.indexOf("."))return a[b];try{return(new Function("data","return data."+b+";"))(a)}catch(f){return console.error(f),null}},_getCellContent:function(a,b){var c=this.options;
if(!a||!b)return"";if(b.isrownumber)return parseInt(a.__index)+1;var d=a.__index,e=this._getValueByName(a,b.name),k=this._getValueByName(a,b.textField),m="";b.render?m=b.render.call(this,a,d,e,b):c.formatters[b.type]?m=c.formatters[b.type].call(this,e,b):null!=k?m=k.toString():null!=e&&(m=e.toString());c.tree&&(null!=c.tree.columnName&&c.tree.columnName==b.name||null!=c.tree.columnId&&c.tree.columnId==b.id)&&(m=this._getTreeCellHtml(m,a));return m||""},_getTreeCellHtml:function(a,b){var c=b.__level,
e=this.options,h=null==this.collapsedRows?e.tree.isExtend(b):-1==d.inArray(b,this.collapsedRows||[]);b=e.tree.isParent(b);for(var e="",c=parseInt(c)||1,k=1;k<c;k++)e+="\x3cdiv class\x3d'l-grid-tree-space'\x3e\x3c/div\x3e";return(h&&b?e+"\x3cdiv class\x3d'l-grid-tree-space l-grid-tree-link l-grid-tree-link-open'\x3e\x3c/div\x3e":b?e+"\x3cdiv class\x3d'l-grid-tree-space l-grid-tree-link l-grid-tree-link-close'\x3e\x3c/div\x3e":e+"\x3cdiv class\x3d'l-grid-tree-space'\x3e\x3c/div\x3e")+("\x3cspan class\x3d'l-grid-tree-content'\x3e"+
a+"\x3c/span\x3e")},_applyEditor:function(a){var c=this,b=this.options,g=a.id.split("|"),h=c._columns[g[g.length-1]],g=d(a).parent(),g=c.getRow(g[0]),k=g.__id,m=g.__index;if(h&&h.editor){var n=h.name;if(h.editor.type&&b.editors[h.editor.type]){var q=c._getValueByName(g,n),r={record:g,value:q,column:h,rowindex:m};h.textField&&(r.text=c._getValueByName(g,h.textField));if(0==c.trigger("beforeEdit",[r]))return!1;c.lastEditRow=g;liger.lastEditGrid=c;var u=b.editors[h.editor.type],t=d(a),v=h.frozen?c.gridview1.find(".l-grid-body"):
c.gridview2.find(".l-grid-body"),m=t.width(),n=t.height(),w=(b.toolbar?c.topbar.parent().outerHeight():0)+(b.title?c.header.outerHeight():0),x=t[0].offsetLeft-1,w=t[0].offsetTop+w-1;t.position();c.gridbody.position();c.gridview2.position();t.html("");c.setCellEditing(g,h,!0);window.ActiveXObject||"ActiveXObject"in window?(n-=2,--w,--x):d.browser.mozilla?(--n,--w,--x):d.browser.safari?w-=2:--n;x+=b.editorLeftDiff||0;w+=b.editorTopDiff||0;n+=b.editorHeightDiff||0;b=x+t.width()+20;t=w+t.height()+20;
if(v.scrollLeft()+v.width()<b){var z=b-v.width();v.scrollLeft(z)}else v.scrollLeft()>x&&v.scrollLeft(x-10);v.scrollTop()+v.height()<t?v.scrollTop(b-v.height()):v.scrollTop()>w&&v.scrollTop(w-10);b=d("\x3cdiv class\x3d'l-grid-editor' style\x3d'width: "+m+"px;height:"+n+"px'\x3e\x3c/div\x3e").appendTo(v);b.css({left:x,top:w}).show();h.textField&&(r.text=c._getValueByName(g,h.textField));var y=c._createEditor(u,b,r,m,n-1);c.editor={editing:!0,editor:u,input:y,editParm:r,container:b};y.focus&&y.focus();
c.unbind("sysEndEdit");c.bind("sysEndEdit",function(){var b=u.getValue(y,r);h.textField&&u.getText&&(r.text=u.getText(y,r));u.getSelected&&(r.selected=u.getSelected(y,r));b!=q&&(d(a).addClass("l-grid-row-cell-edited"),c.changedCells[k+"_"+h.__id]=!0,r.value=b);h.editor.onChange&&h.editor.onChange.call(y,r);c._checkEditAndUpdateCell(r)&&h.editor.onChanged&&h.editor.onChanged.call(y,r)})}}},_checkEditAndUpdateCell:function(a){if(0==this.trigger("beforeSubmitEdit",[a]))return!1;var c=a.column;a.text&&
c.textField&&this._setValueByName(a.record,c.textField,a.text);this.updateCell(c,a.value,a.record);(c.render||this.enabledTotal())&&this.reRender({column:c});this.reRender({rowdata:a.record});return!0},_getCurrentPageData:function(a){var c=this.options,b={};b[c.root]=[];if(!a||!a[c.root]||!a[c.root].length)return b[c.record]=0,b;b[c.record]=a[c.root].length;c.newPage||(c.newPage=1);for(i=(c.newPage-1)*c.pageSize;i<a[c.root].length&&i<c.newPage*c.pageSize;i++)b[c.root].push(a[c.root][i]);return b},
_compareData:function(a,b,d,g){var c=this.options;a=a[d];b=b[d];return null==a&&null!=b?1:null==a&&null==b?0:null!=a&&null==b?-1:c.sorters[g]?c.sorters[g].call(this,a,b):a<b?-1:a>b?1:0},_getTotalInfo:function(a,b){var c=this.options;try{if(!a.totalSummary)return null;var d=0,e=0,k=0,m=0,n=0;if(b&&b.length){for(var n=parseFloat(b[0][a.name]),m=parseFloat(b[0][a.name]),q=0;q<b.length;q++)if("delete"!=b[q][c.statusName]){var e=e+1,r=b[q][a.name];a.totalSummary.calValue&&(r=a.totalSummary.calValue(b[q]));
"string"==typeof r&&(r=r.replace(/\$|\,/g,""));if(r=parseFloat(r))d+=r,r>n&&(n=r),r<m&&(m=r)}k=1*d/b.length}return{sum:d,count:e,avg:k,min:m,max:n}}catch(u){return console.error(u),{}}},_getTotalCellContent:function(a,b){var c=[];if(a.totalSummary){var d=function(a){for(var c=0;c<e.length;c++)if(e[c].toLowerCase()==a.toLowerCase())return!0;return!1};b=this._getTotalInfo(a,b);if(a.totalSummary.render)a=a.totalSummary.render(b,a,this.data),c.push(a);else if(a.totalSummary.type&&b){var e=a.totalSummary.type.split(",");
d("sum")&&c.push("\x3cdiv\x3eSum\x3d"+b.sum.toFixed(2)+"\x3c/div\x3e");d("tsum")&&c.push("\x3cdiv\x3e"+sum.toFixed(0)+"\x3c/div\x3e");d("count")&&c.push("\x3cdiv\x3eCount\x3d"+b.count+"\x3c/div\x3e");d("max")&&c.push("\x3cdiv\x3eMax\x3d"+b.max.toFixed(2)+"\x3c/div\x3e");d("min")&&c.push("\x3cdiv\x3eMin\x3d"+b.min.toFixed(2)+"\x3c/div\x3e");d("avg")&&c.push("\x3cdiv\x3eAvg\x3d"+b.avg.toFixed(2)+"\x3c/div\x3e")}}return c.join("")},_getTotalSummaryHtml:function(a,b,f){var c=this,e=[];b?e.push('\x3ctr class\x3d"l-grid-totalsummary '+
b+'"\x3e'):e.push('\x3ctr class\x3d"l-grid-totalsummary"\x3e');d(c.columns).each(function(b,d){this.frozen==f&&(this.isrownumber?e.push('\x3ctd class\x3d"l-grid-totalsummary-cell l-grid-totalsummary-cell-rownumbers" style\x3d"width:'+this.width+'px"\x3e\x3cdiv\x3e\x26nbsp;\x3c/div\x3e\x3c/td\x3e'):this.ischeckbox?e.push('\x3ctd class\x3d"l-grid-totalsummary-cell l-grid-totalsummary-cell-checkbox" style\x3d"width:'+this.width+'px"\x3e\x3cdiv\x3e\x26nbsp;\x3c/div\x3e\x3c/td\x3e'):this.isdetail?e.push('\x3ctd class\x3d"l-grid-totalsummary-cell l-grid-totalsummary-cell-detail" style\x3d"width:'+
this.width+'px"\x3e\x3cdiv\x3e\x26nbsp;\x3c/div\x3e\x3c/td\x3e'):(e.push('\x3ctd class\x3d"l-grid-totalsummary-cell'),this.islast&&e.push(" l-grid-totalsummary-cell-last"),e.push('" '),e.push('id\x3d"'+c.id+"|total"+c.totalNumber+"|"+d.__id+'" '),e.push('width\x3d"'+this._width+'"'),d._hide&&e.push('style\x3d"display: none"'),(columnname=this.columnname)&&e.push('columnname\x3d"'+columnname+'" '),e.push('columnindex\x3d"'+b+'" '),e.push('\x3e\x3cdiv class\x3d"l-grid-totalsummary-cell-inner"'),e.push(' style\x3d"text-Align:'+
((d.totalSummary?d.totalSummary.align||d.align:d.align)||"center")+';"'),e.push("\x3e"),e.push(c._getTotalCellContent(d,a)),e.push("\x3c/div\x3e\x3c/td\x3e")))});e.push("\x3c/tr\x3e");f||c.totalNumber++;return e.join("")},_bulidTotalSummary:function(a){var c=this.options;if(!this.isTotalSummary())return!1;c="local"===c.dataAction?this.data[c.root]:this.currentData[c.root];if(Array.isArray(c)&&1>c.length)return!1;c=d(this._getTotalSummaryHtml(c,null,a));d("tbody:first",a?this.f.gridbody:this.gridbody).append(c);
a?this.totalRow1=c:this.totalRow2=c},updateTotalSummary:function(){this.reRender({totalOnly:!0})},_buildPager:function(){var a=this.options;if(!a.pagerRender){d(".pcontrol input",this.toolbar).val(a.page);a.pageCount||(a.pageCount=1);d(".pcontrol span",this.toolbar).html(a.pageCount);var b=parseInt((a.page-1)*a.pageSize)+1,f=parseInt(b)+parseInt(a.pageSize)-1;a.total||(a.total=0);a.total<f&&(f=a.total);a.total||(b=f=0);0>b&&(b=0);0>f&&(f=0);var g=a.pageStatMessage,g=g.replace(/{from}/,b),g=g.replace(/{to}/,
f),g=g.replace(/{total}/,a.total),g=g.replace(/{pagesize}/,a.pageSize);d(".l-bar-text",this.toolbar).html(g);a.total||d(".l-bar-btnfirst span,.l-bar-btnprev span,.l-bar-btnnext span,.l-bar-btnlast span",this.toolbar).addClass("l-disabled");a.hideLoadButton&&(d(".l-bar-btnload:first",this.toolbar).parent().hide(),d(".l-bar-btnload:first",this.toolbar).parent().next().hide());1==a.page?(d(".l-bar-btnfirst span",this.toolbar).addClass("l-disabled"),d(".l-bar-btnprev span",this.toolbar).addClass("l-disabled")):
a.page>a.pageCount&&0<a.pageCount&&(d(".l-bar-btnfirst span",this.toolbar).removeClass("l-disabled"),d(".l-bar-btnprev span",this.toolbar).removeClass("l-disabled"));a.page==a.pageCount?(d(".l-bar-btnlast span",this.toolbar).addClass("l-disabled"),d(".l-bar-btnnext span",this.toolbar).addClass("l-disabled")):a.page<a.pageCount&&0<a.pageCount&&(d(".l-bar-btnlast span",this.toolbar).removeClass("l-disabled"),d(".l-bar-btnnext span",this.toolbar).removeClass("l-disabled"))}},_getRowIdByDomId:function(a){return a.split("|")[2]},
_getRowByDomId:function(a){return this.records[this._getRowIdByDomId(a)]},_isEditing:function(a){if(a.hasClass("l-box-dateeditor")||a.hasClass("l-box-select"))return!0;if(a.hasClass("l-dialog")){var c=[];a.find(".l-dialog").each(function(){var a=d(this).attr("ligeruiid");a&&c.push(a)});if(this._editorIncludeCotrols(c))return!0}return!1},_getSrcElementByEvent:function(a){a=a.target||a.srcElement;var c=d(a).parents().add(a);a=function(a){for(var b=0,e=c.length;b<e;b++)if("string"==typeof a){if(d(c[b]).hasClass(a))return c[b]}else if("object"==
typeof a&&c[b]==a)return c[b];return null};if(a("l-grid-editor"))return{editing:!0,editor:a("l-grid-editor")};if(-1==c.index(this.element))return this._isEditing(c)?{editing:!0}:{out:!0};var b=!1;if(c.hasClass("l-grid-detailpanel")&&this.detailrows)for(var g=0,h=this.detailrows.length;g<h;g++)if(-1!=c.index(this.detailrows[g])){b=!0;break}b={grid:a("l-panel"),indetail:b,frozen:a(this.gridview1[0])?!0:!1,header:a("l-panel-header"),gridheader:a("l-grid-header"),gridbody:a("l-grid-body"),total:a("l-panel-bar-total"),
popup:a("l-grid-popup"),toolbar:a("l-panel-bar")};b.gridheader&&(b.hrow=a("l-grid-hd-row"),b.hcell=a("l-grid-hd-cell"),b.hcelltext=a("l-grid-hd-cell-text"),b.checkboxall=a("l-grid-hd-cell-checkbox"),b.hcell&&(g=b.hcell.id.split("|")[2],b.column=this._columns[g]));b.gridbody&&(b.row=a("l-grid-row"),b.cell=a("l-grid-row-cell"),b.checkbox=a("l-grid-row-cell-btn-checkbox"),b.groupbtn=a("l-grid-group-togglebtn"),b.grouprow=a("l-grid-grouprow"),b.detailbtn=a("l-grid-row-cell-detailbtn"),b.detailrow=a("l-grid-detailpanel"),
b.totalrow=a("l-grid-totalsummary"),b.totalcell=a("l-grid-totalsummary-cell"),b.rownumberscell=d(b.cell).hasClass("l-grid-row-cell-rownumbers")?b.cell:null,b.detailcell=d(b.cell).hasClass("l-grid-row-cell-detail")?b.cell:null,b.checkboxcell=d(b.cell).hasClass("l-grid-row-cell-checkbox")?b.cell:null,b.treelink=a("l-grid-tree-link"),b.editor=a("l-grid-editor"),b.row&&(b.data=this._getRowByDomId(b.row.id)),b.cell&&(b.editing=d(b.cell).hasClass("l-grid-row-cell-editing")),b.editor&&(b.editing=!0),b.editing&&
(b.out=!1));b.toolbar&&(b.first=a("l-bar-btnfirst"),b.last=a("l-bar-btnlast"),b.next=a("l-bar-btnnext"),b.prev=a("l-bar-btnprev"),b.load=a("l-bar-btnload"),b.button=a("l-bar-button"));return b},_editorIncludeCotrols:function(a){if(!a||!a.length)return!1;if(this.editor&&this.editor.input){if(this._controlIncludeCotrols(this.editor.input,a))return!0}else if(this.editors)for(var b in this.editors)if(this.editors[b])for(var c in this.editors[b]){var d=this.editors[b][c];if(d&&d.input&&this._controlIncludeCotrols(d.input,
a))return!0}return!1},_controlIncludeCotrols:function(a,b){if(!a||!a.includeControls||!a.includeControls.length)return!1;for(var c=0;c<a.includeControls.length;c++)if(-1!=d.inArray(a.includeControls[c].id,b))return!0;return!1},_getOnePageHeight:function(){var a=this.options;return(parseFloat(a.rowHeight||24)+1)*parseInt(a.pageSize)},_setEvent:function(){var a=this,b=this.options;a.grid.bind("mousedown.grid",function(b){a._onMouseDown.call(a,b)});a.grid.bind("dblclick.grid",function(b){a._onDblClick.call(a,
b)});a.grid.bind("contextmenu.grid",function(b){return a._onContextmenu.call(a,b)});d(document).bind("mouseup.grid",function(b){a._onMouseUp.call(a,b)});d(document).bind("click.grid",function(b){a._onClick.call(a,b)});d(window).bind("resize.grid",function(b){a._onResize.call(a)});d(document).bind("keydown.grid",function(b){b.ctrlKey&&(a.ctrlKey=!0);a.eventsFun(b)});d(document).bind("keyup.grid",function(b){delete a.ctrlKey});a.gridbody.bind("scroll.grid",function(){var c=a.gridbody.scrollLeft(),d=
a.gridbody.scrollTop();null!=c&&(a.gridheader[0].scrollLeft=c);null!=d&&(a.f.gridbody[0].scrollTop=d);if(b.scrollToPage&&b.usePager&&!a.loading){var c=a.gridbody.find(".l-grid-body-inner:first").height(),e=d+a.gridbody.height();b.scrollToAppend?b.newPage!=b.pageCount&&e>=c&&a.reload(b.newPage+1,"scrollappend"):(c=e>=c?b.pageCount:Math.ceil(e/a._getOnePageHeight()),a.scrollLoading||(a.scrollLoading=!0,a.lastScrollTop=d,a.unbind("sysScrollLoaded"),a.bind("sysScrollLoaded",function(){a.gridbody.scrollTop(d);
setTimeout(function(){a.scrollLoading=!1},500)}),a.scrollLoading=!0,a.reload(c,"scroll")))}a.trigger("SysGridHeightChanged")});d("select",a.toolbar).change(function(){var c=b.dataChangedConfirm||confirm;if(a.isDataChanged&&"local"!=b.dataAction&&!c(b.isContinueByDataChanged))return!1;b.newPage=1;b.pageSize=this.value;b.localStorageName&&(window.localStorage[b.localStorageName+"PageSize"]=this.value);a.loadData("local"!=b.dataAction?b.where:!1)});d("span.pcontrol :text",a.toolbar).blur(function(b){a.changePage("input")});
d("div.l-bar-button",a.toolbar).hover(function(){d(this).addClass("l-bar-button-over")},function(){d(this).removeClass("l-bar-button-over")});d.fn.ligerDrag&&b.colDraggable&&(a.colDroptip=d("\x3cdiv class\x3d'l-drag-coldroptip' style\x3d'display:none'\x3e\x3cdiv class\x3d'l-drop-move-up'\x3e\x3c/div\x3e\x3cdiv class\x3d'l-drop-move-down'\x3e\x3c/div\x3e\x3c/div\x3e").appendTo("body"),a.gridheader.add(a.f.gridheader).ligerDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(b,c){b=a._getSrcElementByEvent(c);
if(b.hcell&&b.column)return b=d(".l-grid-hd-cell-text:first",b.hcell).html(),c=d("\x3cdiv class\x3d'l-drag-proxy' style\x3d'display:none'\x3e\x3cdiv class\x3d'l-drop-icon l-drop-no'\x3e\x3c/div\x3e\x3c/div\x3e").appendTo("body"),c.append(b),c},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default");a.children[this.id]=this},onStartDrag:function(b,c){if(2==c.button||a.colresizing)return!1;this.set("cursor","default");b=a._getSrcElementByEvent(c);if(!b.hcell||!b.column||b.column.issystem||
b.hcelltext||-1!=d(b.hcell).css("cursor").indexOf("resize"))return!1;this.draggingColumn=b.column;a.coldragging=!0;b=a.gridheader.offset();this.validRange={top:b.top,bottom:b.top+a.gridheader.height(),left:b.left-10,right:b.left+a.grid.width()+10}},onDrag:function(c,e){this.set("cursor","default");c=this.draggingColumn;if(!c||a.colresizing)return!1;null==a.colDropIn&&(a.colDropIn=-1);var f=e.pageX;e=e.pageY;var g=!1;a.grid.offset();var h=this.validRange;if(f<h.left||f>h.right||e>h.bottom||e<h.top)a.colDropIn=
-1,a.colDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no");else for(var q in a._columns)if(h=a._columns[q],c==h)g=!0;else if(!h.issystem){var r=h.__level!=c.__level?!1:g?!0:!1;c.frozen!=h.frozen&&(r=h.frozen?!1:!0);if(-1==a.colDropIn||a.colDropIn==q){var u=document.getElementById(h.__domid),t=d(u).offset(),v=t.top,w=t.top+d(u).height(),x=t.left-10,t=t.left+10;r&&(u=d(u).width(),x+=u,t+=u);if(f>x&&f<t&&e>v&&e<w){c=b.headerRowHeight;h.__rowSpan&&(c*=
h.__rowSpan);a.colDroptip.css({left:x+5,top:v-9,height:c+18}).show();a.colDropIn=q;a.colDropDir=r?"right":"left";this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no").addClass("l-drop-yes");break}else-1!=a.colDropIn&&(a.colDropIn=-1,a.colDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no"))}}},onStopDrag:function(b,c){b=this.draggingColumn;a.coldragging=!1;-1!=a.colDropIn&&(a.changeCol.ligerDefer(a,0,[b,a.colDropIn,"right"==a.colDropDir]),a.colDropIn=
-1);a.colDroptip.hide();this.set("cursor","default")}}));if(d.fn.ligerDrag&&b.rowDraggable){a.rowDroptip=d("\x3cdiv class\x3d'l-drag-rowdroptip' style\x3d'display:none'\x3e\x3c/div\x3e").appendTo("body");var f;f=a.options.rownumbers?".l-grid-row-cell-rownumbers":a.enabledDetail()?".l-grid-row-cell-detail":a.enabledCheckbox()?".l-grid-row-cell-checkbox":".l-grid-row-cell";a.gridbody.add(a.f.gridbody).ligerDrag({revert:!0,animate:!1,bindElem:f,proxyX:0,proxyY:0,proxy:function(c,e){if(a._getSrcElementByEvent(e).row)return e=
b.draggingMessage.replace(/{count}/,c.draggingRows?c.draggingRows.length:1),b.rowDraggingRender&&(e=b.rowDraggingRender(c.draggingRows,c,a)),d("\x3cdiv class\x3d'l-drag-proxy' style\x3d'display:none'\x3e\x3cdiv class\x3d'l-drop-icon l-drop-no'\x3e\x3c/div\x3e"+e+"\x3c/div\x3e").appendTo("body")},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default");a.children[this.id]=this},onStartDrag:function(b,c){if(2==c.button||a.colresizing||!a.columns.length)return!1;this.set("cursor",
"default");b=a._getSrcElementByEvent(c);if(!b.cell||!b.data||b.checkbox)return!1;c=b.cell.id.split("|");c=a._columns[c[c.length-1]];if(b.rownumberscell||b.detailcell||b.checkboxcell||c==a.columns[0]){if(a.enabledCheckbox()){if(this.draggingRows=a.getSelecteds(),!this.draggingRows||!this.draggingRows.length)return!1}else this.draggingRows=[b.data];this.draggingRow=b.data;this.set("cursor","move");a.rowdragging=!0;this.validRange={top:a.gridbody.offset().top,bottom:a.gridbody.offset().top+a.gridbody.height(),
left:a.grid.offset().left-10,right:a.grid.offset().left+a.grid.width()+10}}else return!1},onDrag:function(c,e){c=this.draggingRow;if(!c)return!1;var f=this.draggingRows?this.draggingRows:[c];if(a.colresizing)return!1;null==a.rowDropIn&&(a.rowDropIn=-1);var g=e.pageX;e=e.pageY;var h=!1,q=this.validRange;if(g<q.left||g>q.right||e>q.bottom||e<q.top)a.rowDropIn=-1,a.rowDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no");else for(var r in a.rows){var u=
a.rows[r],q=u.__id;c==u&&(h=!0);if(-1==d.inArray(u,f)&&(u=h?!0:!1,-1==a.rowDropIn||a.rowDropIn==q)){var t=a.getRowObj(q),v=d(t).offset(),w=v.top-4,x=v.top+d(t).height()+4,z=a.grid.offset().left,y=a.grid.offset().left+a.grid.width();if(g>z&&g<y&&e>w&&e<x){r=v.top;u&&(r+=d(t).height());a.rowDroptip.css({left:z,top:r,width:y-z}).show();a.rowDropIn=q;a.rowDropDir=u?"bottom":"top";b.tree&&e>w+5&&e<x-5?(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add"),a.rowDroptip.hide(),
a.rowDropInParent=!0):(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes"),a.rowDroptip.show(),a.rowDropInParent=!1);break}else-1!=a.rowDropIn&&(a.rowDropIn=-1,a.rowDropInParent=!1,a.rowDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no"))}}},onStopDrag:function(c,e){c=this.draggingRows;a.rowdragging=!1;for(e=0;e<c.length;e++){var f=c[e].children;f&&(c=d.grep(c,function(a,b){return-1==d.inArray(a,
f)}))}if(-1!=a.rowDropIn){if(b.tree){var g,h;a.rowDropInParent?h=a.getRow(a.rowDropIn):(g=a.getRow(a.rowDropIn),h=a.getParent(g));a.appendRange(c,h,g,"bottom"!=a.rowDropDir);a.trigger("rowDragDroped",{rows:c,parent:h,near:g,after:"bottom"==a.rowDropDir})}else a.moveRange(c,a.rowDropIn,"bottom"==a.rowDropDir),a.trigger("rowDragDroped",{rows:c,parent:h,near:a.getRow(a.rowDropIn),after:"bottom"==a.rowDropDir});a.rowDropIn=-1}a.rowDroptip.hide();this.set("cursor","default")}})}},_onRowOver:function(a,
e){if(!b.draggable.dragging){var c=this.options;a=this.getRow(a);var g=e?"addClass":"removeClass";e&&this.editor.editing&&d("tr."+c.mouseoverRowCssClass,this.gridview).removeClass(c.mouseoverRowCssClass);if(this.enabledFrozen())d(this.getRowObj(a,!0))[g](c.mouseoverRowCssClass);d(this.getRowObj(a,!1))[g](c.mouseoverRowCssClass)}},_onMouseUp:function(a){if(b.draggable.dragging){var c=this._getSrcElementByEvent(a);c.hcell&&c.column?this.trigger("dragdrop",[{type:"header",column:c.column,cell:c.hcell},
a]):c.row&&this.trigger("dragdrop",[{type:"row",record:c.data,row:c.row},a])}},_onMouseDown:function(a){},_onContextmenu:function(a){var b=this.options,c=this._getSrcElementByEvent(a);if(c.row){if(b.whenRClickToSelect&&this.select(c.data),this.hasBind("contextmenu"))return this.trigger("contextmenu",[{data:c.data,rowindex:c.data.__index,row:c.row},a])}else if(c.hcell){if(!b.allowHideColumn)return!0;b=d(c.hcell).attr("columnindex");if(void 0==b)return!0;a=a.pageX-this.body.offset().left+parseInt(this.body[0].scrollLeft);
b==this.columns.length-1&&(a-=50);b=.7*d(this.element).height();this.popup.css({left:a,top:this.gridheader.height()+1,height:120>b?"120":b});this.popup.toggle();return!1}},_onContextmenuDrop:function(){var a=this;a.menuDroptip=0==a.popup.find(".l-drag-rowdroptip").length?d("\x3cdiv class\x3d'l-drag-rowdroptip' style\x3d'display:none'\x3e\x3c/div\x3e").appendTo(a.popup):a.popup.find(".l-drag-rowdroptip");a.popup.ligerDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(b,c){b=d(c.target,a.popup).html();
c=d("\x3cdiv class\x3d'l-drag-proxy' style\x3d'display:none'\x3e\x3cdiv class\x3d'l-drop-icon l-drop-no'\x3e\x3c/div\x3e\x3c/div\x3e").appendTo("body");c.append(b);return c},onStartDrag:function(b,c){b=a.popup.offset();c=d(c.target,a.popup);if(!c.hasClass("l-column-right")&&!c.parent().hasClass("l-column-right"))return!1;this.draggingColumn=a.getColumn(parseInt(c.parents("tr").eq(0).find(".l-hidden").attr("columnindex")));this.validRange={top:b.top,bottom:b.top+a.popup.height(),left:b.left-10,right:b.left+
a.popup.width()+10}},onDrag:function(b,c){b=this.draggingColumn;if(!b)return!1;null==a.menuDropIn&&(a.menuDropIn=-1);var e=c.pageX;c=c.pageY;var f=this.validRange;if(e<f.left||e>f.right||c>f.bottom||c<f.top)a.menuDropIn=-1,a.menuDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no");else for(var k=0,m=d("tr",a.popup).length;k<m;k++)if(f=d("tr",a.popup).eq(k),a.getColumn(parseInt(f.find(".l-hidden").attr("columnindex")))!=b){var n=f.offset(),q=n.top,r=
n.top+10,u=n.left-10,n=n.left+f.width(),t=f.height(),q=q+t,r=r+t;if(e>u&&e<n&&c>q&&c<r){b=q-a.popup.find("table").offset().top;a.menuDroptip.css({top:b,width:f.width()}).show();a.menuDropIn=a.getColumn(parseInt(f.find(".l-hidden").attr("columnindex"))).__id;this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add");break}else-1!=a.colDropIn&&(a.menuDropIn=-1,a.menuDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no"))}},
onStopDrag:function(b,c){if(-1!=a.menuDropIn){b=this.draggingColumn;c=a.getColumn(a.menuDropIn);var d=!1;b==c&&(d=!0);d=c.__level!=b.__level?!1:d?!0:!1;b.frozen!=c.frozen&&(d=c.frozen?!1:!0);a.changeCol.ligerDefer(a,0,[b,a.menuDropIn,"right"==(d?"right":"left")]);a.menuDropIn=-1}a.menuDroptip.hide();this.set("cursor","default")}})},_onDblClick:function(a){a=this._getSrcElementByEvent(a);!a.row||a.treelink||a.checkbox||a.checkboxcell||a.detailbtn||a.detailcell||this.trigger("dblClickRow",[a.data,a.data.__id,
a.row,a.cell])},_onClick:function(a){var b=a.target||a.srcElement,c=this,g=this.options;a=c._getSrcElementByEvent(a);if(a.out)c.editor.editing&&!d.ligerui.win.masking&&c.endEdit(),g.allowHideColumn&&c.popup.hide();else if(!a.indetail&&!a.editing)if(c.editor.editing&&c.endEdit(),g.allowHideColumn&&(a.popup||c.popup.hide()),a.checkboxall){var b=d(a.hrow),h=b.hasClass("l-checked");if(0==c.trigger("beforeCheckAllRow",[!h,c.element]))return!1;h?b.removeClass("l-checked"):b.addClass("l-checked");c.selected=
[];for(var k in c.records)h?c.unselect(c.records[k]):c.select(c.records[k]);c.trigger("checkAllRow",[!h,c.element])}else if(a.hcelltext){if(k=d(a.hcelltext).parent().parent(),g.enabledSort&&a.column&&0!=a.column.isSort&&(b=g.dataChangedConfirm||confirm,!g.url||"local"==g.dataAction||!c.isDataChanged||b(g.isContinueByDataChanged)))if(g=d(".l-grid-hd-cell-sort:first",k),b=a.column.sortname||a.column.name)0<g.length?g.hasClass("l-grid-hd-cell-sort-asc")?(g.removeClass("l-grid-hd-cell-sort-asc").addClass("l-grid-hd-cell-sort-desc"),
k.removeClass("l-grid-hd-cell-asc").addClass("l-grid-hd-cell-desc"),c.trigger("ChangeSort",[b,"desc"]),c.changeSort(b,"desc")):g.hasClass("l-grid-hd-cell-sort-desc")&&(g.removeClass("l-grid-hd-cell-sort-desc").addClass("l-grid-hd-cell-sort-asc"),k.removeClass("l-grid-hd-cell-desc").addClass("l-grid-hd-cell-asc"),c.trigger("ChangeSort",[b,"asc"]),c.changeSort(b,"asc")):(k.removeClass("l-grid-hd-cell-desc").addClass("l-grid-hd-cell-asc"),d(a.hcelltext).after("\x3cspan class\x3d'l-grid-hd-cell-sort l-grid-hd-cell-sort-asc'\x3e\x26nbsp;\x26nbsp;\x3c/span\x3e"),
c.trigger("ChangeSort",[b,"asc"]),c.changeSort(b,"asc")),d(".l-grid-hd-cell-sort",c.gridheader).add(d(".l-grid-hd-cell-sort",c.f.gridheader)).not(d(".l-grid-hd-cell-sort:first",k)).remove()}else if(a.detailbtn&&g.detail)if(h=a.data,b=d([c.getRowObj(h,!1)]),c.enabledFrozen()&&(b=b.add(c.getRowObj(h,!0))),k=h.__id,d(a.detailbtn).hasClass("l-open")){if(g.detail.onCollapse)g.detail.onCollapse(h,d(".l-grid-detailpanel-inner:first",m)[0]);b.next("tr.l-grid-detailpanel").hide();d(a.detailbtn).removeClass("l-open")}else{var m=
b.next("tr.l-grid-detailpanel");if(0<m.length){m.show();if(g.detail.onExtend)g.detail.onExtend(h,d(".l-grid-detailpanel-inner:first",m)[0]);d(a.detailbtn).addClass("l-open")}else{d(a.detailbtn).addClass("l-open");for(m=a=0;m<c.columns.length;m++)c.columns[m].frozen&&a++;var m=d("\x3ctr class\x3d'l-grid-detailpanel'\x3e\x3ctd\x3e\x3cdiv class\x3d'l-grid-detailpanel-inner' style\x3d'display:none'\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e"),n=d("\x3ctr class\x3d'l-grid-detailpanel'\x3e\x3ctd\x3e\x3cdiv class\x3d'l-grid-detailpanel-inner' style\x3d'display:none'\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e");
m.find("div:first").width(c.gridheader.find("div:first").width()-50);m.attr("id",c.id+"|detail|"+k);c.detailrows=c.detailrows||[];c.detailrows.push(m[0]);c.detailrows.push(n[0]);k=d("div:first",m);k.parent().attr("colSpan",c.columns.length-a);b.eq(0).after(m);0<a&&(n.find("td:first").attr("colSpan",a),b.eq(1).after(n));g.detail.onShowDetail?(g.detail.onShowDetail(h,k[0],function(){c.trigger("SysGridHeightChanged")}),d("div:first",n).add(k).show().height(g.detail.height||g.detailHeight)):g.detail.render&&
(k.append(g.detail.render()),k.show())}c.trigger("SysGridHeightChanged")}else if(a.groupbtn){k=d(a.grouprow);g=!0;d(a.groupbtn).hasClass("l-grid-group-togglebtn-close")?(d(a.groupbtn).removeClass("l-grid-group-togglebtn-close"),k.hasClass("l-grid-grouprow-last")&&d("td:first",k).width("auto")):(g=!1,d(a.groupbtn).addClass("l-grid-group-togglebtn-close"),k.hasClass("l-grid-grouprow-last")&&d("td:first",k).width(c.gridtablewidth));for(a=k.next(".l-grid-row,.l-grid-totalsummary-group,.l-grid-detailpanel");0!=
a.length;)g?(a.show(),a.hasClass("l-grid-detailpanel")&&!a.prev().find("td.l-grid-row-cell-detail:first span.l-grid-row-cell-detailbtn:first").hasClass("l-open")&&a.hide()):a.hide(),a=a.next(".l-grid-row,.l-grid-totalsummary-group,.l-grid-detailpanel");c.trigger(g?"groupExtend":"groupCollapse");c.trigger("SysGridHeightChanged")}else if(a.treelink)c.toggle(a.data);else if(a.row&&c.enabledCheckbox()){if(k=g.selectRowButtonOnly?!0:!1,g.enabledEdit&&(k=!0),"a"!=b.tagName.toLowerCase()){if((a.checkbox||
!k)&&0!=g.selectable){b=d(a.row);h=b.hasClass("l-selected");if(0==c.trigger("beforeCheckRow",[!h,a.data,a.data.__id,a.row]))return!1;k=h?"unselect":"select";c[k](a.data);if(g.tree&&g.autoCheckChildren)for(b=c.getChildren(a.data,!0),m=0,n=b.length;m<n;m++)c[k](b[m]);c.trigger("checkRow",[!h,a.data,a.data.__id,a.row])}!a.checkbox&&a.cell&&g.enabledEdit&&g.clickToEdit&&c._applyEditor(a.cell)}}else if(a.row&&!c.enabledCheckbox()&&0!=g.selectable)a.cell&&g.enabledEdit&&g.clickToEdit&&c._applyEditor(a.cell),
d(a.row).hasClass("l-selected")?g.allowUnSelectRow?c.unselect(a.data):d(a.row).addClass("l-selected-again"):c.select(a.data);else if(a.toolbar)if(a.first){if(0==c.trigger("toFirst",[c.element]))return!1;c.changePage("first")}else if(a.prev){if(0==c.trigger("toPrev",[c.element]))return!1;c.changePage("prev")}else if(a.next){if(0==c.trigger("toNext",[c.element]))return!1;c.changePage("next")}else if(a.last){if(0==c.trigger("toLast",[c.element]))return!1;c.changePage("last")}else if(a.load){if(d("span",
a.load).hasClass("l-disabled")||0==c.trigger("reload",[c.element]))return!1;b=g.dataChangedConfirm||confirm;if(g.url&&c.isDataChanged&&!b(g.isContinueByDataChanged))return!1;c.loadData(g.where)}},select:function(a){var b=this.options;a=this.getRow(a);var c=a.__id,g=this.getRowObj(c);if(b.rowSelectable&&0!=this.trigger("beforeSelectRow",[a,c,g])){var h=this.getRowObj(c,!0);if(!this.enabledCheckbox()&&!this.ctrlKey||b.isSingleCheck){for(var k in this.selected)b=this.selected[k],b.__id in this.records&&
(d(this.getRowObj(b)).removeClass("l-selected l-selected-again"),this.enabledFrozen()&&d(this.getRowObj(b,!0)).removeClass("l-selected l-selected-again"));this.selected=[]}g&&d(g).addClass("l-selected");h&&d(h).addClass("l-selected");this.selected[this.selected.length]=a;this.trigger("selectRow",[a,c,g])}},unselect:function(a){a=this.getRow(a);var b=a.__id,c=this.getRowObj(b),g=this.getRowObj(b,!0);d(c).removeClass("l-selected l-selected-again");this.enabledFrozen()&&d(g).removeClass("l-selected l-selected-again");
this._removeSelected(a);this.trigger("unSelectRow",[a,b,c])},isSelected:function(a){a=this.getRow(a);for(var b in this.selected)if(this.selected[b]==a)return!0;return!1},arrayToTree:function(a,b,d){function c(a){"string"==typeof a&&(a=a.replace(/[.]/g,"").toLowerCase());return a}var e=this.options,f="children";e.tree&&(f=e.tree.childrenName);if(!a||!a.length)return[];for(var e=[],m={},n=a.length,q=0;q<n;q++){var r=a[q],u=c(r[b]);m[u]=r}for(q=0;q<n;q++)b=a[q],u=c(b[d]),(u=m[u])?(u[f]=u[f]||[],u[f].push(b)):
e.push(b);return e},_onResize:function(){var a=this.options;if(a.height&&"auto"!=a.height){var b=d(window).height(),f;if("string"==typeof a.height&&0<a.height.indexOf("%")){var g=this.grid.parent();if(a.inWindow)if(a.inWindowComplete)f=b*parseInt(a.height)*.01;else{if(f=(b-parseInt(d("body").css("paddingTop"))-parseInt(d("body").css("paddingBottom")))*parseInt(a.height)*.01,a.inWindow||"body"==g[0].tagName.toLowerCase())f-=this.grid.offset().top-d("body").offset().top-parseInt(d("body").css("paddingTop"))}else f=
g.height()*parseInt(a.height)*.01}else f=parseInt(a.height);f+=a.heightDiff;this.windowHeight=b;this._setHeight(f)}else this._updateHorizontalScrollStatus.ligerDefer(this,10);this.enabledFrozen()&&(a=this.gridview1.width(),b=this.gridview.width(),0>=b-a?this.gridview2.css({width:"auto"}):this.gridview2.css({width:b-a}));this.trigger("SysGridHeightChanged")},showFilter:function(){var a=this;if(a.winfilter)a.winfilter.show();else{var b=d('\x3cdiv id\x3d"'+a.id+'_filtercontainer"\x3e\x3c/div\x3e').width(380).height(120).hide(),
f=b.ligerFilter({fields:function(){var b=[];d(a.columns).each(function(){var a={name:this.name,display:this.display},c="date"==this.type;if("int"==this.type||"number"==this.type||"float"==this.type)a.type="number";c&&(a.type="date");this.editor&&(a.editor=this.editor);b.push(a)});return b}()});f.addRule(d(f.element.firstChild));return a.winfilter=d.ligerDialog.open({width:420,height:208,target:b,isResize:!0,top:50,buttons:[{text:"确定",onclick:function(b,c){b=f.getData();"server"==a.options.dataType?
(b&&b.rules&&b.rules.length?a.setParm("where",JSON.stringify(b)):a.removeParm("where"),a.loadData()):a.loadData(d.ligerFilter.getFilterFunction(b));c.hide()}},{text:"取消",onclick:function(a,b){b.hide()}}]})}},endEditToPrev:function(){var a=this.editor,b=null,f=null;if(a){var g=function(){return f.parent("tr").prev(".l-grid-row").find("td:last")},a=a.editParm;d.inArray(a.column,this.columns);a=this.getCellObj(a.record,a.column);f=d(a);b=f.prev();b.length||(b=g());if(b.length)for(;!this._enabledEditByCell(b.get(0));)f=
b,b=f.prev(),b.length||(b=g())}this.endEdit();b&&b.length&&this._applyEditor(b.get(0))},endEditToPrevRow:function(){var a=this.editor,b=null;if(a){var a=a.editParm,f=a.rowindex;if(0>=f)return;b=this.getCellObj(a.record,a.column);d(b);b=d(this.getCellObj(this.getRow(f-1),a.column));for(f--;!this._enabledEditByCell(b.get(0));)b=d(this.getCellObj(this.getRow(f-1),a.column)),f--}this.endEdit();b&&b.length&&this._applyEditor(b.get(0))},endEditToNextRow:function(){var a=this.editor,b=null;if(a){var a=a.editParm,
f=a.rowindex;if(f>=this.rows.length-1)return;b=this.getCellObj(a.record,a.column);d(b);b=d(this.getCellObj(this.getRow(f+1),a.column));for(f++;!this._enabledEditByCell(b.get(0));)b=d(this.getCellObj(this.getRow(f+1),a.column)),f++}this.endEdit();b&&b.length&&this._applyEditor(b.get(0))},eventsFun:function(a){if(this.editor.editing){var b=a||window.e||arguments.callee.caller.arguments[0];switch(b.keyCode){case 9:b.shiftKey?this.endEditToPrev():this.endEditToNext();b.preventDefault();b.stopPropagation();
break;case 13:b.shiftKey?this.endEditToPrevRow():this.endEditToNextRow(),b.preventDefault(),b.stopPropagation()}}},useColumnLocalStorage:function(){var a=this.options,b={},d=a.columns.map(function(a,c){var d=a.storageName||a.name;b[d]=a;return{name:d,index:c,hide:a.hide,width:a.width,frozen:a.frozen}});if(localStorage[a.localStorageName]){var g={};JSON.parse(localStorage[a.localStorageName]).forEach(function(a,b){a.index||(a.index=b);g[a.name]=a});d.forEach(function(a,b){var c=g[a.name];c?(a.index=
null==c.index||void 0==c.index?a.index:c.index,a.width=c.width||a.width,a.hide=c.hide||a.hide):a.index=b});d.sort(function(a,b){return a.index-b.index});var h=d.map(function(a,c){a.index=c;c=b[a.name];c.width=a.width;c.hide=a.hide;return c});this.setColumnLocalStorage(d);a.columns=h}else this.setColumnLocalStorage(d)},setColumnLocalStorage:function(a){var b=this.options;try{window.localStorage.setItem(b.localStorageName,JSON.stringify(a))}catch(f){console.error(f)}},clearLocalStorage:function(){var a=
this.options;try{a.columns=Object.assign([],a.optionsColumns),this._setColumns(),this.loadData()}catch(e){console.error(e)}},_addClearStorageButton:function(){var a=this;a.toolbar.children().children().last().before('\x3cdiv class\x3d"l-bar-group" title\x3d"还原设置"\x3e\x3cdiv class\x3d"l-bar-button l-bar-clear-storage"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e').prev().on("click",function(){window.confirm("你确定要还原表格顺序吗？")&&a.clearLocalStorage()})}});d.ligerui.controls.Grid.prototype.enabledTotal=
d.ligerui.controls.Grid.prototype.isTotalSummary;d.ligerui.controls.Grid.prototype.add=d.ligerui.controls.Grid.prototype.addRow;d.ligerui.controls.Grid.prototype.update=d.ligerui.controls.Grid.prototype.updateRow;d.ligerui.controls.Grid.prototype.append=d.ligerui.controls.Grid.prototype.appendRow;d.ligerui.controls.Grid.prototype.getSelected=d.ligerui.controls.Grid.prototype.getSelectedRow;d.ligerui.controls.Grid.prototype.getSelecteds=d.ligerui.controls.Grid.prototype.getSelectedRows;d.ligerui.controls.Grid.prototype.getCheckedRows=
d.ligerui.controls.Grid.prototype.getSelectedRows;d.ligerui.controls.Grid.prototype.getCheckedRowObjs=d.ligerui.controls.Grid.prototype.getSelectedRowObjs;d.ligerui.controls.Grid.prototype.setOptions=d.ligerui.controls.Grid.prototype.set;d.ligerui.controls.Grid.prototype.reload=d.ligerui.controls.Grid.prototype.loadData;d.ligerui.controls.Grid.prototype.refreshSize=d.ligerui.controls.Grid.prototype._onResize;d.ligerui.controls.Grid.prototype.append=d.ligerui.controls.Grid.prototype.appendRange})(jQuery);
(function(d){d.fn.ligerLayout=function(a){return d.ligerui.run.call(this,"ligerLayout",arguments)};d.fn.ligerGetLayoutManager=function(){return d.ligerui.run.call(this,"ligerGetLayoutManager",arguments)};d.ligerDefaults.Layout={topHeight:50,bottomHeight:50,leftWidth:110,centerWidth:300,rightWidth:170,centerBottomHeight:100,allowCenterBottomResize:!0,inWindow:!0,heightDiff:0,height:"100%",onHeightChanged:null,isLeftCollapse:!1,isRightCollapse:!1,allowLeftCollapse:!0,allowRightCollapse:!0,allowLeftResize:!0,
allowRightResize:!0,allowTopResize:!0,allowBottomResize:!0,space:3,onEndResize:null,minLeftWidth:80,minRightWidth:80,onLeftToggle:null,onRightToggle:null};d.ligerMethos.Layout={};d.ligerui.controls.Layout=function(a,b){d.ligerui.controls.Layout.base.constructor.call(this,a,b)};d.ligerui.controls.Layout.ligerExtend(d.ligerui.core.UIComponent,{__getType:function(){return"Layout"},__idPrev:function(){return"Layout"},_extendMethods:function(){return d.ligerMethos.Layout},_init:function(){d.ligerui.controls.Layout.base._init.call(this);
var a=this.options;null!=a.InWindow&&null==a.inWindow&&(a.inWindow=a.InWindow)},_render:function(){var a=this,b=this.options;a.layout=d(this.element);a.layout.addClass("l-layout");a.width=a.layout.width();var c;0<d("\x3e div[position\x3dtop]",a.layout).length&&(a.top=d("\x3e div[position\x3dtop]",a.layout).wrap('\x3cdiv class\x3d"l-layout-top" style\x3d"top:0px;"\x3e\x3c/div\x3e').parent(),a.top.content=d("\x3e div[position\x3dtop]",a.top),(c=a.top.content.attr("parent-class"))&&a.top.addClass(c),
a.top.content.hasClass("l-layout-content")||a.top.content.addClass("l-layout-content"),a.topHeight=b.topHeight,a.topHeight&&a.top.height(a.topHeight));0<d("\x3e div[position\x3dbottom]",a.layout).length&&(a.bottom=d("\x3e div[position\x3dbottom]",a.layout).wrap('\x3cdiv class\x3d"l-layout-bottom"\x3e\x3c/div\x3e').parent(),a.bottom.content=d("\x3e div[position\x3dbottom]",a.bottom),(c=a.bottom.content.attr("parent-class"))&&a.bottom.addClass(c),a.bottom.content.hasClass("l-layout-content")||a.bottom.content.addClass("l-layout-content"),
a.bottomHeight=b.bottomHeight,a.bottomHeight&&a.bottom.height(a.bottomHeight),c=a.bottom.content.attr("title"))&&(a.bottom.header=d('\x3cdiv class\x3d"l-layout-header"\x3e\x3c/div\x3e'),a.bottom.prepend(a.bottom.header),a.bottom.header.html(c),a.bottom.content.attr("title",""));if(0<d("\x3e div[position\x3dleft]",a.layout).length)if(a.left=d("\x3e div[position\x3dleft]",a.layout).wrap('\x3cdiv class\x3d"l-layout-left" style\x3d"left:0px;"\x3e\x3c/div\x3e').parent(),a.left.content=d("\x3e div[position\x3dleft]",
a.left),(c=a.left.content.attr("parent-class"))&&a.left.addClass(c),a.left.content.hasClass("l-layout-content")||a.left.content.addClass("l-layout-content"),a.leftWidth=b.leftWidth,a.leftWidth&&a.left.width(a.leftWidth),a.left.content.attr("hidetitle"))a.left.content.attr("title","");else if(a.left.header=d('\x3cdiv class\x3d"l-layout-header"\x3e'+(b.allowLeftCollapse?'\x3cdiv class\x3d"l-layout-header-toggle"\x3e\x3c/div\x3e':"")+'\x3cdiv class\x3d"l-layout-header-inner"\x3e\x3c/div\x3e\x3c/div\x3e'),
a.left.prepend(a.left.header),b.allowLeftCollapse&&(a.left.header.toggle=d(".l-layout-header-toggle",a.left.header)),c=a.left.content.attr("title"))a.left.content.attr("title",""),d(".l-layout-header-inner",a.left.header).html(c);if(0<d("\x3e div[position\x3dcenter]",a.layout).length){a.center=d("\x3e div[position\x3dcenter]",a.layout).wrap('\x3cdiv class\x3d"l-layout-center" \x3e\x3c/div\x3e').parent();a.center.content=d("\x3e div[position\x3dcenter]",a.center);(c=a.center.content.attr("parent-class"))&&
a.center.addClass(c);a.center.content.addClass("l-layout-content");if(c=a.center.content.attr("title"))a.center.content.attr("title",""),a.center.header=d('\x3cdiv class\x3d"l-layout-header"\x3e\x3c/div\x3e'),a.center.prepend(a.center.header),a.center.header.html(c);a.center.content.attr("hidetitle")&&(a.center.content.attr("title",""),a.center.header.remove());a.centerWidth=b.centerWidth;a.centerWidth&&a.center.width(a.centerWidth);if(0<d("\x3e div[position\x3dcenterbottom]",a.layout).length){a.centerBottom=
d("\x3e div[position\x3dcenterbottom]",a.layout).wrap('\x3cdiv class\x3d"l-layout-centerbottom" \x3e\x3c/div\x3e').parent();a.centerBottom.content=d("\x3e div[position\x3dcenterbottom]",a.centerBottom);(c=a.centerBottom.content.attr("parent-class"))&&a.centerBottom.addClass(c);a.centerBottom.content.addClass("l-layout-content");if(c=a.centerBottom.content.attr("title"))a.centerBottom.content.attr("title",""),a.centerBottom.header=d('\x3cdiv class\x3d"l-layout-header"\x3e\x3c/div\x3e'),a.centerBottom.prepend(a.centerBottom.header),
a.centerBottom.header.html(c);a.centerBottom.content.attr("hidetitle")&&(a.centerBottom.content.attr("title",""),a.centerBottom.header&&a.centerBottom.header.remove());a.centerWidth&&a.centerBottom.width(a.centerWidth)}}if(0<d("\x3e div[position\x3dright]",a.layout).length){a.right=d("\x3e div[position\x3dright]",a.layout).wrap('\x3cdiv class\x3d"l-layout-right"\x3e\x3c/div\x3e').parent();a.right.header=d('\x3cdiv class\x3d"l-layout-header"\x3e\x3cdiv class\x3d"l-layout-header-toggle"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-layout-header-inner"\x3e\x3c/div\x3e\x3c/div\x3e');
a.right.prepend(a.right.header);a.right.header.toggle=d(".l-layout-header-toggle",a.right.header);b.allowRightCollapse||d(".l-layout-header-toggle",a.right.header).remove();a.right.content=d("\x3e div[position\x3dright]",a.right);(c=a.right.content.attr("parent-class"))&&a.right.addClass(c);a.right.content.hasClass("l-layout-content")||a.right.content.addClass("l-layout-content");if(c=a.right.content.attr("title"))a.right.content.attr("title",""),d(".l-layout-header-inner",a.right.header).html(c);
a.right.content.attr("hidetitle")&&(a.right.content.attr("title",""),a.right.header.remove());a.rightWidth=b.rightWidth;a.rightWidth&&a.right.width(a.rightWidth)}a.layout.lock=d("\x3cdiv class\x3d'l-layout-lock'\x3e\x3c/div\x3e");a.layout.append(a.layout.lock);a._addDropHandle();a.isLeftCollapse=b.isLeftCollapse;a.isRightCollapse=b.isRightCollapse;a.leftCollapse=d('\x3cdiv class\x3d"l-layout-collapse-left '+(a.left&&a.left.content.attr("collapse-class")||"")+'" style\x3d"display: none; "\x3e\x3cdiv class\x3d"l-layout-collapse-left-toggle"\x3e\x3c/div\x3e\x3c/div\x3e');
a.rightCollapse=d('\x3cdiv class\x3d"l-layout-collapse-right '+(a.right&&a.right.content.attr("collapse-class")||"")+'" style\x3d"display: none; "\x3e\x3cdiv class\x3d"l-layout-collapse-right-toggle"\x3e\x3c/div\x3e\x3c/div\x3e');a.layout.append(a.leftCollapse).append(a.rightCollapse);a.leftCollapse.toggle=d("\x3e .l-layout-collapse-left-toggle",a.leftCollapse);a.rightCollapse.toggle=d("\x3e .l-layout-collapse-right-toggle",a.rightCollapse);a._setCollapse();a._bulid();d(window).resize(function(){a._onResize()});
a.set(b);a.mask.height(a.layout.height())},setLeftCollapse:function(a){if(!this.left)return!1;(this.isLeftCollapse=a)?(this.leftCollapse.show(),this.leftDropHandle&&this.leftDropHandle.hide(),this.left.hide()):(this.leftCollapse.hide(),this.leftDropHandle&&this.leftDropHandle.show(),this.left.show());this._onResize();this.trigger("leftToggle",[a])},setRightCollapse:function(a){if(!this.right)return!1;this.isRightCollapse=a;this._onResize();this.isRightCollapse?(this.rightCollapse.show(),this.rightDropHandle&&
this.rightDropHandle.hide(),this.right.hide()):(this.rightCollapse.hide(),this.rightDropHandle&&this.rightDropHandle.show(),this.right.show());this._onResize();this.trigger("rightToggle",[a])},_bulid:function(){var a=this,b=this.options;d("\x3e .l-layout-left .l-layout-header,\x3e .l-layout-right .l-layout-header",a.layout).hover(function(){d(this).addClass("l-layout-header-over")},function(){d(this).removeClass("l-layout-header-over")});d(".l-layout-header-toggle",a.layout).hover(function(){d(this).addClass("l-layout-header-toggle-over")},
function(){d(this).removeClass("l-layout-header-toggle-over")});d(".l-layout-header-toggle",a.left).click(function(){a.setLeftCollapse(!0)});d(".l-layout-header-toggle",a.right).click(function(){a.setRightCollapse(!0)});d("[data-action\x3d'toggle-left']",a.left).click(function(){a.setLeftCollapse(!0)});d("[data-action\x3d'toggle-right']",a.right).click(function(){a.setRightCollapse(!0)});a.middleTop=0;a.top&&(a.middleTop+=a.top.height(),a.middleTop+=parseInt(a.top.css("borderTopWidth")),a.middleTop+=
parseInt(a.top.css("borderBottomWidth")),a.middleTop+=b.space);a.left&&(a.left.css({top:a.middleTop}),a.leftCollapse.css({top:a.middleTop}));a.center&&a.center.css({top:a.middleTop});a.right&&(a.right.css({top:a.middleTop}),a.rightCollapse.css({top:a.middleTop}));a.left&&a.left.css({left:0});a._onResize();a._onResize()},_setCollapse:function(){var a=this;a.leftCollapse.hover(function(){d(this).addClass("l-layout-collapse-left-over")},function(){d(this).removeClass("l-layout-collapse-left-over")});
a.leftCollapse.toggle.hover(function(){d(this).addClass("l-layout-collapse-left-toggle-over")},function(){d(this).removeClass("l-layout-collapse-left-toggle-over")});a.rightCollapse.hover(function(){d(this).addClass("l-layout-collapse-right-over")},function(){d(this).removeClass("l-layout-collapse-right-over")});a.rightCollapse.toggle.hover(function(){d(this).addClass("l-layout-collapse-right-toggle-over")},function(){d(this).removeClass("l-layout-collapse-right-toggle-over")});a.leftCollapse.toggle.click(function(){a.setLeftCollapse(!1)});
a.rightCollapse.toggle.click(function(){a.setRightCollapse(!1)});a.left&&a.isLeftCollapse&&(a.leftCollapse.show(),a.leftDropHandle&&a.leftDropHandle.hide(),a.left.hide());a.right&&a.isRightCollapse&&(a.rightCollapse.show(),a.rightDropHandle&&a.rightDropHandle.hide(),a.right.hide())},_addDropHandle:function(){var a=this,b=this.options;a.left&&b.allowLeftResize&&(a.leftDropHandle=d("\x3cdiv class\x3d'l-layout-drophandle-left'\x3e\x3c/div\x3e"),a.layout.append(a.leftDropHandle),a.leftDropHandle&&a.leftDropHandle.show(),
a.leftDropHandle.mousedown(function(b){a._start("leftresize",b)}));a.right&&b.allowRightResize&&(a.rightDropHandle=d("\x3cdiv class\x3d'l-layout-drophandle-right'\x3e\x3c/div\x3e"),a.layout.append(a.rightDropHandle),a.rightDropHandle&&a.rightDropHandle.show(),a.rightDropHandle.mousedown(function(b){a._start("rightresize",b)}));a.top&&b.allowTopResize&&(a.topDropHandle=d("\x3cdiv class\x3d'l-layout-drophandle-top'\x3e\x3c/div\x3e"),a.layout.append(a.topDropHandle),a.topDropHandle.show(),a.topDropHandle.mousedown(function(b){a._start("topresize",
b)}));a.bottom&&b.allowBottomResize&&(a.bottomDropHandle=d("\x3cdiv class\x3d'l-layout-drophandle-bottom'\x3e\x3c/div\x3e"),a.layout.append(a.bottomDropHandle),a.bottomDropHandle.show(),a.bottomDropHandle.mousedown(function(b){a._start("bottomresize",b)}));a.centerBottom&&b.allowCenterBottomResize&&(a.centerBottomDropHandle=d("\x3cdiv class\x3d'l-layout-drophandle-centerbottom'\x3e\x3c/div\x3e"),a.layout.append(a.centerBottomDropHandle),a.centerBottomDropHandle.show(),a.centerBottomDropHandle.mousedown(function(b){a._start("centerbottomresize",
b)}));a.draggingxline=d("\x3cdiv class\x3d'l-layout-dragging-xline'\x3e\x3c/div\x3e");a.draggingyline=d("\x3cdiv class\x3d'l-layout-dragging-yline'\x3e\x3c/div\x3e");a.mask=d("\x3cdiv class\x3d'l-dragging-mask'\x3e\x3c/div\x3e");a.layout.append(a.draggingxline).append(a.draggingyline).append(a.mask)},_setDropHandlePosition:function(){var a=this.options;this.leftDropHandle&&this.leftDropHandle.css({left:this.left.width()+parseInt(this.left.css("left")),height:this.middleHeight,top:this.middleTop});
this.rightDropHandle&&this.rightDropHandle.css({left:parseInt(this.right.css("left"))-a.space,height:this.middleHeight,top:this.middleTop});this.topDropHandle&&this.topDropHandle.css({top:this.top.height()+parseInt(this.top.css("top")),width:this.top.width()});this.bottomDropHandle&&this.bottomDropHandle.css({top:parseInt(this.bottom.css("top"))-a.space,width:this.bottom.width()});this.centerBottomDropHandle&&this.centerBottomDropHandle.css({top:parseInt(this.centerBottom.css("top"))-a.space,left:parseInt(this.center.css("left")),
width:this.center.width()})},_onResize:function(){var a=this.options,b=this.layout.height(),c;c=d(window).height();if("string"==typeof a.height&&0<a.height.indexOf("%")){var e=this.layout.parent();a.inWindow||"body"==e[0].tagName.toLowerCase()?(c-=parseInt(d("body").css("paddingTop")),c-=parseInt(d("body").css("paddingBottom"))):c=e.height();c=c*parseFloat(a.height)*.01;if(a.inWindow||"body"==e[0].tagName.toLowerCase())c-=this.layout.offset().top-d("body").offset().top-parseInt(d("body").css("paddingTop"))}else c=
parseInt(a.height);c+=a.heightDiff;this.layout.height(c);this.layoutHeight=this.layout.height();this.middleWidth=this.layout.width();this.middleHeight=this.layout.height();this.top&&(this.middleHeight-=this.top.height(),this.middleHeight-=parseInt(this.top.css("borderTopWidth")),this.middleHeight-=parseInt(this.top.css("borderBottomWidth")),this.middleHeight-=a.space);this.bottom&&(this.middleHeight-=this.bottom.height(),this.middleHeight-=parseInt(this.bottom.css("borderTopWidth")),this.middleHeight-=
parseInt(this.bottom.css("borderBottomWidth")),this.middleHeight-=a.space);this.middleHeight-=2;this.hasBind("heightChanged")&&this.layoutHeight!=b&&this.trigger("heightChanged",[{layoutHeight:this.layoutHeight,diff:this.layoutHeight-b,middleHeight:this.middleHeight}]);this.center&&(this.centerWidth=this.middleWidth,this.left&&(this.isLeftCollapse?(this.centerWidth-=this.leftCollapse.width(),this.centerWidth-=parseInt(this.leftCollapse.css("borderLeftWidth")),this.centerWidth-=parseInt(this.leftCollapse.css("borderRightWidth")),
this.centerWidth-=parseInt(this.leftCollapse.css("left"))):(this.centerWidth-=this.leftWidth,this.centerWidth-=parseInt(this.left.css("borderLeftWidth")),this.centerWidth-=parseInt(this.left.css("borderRightWidth")),this.centerWidth-=parseInt(this.left.css("left"))),this.centerWidth-=a.space),this.right&&(this.isRightCollapse?(this.centerWidth-=this.rightCollapse.width(),this.centerWidth-=parseInt(this.rightCollapse.css("borderLeftWidth")),this.centerWidth-=parseInt(this.rightCollapse.css("borderRightWidth")),
this.centerWidth-=parseInt(this.rightCollapse.css("right"))):(this.centerWidth-=this.rightWidth,this.centerWidth-=parseInt(this.right.css("borderLeftWidth")),this.centerWidth-=parseInt(this.right.css("borderRightWidth"))),this.centerWidth-=a.space),this.centerLeft=0,this.left&&(this.isLeftCollapse?(this.centerLeft+=this.leftCollapse.width(),this.centerLeft+=parseInt(this.leftCollapse.css("borderLeftWidth")),this.centerLeft+=parseInt(this.leftCollapse.css("borderRightWidth")),this.centerLeft+=parseInt(this.leftCollapse.css("left"))):
(this.centerLeft+=this.left.width(),this.centerLeft+=parseInt(this.left.css("borderLeftWidth")),this.centerLeft+=parseInt(this.left.css("borderRightWidth"))),this.centerLeft+=a.space),this.center.css({left:this.centerLeft}),0<=this.centerWidth&&this.center.width(this.centerWidth),0<=this.middleHeight&&this.center.height(this.middleHeight),b=this.middleHeight,this.center.header&&(b-=this.center.header.height()),0<=b&&this.center.content.height(b),this._updateCenterBottom(!0));this.left&&(this.leftCollapse.height(this.middleHeight),
this.left.height(this.middleHeight));this.right&&(this.rightCollapse.height(this.middleHeight),this.right.height(this.middleHeight),this.rightLeft=0,this.left&&(this.isLeftCollapse?(this.rightLeft+=this.leftCollapse.width(),this.rightLeft+=parseInt(this.leftCollapse.css("borderLeftWidth")),this.rightLeft+=parseInt(this.leftCollapse.css("borderRightWidth"))):(this.rightLeft+=this.left.width(),this.rightLeft+=parseInt(this.left.css("borderLeftWidth")),this.rightLeft+=parseInt(this.left.css("borderRightWidth")),
this.rightLeft+=parseInt(this.left.css("left"))),this.rightLeft+=a.space),this.center&&(this.rightLeft+=this.center.width(),this.rightLeft+=parseInt(this.center.css("borderLeftWidth")),this.rightLeft+=parseInt(this.center.css("borderRightWidth")),this.rightLeft+=a.space),this.right.css({left:this.rightLeft}));this.bottom&&(this.bottomTop=this.layoutHeight-this.bottom.height()-2,this.bottom.css({top:this.bottomTop}));this._setDropHandlePosition()},_updateCenterBottom:function(a){var b=this.options;
if(this.centerBottom){if(a){a=this.centerBottomHeight||b.centerBottomHeight;this.centerBottom.css({left:this.centerLeft});0<=this.centerWidth&&this.centerBottom.width(this.centerWidth);var b=this.center.height(),c=parseInt(this.center.css("top"));this.centerBottom.height(a);this.centerBottom.css({top:c+b-a+2});this.center.height(b-a-2)}a=parseInt(this.center.css("left"));this.centerBottom.width(this.center.width()).css({left:a})}},_start:function(a,b){var c=this;c.dragtype=a;if("leftresize"==a||"rightresize"==
a)c.xresize={startX:b.pageX},c.draggingyline.css({left:b.pageX-c.layout.offset().left,height:c.middleHeight,top:c.middleTop}).show(),d("body").css("cursor","col-resize"),c.mask.height(c.layout.height()).removeClass("l-layout-ymask").addClass("l-layout-xmask").show();else if("topresize"==a||"bottomresize"==a)c.yresize={startY:b.pageY},c.draggingxline.css({top:b.pageY-c.layout.offset().top,width:c.layout.width()}).show(),d("body").css("cursor","row-resize"),c.mask.height(c.layout.height()).removeClass("l-layout-xmask").addClass("l-layout-ymask").show();
else if("centerbottomresize"==a)c.yresize={startY:b.pageY},c.draggingxline.css({top:b.pageY-c.layout.offset().top,width:c.layout.width()}).show(),d("body").css("cursor","row-resize"),c.mask.height(c.layout.height()).removeClass("l-layout-xmask").addClass("l-layout-ymask").show();else return;c.layout.lock.width(c.layout.width());c.layout.lock.height(c.layout.height());c.layout.lock.show();(d.browser.msie||d.browser.safari)&&d("body").bind("selectstart",function(){return!1});d(document).bind("mouseup",
function(){c._stop.apply(c,arguments)});d(document).bind("mousemove",function(){c._drag.apply(c,arguments)})},_drag:function(a){this.xresize?(this.xresize.diff=a.pageX-this.xresize.startX,this.draggingyline.css({left:a.pageX-this.layout.offset().left}),d("body").css("cursor","col-resize")):this.yresize&&(this.yresize.diff=a.pageY-this.yresize.startY,this.draggingxline.css({top:a.pageY-this.layout.offset().top}),d("body").css("cursor","row-resize"))},_stop:function(a){function b(){var a=this.options,
b,c,d;switch(this.dragtype){case "leftresize":b=e.left.width()+this.xresize.diff;a.minLeftWidth&&b<a.minLeftWidt&&(b=a.minLeftWidth);e.center?(d=e.center.width()-e.xresize.diff,d<a.minCenterWidth&&(b-=a.minCenterWidth-d,d=a.minCenterWidth),e.center.width(d).css({left:parseInt(b)+5})):e.right&&(c=e.right.width()-e.xresize.diff,c<a.minRightWidth&&(b-=a.minRightWidth-c,c=a.minRightWidth),e.right.width(c).css({left:parseInt(b)+5}));this.left.width(b);break;case "rightresize":b=e.right.width()-this.xresize.diff,
a.minRightWidth&&b<a.minRightWidth&&(b=a.minRightWidth),c=b,e.center?(d=e.center.width()+e.xresize.diff,d<a.minCenterWidth&&(c-=a.minCenterWidth-d,d=a.minCenterWidth),e.center.width(d)):e.left&&(b=e.left.width()+e.xresize.diff,b<a.minLeftWidth&&(c-=a.minLeftWidth-b,b=a.minRightWidth),e.left.width(b)),e.right.width(c).css({left:parseInt(e.right.css("left"))+e.xresize.diff})}}function c(){if("topresize"==e.dragtype)e.top.height(e.top.height()+e.yresize.diff),e.middleTop+=e.yresize.diff,e.middleHeight-=
e.yresize.diff,e.left&&(e.left.css({top:e.middleTop}).height(e.middleHeight),e.leftCollapse.css({top:e.middleTop}).height(e.middleHeight)),e.center&&e.center.css({top:e.middleTop}).height(e.middleHeight),e.right&&(e.right.css({top:e.middleTop}).height(e.middleHeight),e.rightCollapse.css({top:e.middleTop}).height(e.middleHeight)),e._updateCenterBottom(!0);else if("bottomresize"==e.dragtype)e.bottom.height(e.bottom.height()-e.yresize.diff),e.middleHeight+=e.yresize.diff,e.bottomTop+=e.yresize.diff,
e.bottom.css({top:e.bottomTop}),e.left&&(e.left.height(e.middleHeight),e.leftCollapse.height(e.middleHeight)),e.center&&e.center.height(e.middleHeight),e.right&&(e.right.height(e.middleHeight),e.rightCollapse.height(e.middleHeight)),e._updateCenterBottom(!0);else if("centerbottomresize"==e.dragtype){e.centerBottomHeight=e.centerBottomHeight||f.centerBottomHeight;e.centerBottomHeight-=e.yresize.diff;var a=parseInt(e.centerBottom.css("top"));e.centerBottom.css("top",a+e.yresize.diff);e.centerBottom.height(e.centerBottom.height()-
e.yresize.diff);e.center.height(e.center.height()+e.yresize.diff)}}var e=this,f=this.options,g;e.xresize&&e.xresize.diff?(g=e.xresize.diff,b.call(e),e._updateCenterBottom()):e.yresize&&e.yresize.diff&&(g=e.yresize.diff,c.call(e));e.xresize=e.yresize=e.dragtype=!1;e.draggingxline.hide();e.draggingyline.hide();e.mask.hide();e.layout.lock.hide();d("body").css("cursor","");e.trigger("endResize",[{direction:e.dragtype?e.dragtype.replace(/resize/,""):"",diff:g},a]);e._setDropHandlePosition();(d.browser.msie||
d.browser.safari)&&d("body").unbind("selectstart");d(document).unbind("mousemove",e._drag);d(document).unbind("mouseup",e._stop)}})})(jQuery);
(function(d){d.fn.ligerListBox=function(a){return d.ligerui.run.call(this,"ligerListBox",arguments)};d.ligerDefaults.ListBox={isMultiSelect:!1,isShowCheckBox:!1,allowUnSelectRow:!0,columns:null,width:150,height:100,onSelect:!1,onSelected:null,valueField:"id",textField:"text",valueFieldID:null,split:";",data:null,parms:null,url:null,urlParms:null,ajaxContentType:null,ajaxType:"post",onSuccess:null,onError:null,render:null,css:null,value:null,valueFieldCssClass:null};d.ligerMethos.ListBox=d.ligerMethos.ListBox||
{};d.ligerui.controls.ListBox=function(a,b){d.ligerui.controls.ListBox.base.constructor.call(this,a,b)};d.ligerui.controls.ListBox.ligerExtend(d.ligerui.controls.Input,{__getType:function(){return"ListBox"},_extendMethods:function(){return d.ligerMethos.ListBox},_init:function(){d.ligerui.controls.ListBox.base._init.call(this)},_render:function(){var a=this.options;this.data=a.data;this.valueField=null;d(this.element).is(":hidden")||d(this.element).is(":text")?(this.valueField=d(this.element),d(this.element).is(":text")&&
this.valueField.hide()):a.valueFieldID?(this.valueField=d("#"+a.valueFieldID+":input,[name\x3d"+a.valueFieldID+"]:input"),0==this.valueField.length&&(this.valueField=d('\x3cinput type\x3d"hidden"/\x3e')),this.valueField[0].id=this.valueField[0].name=a.valueFieldID):(this.valueField=d('\x3cinput type\x3d"hidden"/\x3e'),this.valueField[0].id=this.valueField[0].name=this.id+"_val");null==this.valueField[0].name&&(this.valueField[0].name=this.valueField[0].id);a.valueFieldCssClass&&this.valueField.addClass(a.valueFieldCssClass);
this.valueField.attr("data-ligerid",this.id);d(this.element).is(":hidden")||d(this.element).is(":text")?this.selectBox=d("\x3cdiv\x3e\x3c/div\x3e").insertBefore(this.element):this.selectBox=d(this.element);this.selectBox.html('\x3cdiv class\x3d"l-listbox-inner"\x3e\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" border\x3d"0" class\x3d"l-listbox-table"\x3e\x3c/table\x3e\x3c/div\x3e').addClass("l-listbox").append(this.valueField);this.selectBox.table=d("table:first",this.selectBox);this.set(a);this._addClickEven()},
destroy:function(){this.selectBox&&this.selectBox.remove();this.options=null;d.ligerui.remove(this)},clear:function(){this._changeValue("");this.trigger("clear")},_setIsShowCheckBox:function(a){a?d("table",this.selectBox).addClass("l-table-checkbox"):d("table",this.selectBox).addClass("l-table-nocheckbox")},_setCss:function(a){a&&this.selectBox.addClass(a)},_setDisabled:function(a){a?this.selectBox.addClass("l-text-disabled"):this.selectBox.removeClass("l-text-disabled")},_setWidth:function(a){this.selectBox.width(a)},
_setHeight:function(a){this.selectBox.height(a)},getText:function(){var a=this.getValue();return this.findTextByValue(a)},findTextByValue:function(a){var b=this.options;if(null==a||""==a)return"";var c=[];d(this.data).each(function(d,f){d=f[b.textField];a:{f=f[b.valueField];for(var e=a.toString().split(b.split),h=0;h<e.length;h++)if(e[h]==f){f=!0;break a}f=!1}f&&c.push(d)});return c.join(b.split)},getDataByValue:function(a){for(var b=this.options,c=0,d=this.data.length;c<d;c++)if(this.data[c][b.valueField]==
a)return this.data[c];return null},indexOf:function(a){var b=this.options;if(!this.data)return-1;for(var c="object"==typeof a,d=0,f=this.data.length;d<f;d++)if(c){if(this.data[d]==a)return d}else if(this.data[d][b.valueField]&&this.data[d][b.valueField].toString()==a.toString())return d;return-1},removeItems:function(a){var b=this;b.data&&(d(a).each(function(a,d){a=b.indexOf(d);-1!=a&&b.data.splice(a,1)}),b.refresh())},removeItem:function(a){this.data&&(a=this.indexOf(a),-1!=a&&(this.data.splice(a,
1),this.refresh()))},insertItem:function(a,b){this.data||(this.data=[]);this.data.splice(b,0,a);this.refresh()},addItems:function(a){var b=this;b.data||(b.data=[]);d(a).each(function(a,d){b.data.push(d)});b.refresh()},addItem:function(a){this.data||(this.data=[]);this.data.push(a);this.refresh()},getSelectedItems:function(){var a=this,b=this.options;if(!a.data)return null;var c=a.getValue();if(!c)return null;var e=[];d(c.split(b.split)).each(function(){var b=a.indexOf(this.toString());-1!=b&&e.push(a.data[b])});
return e},_setValue:function(a){this.options.value=a;this._dataInit()},setValue:function(a){this._setValue(a)},_setUrl:function(a){if(a){var b=this,c=this.options,e=d.isFunction(c.urlParms)?c.urlParms.call(b):c.urlParms;if(e)for(name in e)a+=-1==a.indexOf("?")?"?":"\x26",a+=name+"\x3d"+e[name];e=d.isFunction(c.parms)?c.parms():c.parms;"application/json"==c.ajaxContentType&&"string"!=typeof e&&(e=liger.toJSON(e));a={type:c.ajaxType||"post",url:a,data:e,cache:!1,dataType:"json",success:function(a){b.setData(a);
b.trigger("success",[a])},error:function(a,c){b.trigger("error",[a,c])}};c.ajaxContentType&&(a.contentType=c.ajaxContentType);d.ajax(a)}},reload:function(){this.set("url",this.options.url)},setUrl:function(a){return this._setUrl(a)},setParm:function(a,b){if(a){var c=this.get("parms");c||(c={});c[a]=b;this.set("parms",c)}},clearContent:function(){d("table",this.selectBox).html("")},_setColumns:function(a){this.options.columns=a;this.refresh()},_setData:function(a){this.setData(a)},setData:function(a){a&&
a.length&&(this.data=a,this.refresh(),this.updateStyle())},refresh:function(){var a=this.options,b=this.data;this.clearContent();if(b){if(a.columns){this.selectBox.table.headrow=d("\x3ctr class\x3d'l-table-headerow'\x3e\x3ctd width\x3d'18px' class\x3d'l-checkboxrow'\x3e\x3c/td\x3e\x3c/tr\x3e");this.selectBox.table.append(this.selectBox.table.headrow);this.selectBox.table.addClass("l-listbox-grid");for(var c=0;c<a.columns.length;c++){var e=d("\x3ctd columnindex\x3d'"+c+"' columnname\x3d'"+a.columns[c].name+
"'\x3e"+a.columns[c].header+"\x3c/td\x3e");a.columns[c].width&&e.width(a.columns[c].width);this.selectBox.table.headrow.append(e)}}for(var e=[],f=0;f<b.length;f++){var c=b[f][a.valueField],g=b[f][a.textField],h=" value\x3d'"+c+"' index\x3d'"+f+"'";if(a.columns){e.push("\x3ctr "+h+"\x3e\x3ctd style\x3d'width:18px;' class\x3d'l-checkboxrow'\x3e\x3cinput type\x3d'checkbox' "+h+"/\x3e\x3c/td\x3e");for(c=0;c<a.columns.length;c++)e.push("\x3ctd\x3e"+b[f][a.columns[c].name]+"\x3c/td\x3e");e.push("\x3c/tr\x3e")}else e.push("\x3ctr "+
h+"\x3e"),e.push("\x3ctd style\x3d'width:18px;' class\x3d'l-checkboxrow'\x3e\x3cinput type\x3d'checkbox'"+h+"/\x3e\x3c/td\x3e"),h=g,a.render&&(h=a.render({data:b[f],value:c,text:g})),e.push("\x3ctd align\x3d'left'\x3e"+h+"\x3c/td\x3e\x3c/tr\x3e")}this.selectBox.table.append(e.join(""))}},_getValue:function(){return d(this.valueField).val()},getValue:function(){return this._getValue()},updateStyle:function(){this._dataInit()},selectAll:function(){var a=this.options,b=[];d("tr",this.selectBox).each(function(){var a=
d(this);b.push(a.attr("value"))});d("tr",this.selectBox).addClass("l-selected").find(":checkbox").each(function(){this.checked=!0});this.valueField.val(b.join(a.split))},_dataInit:function(){var a=this,b=this.options,c=b.value;null!=c?a._changeValue(c):""!=a.valueField.val()&&(b.value=a.valueField.val());b=(c||"").toString().split(b.split);d("tr.l-selected",a.selectBox).removeClass("l-selected").find(":checkbox").each(function(){this.checked=!1});d(b).each(function(b,c){d("tr[value\x3d'"+c+"']",a.selectBox).addClass("l-selected").find(":checkbox").each(function(){this.checked=
!0})})},_changeValue:function(a){this.valueField.val(a);this.selectedValue=a},_updateValue:function(){var a=this.options,b=[];d("tr",this.selectBox).each(function(){var a=d(this);a.hasClass("l-selected")&&b.push(a.attr("value"))});this._changeValue(b.join(a.split))},_addClickEven:function(){var a=this,b=this.options;a.selectBox.click(function(c){var e=d(c.target||c.srcElement).parents("tr:first");if(e.length){c=e.attr("value");var f=a.findTextByValue(c),g=a.getDataByValue(c);if(a.hasBind("select")&&
0==a.trigger("select",[c,f,g]))return!1;b.isMultiSelect||d("tr.l-selected",a.selectBox).not(e).removeClass("l-selected").find(":checkbox").each(function(){this.checked=!1});e.hasClass("l-selected")&&b.allowUnSelectRow?e.removeClass("l-selected"):e.addClass("l-selected");e.find(":checkbox").each(function(){this.checked=e.hasClass("l-selected")});a._updateValue();a.trigger("selected",[c,f,g])}})}})})(jQuery);
(function(d){d.ligerMenu=function(a){return d.ligerui.run.call(null,"ligerMenu",arguments)};d.ligerDefaults.Menu={width:120,top:0,left:0,cls:null,items:null,shadow:!0};d.ligerMethos.Menu={};d.ligerui.controls.Menu=function(a){d.ligerui.controls.Menu.base.constructor.call(this,null,a)};d.ligerui.controls.Menu.ligerExtend(d.ligerui.core.UIComponent,{__getType:function(){return"Menu"},__idPrev:function(){return"Menu"},_extendMethods:function(){return d.ligerMethos.Menu},_render:function(){var a=this,
b=this.options;a.menuItemCount=0;a.menus={};a.menu=a.createMenu();a.element=a.menu[0];a.menu.css({top:b.top,left:b.left,width:b.width});b.cls&&a.menu.addClass(b.cls);b.items&&d(b.items).each(function(b,d){a.addItem(d)});d(document).bind("click.menu",function(){for(var b in a.menus){var d=a.menus[b];if(!d)break;d.hide();d.shadow&&d.shadow.hide()}});a.set(b)},show:function(a,b){void 0==b&&(b=this.menu);a&&void 0!=a.left&&b.css({left:a.left});a&&void 0!=a.top&&b.css({top:a.top});b.show();this.updateShadow(b)},
updateShadow:function(a){this.options.shadow&&(a.shadow.css({left:a.css("left"),top:a.css("top"),width:a.outerWidth(),height:a.outerHeight()}),a.is(":visible")?a.shadow.show():a.shadow.hide())},hide:function(a){void 0==a&&(a=this.menu);this.hideAllSubMenu(a);a.hide();this.updateShadow(a)},toggle:function(){this.menu.toggle();this.updateShadow(this.menu)},removeItem:function(a){d("\x3e .l-menu-item[menuitemid\x3d"+a+"]",this.menu.items).remove()},setEnabled:function(a){d("\x3e .l-menu-item[menuitemid\x3d"+
a+"]",this.menu.items).removeClass("l-menu-item-disable")},setMenuText:function(a,b){d("\x3e .l-menu-item[menuitemid\x3d"+a+"] \x3e.l-menu-item-text:first",this.menu.items).html(b)},setDisabled:function(a){d("\x3e .l-menu-item[menuitemid\x3d"+a+"]",this.menu.items).addClass("l-menu-item-disable")},isEnable:function(a){return!d("\x3e .l-menu-item[menuitemid\x3d"+a+"]",this.menu.items).hasClass("l-menu-item-disable")},getItemCount:function(){return d("\x3e .l-menu-item",this.menu.items).length},addItem:function(a,
b){var c=this,e=this.options;if(a)if(void 0==b&&(b=c.menu),a.line)b.items.append('\x3cdiv class\x3d"l-menu-item-line"\x3e\x3c/div\x3e');else{var f=d('\x3cdiv class\x3d"l-menu-item"\x3e\x3cdiv class\x3d"l-menu-item-text"\x3e\x3c/div\x3e \x3c/div\x3e'),g=d("\x3e .l-menu-item",b.items).length;b.items.append(f);f.attr("ligeruimenutemid",++c.menuItemCount);a.id&&f.attr("menuitemid",a.id);a.text&&d("\x3e.l-menu-item-text:first",f).html(a.text);a.icon&&f.prepend('\x3cdiv class\x3d"l-menu-item-icon l-icon-'+
a.icon+'"\x3e\x3c/div\x3e');a.img&&f.prepend('\x3cdiv class\x3d"l-menu-item-icon"\x3e\x3cimg style\x3d"width:16px;height:16px;margin:2px;" src\x3d"'+a.img+'" /\x3e\x3c/div\x3e');(a.disable||a.disabled)&&f.addClass("l-menu-item-disable");if(a.children){f.append('\x3cdiv class\x3d"l-menu-item-arrow"\x3e\x3c/div\x3e');var h=c.createMenu(f.attr("ligeruimenutemid"));c.menus[f.attr("ligeruimenutemid")]=h;h.width(e.width);h.hover(null,function(){h.showedSubMenu||c.hide(h)});d(a.children).each(function(){c.addItem(this,
h)})}a.click&&f.click(function(){d(this).hasClass("l-menu-item-disable")||a.click(a,g)});a.dblclick&&f.dblclick(function(){d(this).hasClass("l-menu-item-disable")||a.dblclick(a,g)});var k=d("\x3e .l-menu-over:first",b);f.hover(function(){if(!d(this).hasClass("l-menu-item-disable")){var e=d(this).offset().top,f=e-b.offset().top;k.css({top:f});c.hideAllSubMenu(b);a.children&&(f=d(this).attr("ligeruimenutemid"))&&c.menus[f]&&(c.show({top:e,left:d(this).offset().left+d(this).width()-5},c.menus[f]),b.showedSubMenu=
!0)}},function(){d(this).hasClass("l-menu-item-disable")||(d(this).attr("ligeruimenutemid"),a.children&&d(this).attr("ligeruimenutemid"))})}},hideAllSubMenu:function(a){var b=this;void 0==a&&(a=b.menu);d("\x3e .l-menu-item",a.items).each(function(){if(0<d("\x3e .l-menu-item-arrow",this).length){var a=d(this).attr("ligeruimenutemid");a&&b.menus[a]&&b.hide(b.menus[a])}});a.showedSubMenu=!1},createMenu:function(a){var b=this.options,c=d('\x3cdiv class\x3d"l-menu" style\x3d"display:none"\x3e\x3cdiv class\x3d"l-menu-yline"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-menu-over"\x3e\x3cdiv class\x3d"l-menu-over-l"\x3e\x3c/div\x3e \x3cdiv class\x3d"l-menu-over-r"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"l-menu-inner"\x3e\x3c/div\x3e\x3c/div\x3e');
a&&c.attr("ligeruiparentmenuitemid",a);c.items=d("\x3e .l-menu-inner:first",c);c.appendTo("body");b.shadow&&(c.shadow=d('\x3cdiv class\x3d"l-menu-shadow"\x3e\x3c/div\x3e').insertAfter(c),this.updateShadow(c));c.hover(null,function(){c.showedSubMenu||d("\x3e .l-menu-over:first",c).css({top:-24})});a?this.menus[a]=c:this.menus[0]=c;return c}});d.ligerui.controls.Menu.prototype.setEnable=d.ligerui.controls.Menu.prototype.setEnabled;d.ligerui.controls.Menu.prototype.setDisable=d.ligerui.controls.Menu.prototype.setDisabled})(jQuery);
(function(d){d.fn.ligerMenuBar=function(a){return d.ligerui.run.call(this,"ligerMenuBar",arguments)};d.fn.ligerGetMenuBarManager=function(){return d.ligerui.run.call(this,"ligerGetMenuBarManager",arguments)};d.ligerDefaults.MenuBar={};d.ligerMethos.MenuBar={};d.ligerui.controls.MenuBar=function(a,b){d.ligerui.controls.MenuBar.base.constructor.call(this,a,b)};d.ligerui.controls.MenuBar.ligerExtend(d.ligerui.core.UIComponent,{__getType:function(){return"MenuBar"},__idPrev:function(){return"MenuBar"},
_extendMethods:function(){return d.ligerMethos.MenuBar},_render:function(){var a=this,b=this.options;a.menubar=d(this.element);a.menubar.hasClass("l-menubar")||a.menubar.addClass("l-menubar");b&&b.items&&d(b.items).each(function(b,d){a.addItem(d)});d(document).click(function(){d(".l-panel-btn-selected",a.menubar).removeClass("l-panel-btn-selected")});a.set(b)},addItem:function(a){var b=this,c=d('\x3cdiv class\x3d"l-menubar-item l-panel-btn"\x3e\x3cspan\x3e\x3c/span\x3e\x3cdiv class\x3d"l-panel-btn-l"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-panel-btn-r"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-menubar-item-down"\x3e\x3c/div\x3e\x3c/div\x3e');
b.menubar.append(c);a.id&&c.attr("menubarid",a.id);a.text&&d("span:first",c).html(a.text);a.disable&&c.addClass("l-menubar-item-disable");a.click&&c.click(function(){a.click(a)});if(a.menu){var e=d.ligerMenu(a.menu);c.hover(function(){b.actionMenu&&b.actionMenu.hide();var a=d(this).offset().left,c=d(this).offset().top+d(this).height();e.show({top:c,left:a});b.actionMenu=e;d(this).addClass("l-panel-btn-over l-panel-btn-selected").siblings(".l-menubar-item").removeClass("l-panel-btn-selected")},function(){d(this).removeClass("l-panel-btn-over")})}else c.hover(function(){d(this).addClass("l-panel-btn-over")},
function(){d(this).removeClass("l-panel-btn-over")}),d(".l-menubar-item-down",c).remove()}})})(jQuery);
(function(d){d.ligerMessageBox=function(a){return d.ligerui.run.call(null,"ligerMessageBox",arguments,{isStatic:!0})};d.ligerDefaults.MessageBox={isDrag:!0};d.ligerMethos.MessageBox={};d.ligerui.controls.MessageBox=function(a){d.ligerui.controls.MessageBox.base.constructor.call(this,null,a)};d.ligerui.controls.MessageBox.ligerExtend(d.ligerui.core.UIComponent,{__getType:function(){return"MessageBox"},__idPrev:function(){return"MessageBox"},_extendMethods:function(){return d.ligerMethos.MessageBox},
_render:function(){var a=this,b=this.options;a.messageBox=d('\x3cdiv class\x3d"l-messagebox"\x3e        \x3cdiv class\x3d"l-messagebox-lt"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-messagebox-rt"\x3e\x3c/div\x3e        \x3cdiv class\x3d"l-messagebox-l"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-messagebox-r"\x3e\x3c/div\x3e         \x3cdiv class\x3d"l-messagebox-image"\x3e\x3c/div\x3e        \x3cdiv class\x3d"l-messagebox-title"\x3e            \x3cdiv class\x3d"l-messagebox-title-inner"\x3e\x3c/div\x3e            \x3cdiv class\x3d"l-messagebox-close"\x3e\x3c/div\x3e        \x3c/div\x3e        \x3cdiv class\x3d"l-messagebox-content"\x3e        \x3c/div\x3e        \x3cdiv class\x3d"l-messagebox-buttons"\x3e\x3cdiv class\x3d"l-messagebox-buttons-inner"\x3e        \x3c/div\x3e\x3c/div\x3e    \x3c/div\x3e');
d("body").append(a.messageBox);a.messageBox.close=function(){a._removeWindowMask();a.messageBox.remove()};b.width&&a.messageBox.width(b.width);b.title&&d(".l-messagebox-title-inner",a.messageBox).html(b.title);b.content&&d(".l-messagebox-content",a.messageBox).html(b.content);b.buttons&&(d(b.buttons).each(function(b,c){var e=d('\x3cdiv class\x3d"l-messagebox-btn"\x3e\x3cdiv class\x3d"l-messagebox-btn-l"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-messagebox-btn-r"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-messagebox-btn-inner"\x3e\x3c/div\x3e\x3c/div\x3e');
d(".l-messagebox-btn-inner",e).html(c.text);d(".l-messagebox-buttons-inner",a.messageBox).append(e);c.width&&e.width(c.width);c.onclick&&e.click(function(){c.onclick(c,b,a.messageBox)})}),d(".l-messagebox-buttons-inner",a.messageBox).append("\x3cdiv class\x3d'l-clear'\x3e\x3c/div\x3e"));var c=a.messageBox.width(),e=0;d(".l-messagebox-buttons-inner .l-messagebox-btn",a.messageBox).each(function(){e+=d(this).width()});d(".l-messagebox-buttons-inner",a.messageBox).css({marginLeft:parseInt(.5*(c-e))});
a._applyWindowMask();a._applyDrag();a._setImage();var f=c=0,g=b.width||a.messageBox.width();null!=b.left?c=b.left:b.left=c=.5*(d(window).width()-g);null!=b.top?f=b.top:b.top=f=.5*(d(window).height()-a.messageBox.height())+d(window).scrollTop()-10;0>c&&(b.left=c=0);0>f&&(b.top=f=0);a.messageBox.css({left:c,top:f});d(".l-messagebox-btn",a.messageBox).hover(function(){d(this).addClass("l-messagebox-btn-over")},function(){d(this).removeClass("l-messagebox-btn-over")});d(".l-messagebox-close",a.messageBox).hover(function(){d(this).addClass("l-messagebox-close-over")},
function(){d(this).removeClass("l-messagebox-close-over")}).click(function(){a.messageBox.close()});a.set(b)},close:function(){this.g._removeWindowMask();this.messageBox.remove()},_applyWindowMask:function(){d(".l-window-mask").remove();d("\x3cdiv class\x3d'l-window-mask' style\x3d'display: block;'\x3e\x3c/div\x3e").appendTo(d("body"))},_removeWindowMask:function(){d(".l-window-mask").remove()},_applyDrag:function(){this.options.isDrag&&d.fn.ligerDrag&&this.messageBox.ligerDrag({handler:".l-messagebox-title-inner",
animate:!1})},_setImage:function(){var a=this.options;a.type&&("success"==a.type||"donne"==a.type?(d(".l-messagebox-image",this.messageBox).addClass("l-messagebox-image-donne").show(),d(".l-messagebox-content",this.messageBox).css({paddingLeft:64,paddingBottom:30})):"error"==a.type?(d(".l-messagebox-image",this.messageBox).addClass("l-messagebox-image-error").show(),d(".l-messagebox-content",this.messageBox).css({paddingLeft:64,paddingBottom:30})):"warn"==a.type?(d(".l-messagebox-image",this.messageBox).addClass("l-messagebox-image-warn").show(),
d(".l-messagebox-content",this.messageBox).css({paddingLeft:64,paddingBottom:30})):"question"==a.type&&(d(".l-messagebox-image",this.messageBox).addClass("l-messagebox-image-question").show(),d(".l-messagebox-content",this.messageBox).css({paddingLeft:64,paddingBottom:40})))}});d.ligerMessageBox.show=function(a){return d.ligerMessageBox(a)};d.ligerMessageBox.alert=function(a,b,c,e){a=a||"";p={title:a,content:b||a,buttons:[{text:"确定",onclick:function(a,b,c){c.close();e&&e(a,b,c)}}]};c&&(p.type=c);
return d.ligerMessageBox(p)};d.ligerMessageBox.confirm=function(a,b,c){var e=function(a,b,d){d.close();c&&c(0==b)};p={type:"question",title:a,content:b,buttons:[{text:"是",onclick:e},{text:"否",onclick:e}]};return d.ligerMessageBox(p)};d.ligerMessageBox.success=function(a,b,c){return d.ligerMessageBox.alert(a,b,"success",c)};d.ligerMessageBox.error=function(a,b,c){return d.ligerMessageBox.alert(a,b,"error",c)};d.ligerMessageBox.warn=function(a,b,c){return d.ligerMessageBox.alert(a,b,"warn",c)};d.ligerMessageBox.question=
function(a,b){return d.ligerMessageBox.alert(a,b,"question")}})(jQuery);
(function(d){d.fn.ligerPanel=function(a){return d.ligerui.run.call(this,"ligerPanel",arguments)};d.ligerDefaults.Panel={width:400,height:300,title:"Panel",content:null,url:null,urlParms:null,frameName:null,data:null,showClose:!1,showToggle:!0,showRefresh:!1,icon:null,onClose:null,onClosed:null,onLoaded:null,onToggle:null};d.ligerDefaults.PanelString={refreshMessage:"刷新",closeMessage:"关闭",expandMessage:"展开",collapseMessage:"收起"};d.ligerMethos.Panel={};d.ligerui.controls.Panel=function(a,b){d.ligerui.controls.Panel.base.constructor.call(this,
a,b)};d.ligerui.controls.Panel.ligerExtend(d.ligerui.core.UIComponent,{__getType:function(){return"Panel"},__idPrev:function(){return"Panel"},_extendMethods:function(){return d.ligerMethos.Panel},_init:function(){var a=this.options;d.ligerui.controls.Panel.base._init.call(this);a.content=a.content||d(this.element).html()},_render:function(){var a=this,b=this.options;a.panel=d(a.element).addClass("l-panel").html("");a.panel.append('\x3cdiv class\x3d"l-panel-header"\x3e\x3cspan\x3e\x3c/span\x3e\x3cdiv class\x3d"icons"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"l-panel-content"\x3e\x3c/div\x3e');
a.set(b);a.panel.find(".l-panel-header").hover(function(){d(this).addClass("l-panel-header-hover")},function(){d(this).removeClass("l-panel-header-hover")});a.panel.bind("click.panel",function(b){b=d(b.target||b.srcElement);b.hasClass("l-panel-header-toggle")?(b=!a.panel.find(".l-panel-header .l-panel-header-toggle:first").hasClass("l-panel-header-toggle-hide"),a.toggle(),a.trigger("toggle",[b])):b.hasClass("l-panel-header-close")?a.close():b.hasClass("l-panel-header-refresh")&&a.refresh()})},_setChildren:function(a){var b=
{input:["textbox","combobox","select"]},c={grid:"ligerGrid",toolbar:"ligerToolBar",tree:"ligerTree",form:"ligerForm",menu:"ligerMenu",menubar:"ligerMenuBar",portal:"ligerPortal",combobox:"ligerComboBox",textbox:"ligerTextBox",spinner:"ligerSpinner",listbox:"ligerListBox",checkbox:"ligerCheckBox",radio:"ligerRadio",checkboxlist:"ligerCheckBoxList",radiolist:"ligerRadioList",popupedit:"ligerPopupEdit",button:"ligerButton",dateeditor:"ligerDateEditor",dialog:"ligerDialog",panel:"ligerPanel",layout:"ligerLayout",
accordion:"ligerAccordion",tab:"ligerTab"};if(a&&a.length)for(var e=0;e<a.length;e++){var f=a[e],g=f.type,h=c[g];h&&(g=document.createElement(b[g]||"div"),this.panel.find(".l-panel-content").append(g),f=d.extend({},f),f.type=null,d(g)[h](f))}},collapse:function(){this.panel.find(".l-panel-header .l-panel-header-toggle:first").hasClass("l-panel-header-toggle-hide")||this.toggle()},expand:function(){this.panel.find(".l-panel-header .l-panel-header-toggle:first").hasClass("l-panel-header-toggle-hide")&&
this.toggle()},toggle:function(){var a=this.options,b=this.panel.find(".l-panel-header .l-panel-header-toggle:first");b.hasClass("l-panel-header-toggle-hide")?(b.removeClass("l-panel-header-toggle-hide"),b.attr("title",a.collapseMessage)):(b.addClass("l-panel-header-toggle-hide"),b.attr("title",a.expandMessage));this.panel.find(".l-panel-content:first").toggle()},refresh:function(){this.set("url",this.options.url)},_setShowToggle:function(a){var b=this.options,c=this.panel.find(".l-panel-header:first");
a?(a=d("\x3ca class\x3d'l-panel-icon l-panel-header-toggle'\x3e\x3c/a\x3e"),a.appendTo(c.find(".icons")),a.attr("title",b.collapseMessage)):c.find(".l-panel-header-toggle").remove()},_setContent:function(a){var b=this.panel.find(".l-panel-content:first");a&&b.html(a)},_setUrl:function(a){var b=this,c=this.options,e=b.panel.find(".l-panel-content:first");if(a){var f=d.isFunction(c.urlParms)?c.urlParms.call(b):c.urlParms;if(f)for(name in f)a+=-1==a.indexOf("?")?"?":"\x26",a+=name+"\x3d"+f[name];b.jiframe||
(b.jiframe=d("\x3ciframe frameborder\x3d'0'\x3e\x3c/iframe\x3e"),c=c.frameName?c.frameName:"ligerpanel"+(new Date).getTime(),b.jiframe.attr("name",c),b.jiframe.attr("id",c),e.prepend(b.jiframe),b.jiframe[0].panel=b,b.frame=window.frames[b.jiframe.attr("name")]);setTimeout(function(){0==e.find(".l-panel-loading:first").length&&e.append("\x3cdiv class\x3d'l-panel-loading' style\x3d'display:block;'\x3e\x3c/div\x3e");var c=d(".l-panel-loading:first",e);b.jiframe.attr("src",a).bind("load.panel",function(){c.hide();
b.trigger("loaded")})},0)}},_setShowClose:function(a){var b=this.options,c=this.panel.find(".l-panel-header:first");a?(a=d("\x3ca class\x3d'l-panel-icon l-panel-header-close'\x3e\x3c/a\x3e"),a.appendTo(c.find(".icons")),a.attr("title",b.closeMessage)):c.find(".l-panel-header-close").remove()},_setShowRefresh:function(a){var b=this.options,c=this.panel.find(".l-panel-header:first");a?(a=d("\x3ca class\x3d'l-panel-icon l-panel-header-refresh'\x3e\x3c/a\x3e"),a.appendTo(c.find(".icons")),a.attr("title",
b.refreshMessage)):c.find(".l-panel-header-refresh").remove()},close:function(){0!=this.trigger("close")&&(this.panel.remove(),this.trigger("closed"))},show:function(){this.panel.show()},_setIcon:function(a){a?(this.panel.addClass("l-panel-hasicon"),this.panel.append('\x3cimg src\x3d"'+a+'" /\x3e')):(this.panel.removeClass("l-panel-hasicon"),this.panel.find("img").remove())},_setWidth:function(a){"string"==typeof a?-1<a.indexOf("%")?this.panel.width(a):this.panel.width(parseInt(a)):this.panel.width(a)},
_setHeight:function(a){var b=this.panel.find(".l-panel-header:first");this.panel.find(".l-panel-content:first").height(a-b.height())},_setTitle:function(a){this.panel.find(".l-panel-header span:first").text(a)}})})(jQuery);
(function(d){d.fn.ligerPopupEdit=function(a){return d.ligerui.run.call(this,"ligerPopupEdit",arguments)};d.fn.ligerGetPopupEditManager=function(){return d.ligerui.run.call(this,"ligerGetPopupEditManager",arguments)};d.ligerDefaults.PopupEdit={valueFieldID:null,css:null,onButtonClick:null,nullText:null,disabled:!1,method:"post",async:!0,cancelable:!0,width:200,heigth:null,render:null,split:";",data:[],grid:null,condition:null,valueField:"id",textField:"text",parms:null,onSelect:null,onSelected:null,
valueFieldCssClass:null,searchClick:null};d.ligerMethos.PopupEdit=d.ligerMethos.PopupEdit||{};d.ligerui.controls.PopupEdit=function(a,b){d.ligerui.controls.PopupEdit.base.constructor.call(this,a,b)};d.ligerui.controls.PopupEdit.ligerExtend(d.ligerui.controls.Input,{__getType:function(){return"PopupEdit"},_extendMethods:function(){return d.ligerMethos.PopupEdit},_init:function(){d.ligerui.controls.PopupEdit.base._init.call(this)},_render:function(){var a=this,b=this.options;a.inputText=null;"input"==
this.element.tagName.toLowerCase()&&(this.element.readOnly=!0,a.inputText=d(this.element),a.textFieldID=this.element.id);void 0==a.inputText[0].name&&(a.inputText[0].name=a.textFieldID);a.valueField=null;b.valueFieldID?(a.valueField=d("#"+b.valueFieldID+":input"),0==a.valueField.length&&(a.valueField=d('\x3cinput type\x3d"hidden"/\x3e')),void 0==a.valueField[0].name&&(a.valueField[0].id=a.valueField[0].name=b.valueFieldID)):(a.valueField=d('\x3cinput type\x3d"hidden"/\x3e'),a.valueField[0].id=a.valueField[0].name=
a.textFieldID+"_val");void 0==a.valueField[0].name&&(a.valueField[0].name=a.valueField[0].id);b.valueFieldCssClass&&a.valueField.addClass(b.valueFieldCssClass);a.link=d('\x3cdiv class\x3d"l-trigger"\x3e\x3cdiv class\x3d"l-trigger-icon"\x3e\x3c/div\x3e\x3c/div\x3e');a.wrapper=a.inputText.wrap('\x3cdiv class\x3d"l-text l-text-popup"\x3e\x3c/div\x3e').parent();a.wrapper.append('\x3cdiv class\x3d"l-text-l"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-text-r"\x3e\x3c/div\x3e');a.wrapper.append(a.link);a.wrapper.append(a.valueField);
a.valueField.attr("data-ligerid",a.id);a.inputText.addClass("l-text-field");a.link.hover(function(){b.disabled||(this.className="l-trigger-hover")},function(){b.disabled||(this.className="l-trigger")}).mousedown(function(){b.disabled||(this.className="l-trigger-pressed")}).mouseup(function(){b.disabled||(this.className="l-trigger-hover")}).click(function(){if(!b.disabled&&0==a.trigger("buttonClick"))return!1});a.inputText.click(function(){}).blur(function(){b.disabled||a.wrapper.removeClass("l-text-focus")}).focus(function(){b.disabled||
a.wrapper.addClass("l-text-focus")});a.wrapper.hover(function(){b.disabled||a.wrapper.addClass("l-text-over")},function(){b.disabled||a.wrapper.removeClass("l-text-over")});a.set(b);a.setTextByVal(a.getValue())},destroy:function(){this.wrapper&&this.wrapper.remove();this.options=null;d.ligerui.remove(this)},clear:function(){this.inputText.val("");this.valueField.val("")},_setCss:function(a){a&&this.wrapper.addClass(a)},_setCancelable:function(a){var b=this,c=this.options;!a&&b.unselect&&(b.unselect.remove(),
b.unselect=null);if(a||b.unselect)b.unselect=d('\x3cdiv class\x3d"l-trigger l-trigger-cancel"\x3e\x3cdiv class\x3d"l-trigger-icon"\x3e\x3c/div\x3e\x3c/div\x3e').hide(),b.wrapper.hover(function(){b.unselect.show()},function(){b.unselect.hide()}),!c.disabled&&c.cancelable&&b.wrapper.append(b.unselect),b.unselect.hover(function(){this.className="l-trigger-hover l-trigger-cancel"},function(){this.className="l-trigger l-trigger-cancel"}).click(function(){b.clear()})},_setDisabled:function(a){a?this.wrapper.addClass("l-text-disabled"):
this.wrapper.removeClass("l-text-disabled")},_setWidth:function(a){20<a&&(this.wrapper.css({width:a}),this.inputText.css({width:a-20}))},_setHeight:function(a){10<a&&(this.wrapper.height(a),this.inputText.height(a-2))},getData:function(){var a=this.options,b=[],c=d(this.valueField).val(),e=d(this.inputText).val(),f=c?c.split(a.split):null,g=e?e.split(a.split):null;d(f).each(function(c){var d={};d[a.textField]=g[c];d[a.valueField]=f[c];b.push(d)});return b},_getText:function(){return d(this.inputText).val()},
_getValue:function(){return d(this.valueField).val()},getValue:function(){return this._getValue()},getText:function(){return this._getText()},setValue:function(a,b){""!=a&&(2<=arguments.length?(this.setValue(a),this.setText(b)):this.valueField.val(a))},setTextByVal:function(a){a="string"!=typeof a?a.toString:a;if(""!=a){var b=[],c=this.options,e=[];this.valueField.val()!=a&&this.valueField.val(a);e=c.grid;d.isFunction(e)&&(e=e());e=d.extend({parms:c.parms},e);if(0<c.data.length)e=c.data.Rows;else{if(e.url){this.loadServerData(e.url,
a);return}e=e.data.Rows}var f=a.split(c.split);d(e).each(function(a,e){-1!=d.inArray(e[c.valueField],f)&&b.push(e[c.textField])});b=b.join(c.split);this.setText(b)}},loadServerData:function(a,b){var c=this,e=this.options;d.isFunction(a)&&(a=a());d.ajax({type:e.method,url:a,async:e.async,dataType:"json",success:function(a){gridData=d.extend(!0,{},a);e.data=gridData;gridData=a.Rows;var f=b.split(e.split),h=[];d(gridData).each(function(a,b){-1!=d.inArray(b[e.valueField],f)&&h.push(b[e.textField])});
h=h.join(e.split);c.setText(h)},error:function(a,b,c){}})},setText:function(a){var b=this.options;b.render?this.inputText.val(b.render(a)):this.inputText.val(a)},addValue:function(a,b){var c=this.options;if(a){var e=this.getValue(),f=this.getText();if(e){var g=[],h=[],k=e.split(c.split);a=a.split(c.split);b=b.split(c.split);for(var m=0,n=a.length;m<n;m++)-1==d.inArray(a[m],k)&&(g.push(a[m]),h.push(b[m]));g.length&&(this.setValue(e+c.split+g.join(c.split)),this.setText(f+c.split+h.join(c.split)))}else this.setValue(a),
this.setText(b)}},removeValue:function(a,b){b=this.options;if(a){var c=this.getValue(),e=this.getText();if(c){c=c.split(b.split);e=e.split(b.split);a=a.split(b.split);for(var f=0,g,h=a.length;f<h;f++)-1!=(g=d.inArray(a[f],c))&&(c.splice(g,1),e.splice(g,1));this.setValue(c.join(b.split));this.setText(e.join(b.split))}}},_setGrid:function(a){if(a){var b=this,c=this.options,e=d.extend({parms:c.parms},c.grid);this.bind("buttonClick",function(){if(!b.popupFn){var a=c.condition,g=c.valueField,h=c.textField,
k=c.split,m=c.searchClick,n;try{n=b.getData()}catch(q){console.error(q),n=null}b.popupFn=d.ligerui.getPopupFn({grid:e,condition:a,valueField:g,textField:h,split:k,searchClick:m,lastSelected:n,onSelect:function(a){0!=b.trigger("select",a)&&(c.grid.checkbox?(b.addValue(a.value,a.text),b.removeValue(a.remvoeValue,a.remvoeText)):(b.setValue(a.value),b.setText(a.text)),b.trigger("selected",a))},selectInit:function(a){var e=b.getValue();return e&&c.valueField&&a[c.valueField]?-1!=d.inArray(a[c.valueField].toString(),
e.split(c.split)):!1}},b)}b.popupFn()})}}});d.ligerui.getPopupFn=function(a,b){function c(){function c(b){b=b||a.height;return b-=r.height()}if(g)h._showData(),g.show(),h.refreshSize(),m=h.selected.concat();else{var e=d("\x3cdiv\x3e\x3c/div\x3e"),r=d("\x3cdiv\x3e\x3c/div\x3e"),u=d("\x3cdiv\x3e\x3c/div\x3e");e.append(r).append(u);if(a.condition){var t=d.extend({labelWidth:60,space:20},a.condition);setTimeout(function(){k=r.ligerForm(t)},50)}else r.remove();var v=d.extend({columnWidth:120,alternatingRow:!1,
frozen:!0,rownumbers:!0},a.grid,{width:"100%",height:c(),isChecked:a.selectInit,isSelected:a.selectInit,inWindow:!1});h=u.ligerGrid(v);a.condition&&setTimeout(function(){var b=d('\x3cli style\x3d"margin-right:9px"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/li\x3e');d("ul:first",r).append(b).after('\x3cdiv class\x3d"l-clear"\x3e\x3c/div\x3e');d("div",b).ligerButton({text:"搜索",click:function(){var b=k.toConditions();a.searchClick?a.searchClick({grid:h,rules:b}):h.get("url")?(h.setParm(h.conditionParmName||"condition",
d.ligerui.toJSON(b)),h.reload()):h.loadData(d.ligerFilter.getFilterFunction(b))}})},100);g=d.ligerDialog.open({title:a.title,width:a.width,height:"auto",top:a.top,left:a.left,target:e,isResize:!0,cls:"l-selectorwin",onContentHeightChange:function(a){h.set("height",c(a));return!1},onStopResize:function(){h.refreshSize()},buttons:[{text:"选择",onclick:function(a,b){f();b.hide()}},{text:"取消",onclick:function(a,b){b.hide()}}]});b&&(b.includeControls=b.includeControls||[],b.includeControls.push(g));h.refreshSize()}}
function e(b,c){for(var d=0;c&&c[d];d++)if(c[d][a.valueField]==b)return!0;return!1}function f(){var b=h.selected||[],c=[],f=[],g=[];d(b).each(function(b,e){a.valueField&&c.push(e[a.valueField]);a.textField&&f.push(e[a.textField]);b=d.extend(!0,{},this);h.formatRecord(b,!0);g.push(b)});var k=[];d(m).each(function(c,d){!e(d[a.valueField],b)&&e(d[a.valueField],h.rows)&&k.push(d)});var v=[],w=[],x=[];d(k).each(function(b,c){a.valueField&&v.push(c[a.valueField]);a.textField&&w.push(c[a.textField]);b=d.extend(!0,
{},this);h.formatRecord(b,!0);x.push(b)});a.onSelect({value:c.join(a.split),text:f.join(a.split),data:g,remvoeValue:v.join(a.split),remvoeText:w.join(a.split),removeData:x})}a=d.extend({title:"选择数据",width:700,height:320,top:null,left:null,split:";",valueField:null,textField:null,grid:null,condition:null,onSelect:function(a){},searchClick:a.searchClick,selectInit:function(a){return!1}},a);if(a.grid){var g,h,k,m=a.lastSelected||[];return function(){c();return!1}}}})(jQuery);
(function(d){d.fn.ligerPortal=function(a){return d.ligerui.run.call(this,"ligerPortal",arguments)};d.ligerDefaults.Portal={width:null,rows:null,columns:null,url:null,method:"get",parms:null,draggable:!1,onLoaded:null};d.ligerDefaults.Portal_rows={width:null,height:null};d.ligerDefaults.Portal_columns={width:null,height:null};d.ligerMethos.Portal={};d.ligerui.controls.Portal=function(a,b){d.ligerui.controls.Portal.base.constructor.call(this,a,b)};d.ligerui.controls.Portal.ligerExtend(d.ligerui.core.UIComponent,
{__getType:function(){return"Portal"},__idPrev:function(){return"Portal"},_extendMethods:function(){return d.ligerMethos.Portal},_init:function(){var a=this.options;d.ligerui.controls.Portal.base._init.call(this);d("\x3ediv",this.element).length&&(a.columns=[],d("\x3ediv",this.element).each(function(b,c){a.columns[b]={panels:[]}}),this.tempInitPanels=d("\x3cdiv\x3e\x3c/div\x3e"),d("\x3ediv",this.element).appendTo(this.tempInitPanels));!a.rows&&a.columns&&(a.rows=[{columns:a.columns}])},_render:function(){var a=
this.options;this.portal=d(this.element).addClass("l-portal").html("");this.set(a)},_setRows:function(a){this.rows=[];if(a&&a.length)for(var b=0;b<a.length;b++){var c=a[b],e=d('\x3cdiv class\x3d"l-row"\x3e\x3c/div\x3e').appendTo(this.portal);this.rows[b]=this._renderRow({row:c,rowIndex:b,jrow:e});e.append('\x3cdiv class\x3d"l-clear"\x3e\x3c/div\x3e')}},_renderRow:function(a){var b=a.row,c=a.rowIndex;a=a.jrow;var e={element:a[0]};b.width&&("string"==typeof b.width?-1<b.width.indexOf("%")?a.width(b.width):
a.width(parseInt(b.width)):a.width(b.width));b.height&&a.height(b.height);b.columns&&(e.columns=[]);if(b.columns&&b.columns.length)for(var f=0;f<b.columns.length;f++){var g=b.columns[f],h=d('\x3cdiv class\x3d"l-column"\x3e\x3c/div\x3e').appendTo(a);e.columns[f]=this._renderColumn({column:g,columnIndex:f,jcolumn:h,rowIndex:c})}return e},remove:function(a){var b=a.rowIndex,c=a.columnIndex;a=a.index;null==a&&(a=-1);0<=a&&this.rows[b]&&this.rows[b].columns&&this.rows[b].columns[c]&&this.rows[b].columns[c].panels&&
((b=this.rows[b].columns[c].panels[a])&&b.close(),this._updatePortal())},add:function(a){var b=this.options,c=a.rowIndex,e=a.columnIndex,f=a.index;a=a.panel;null==f&&(f=-1);if(this.rows[c]&&this.rows[c].columns&&this.rows[c].columns[e]){var g=this.rows[c].columns[e],b=b.rows[c].columns[e],h;d(g.element);b.panels=b.panels||[];g.panels=g.panels||[];b.panels.splice(f,0,a);0>f?(h=d("\x3cdiv\x3e\x3c/div\x3e").insertBefore(g.jplace),h=h.ligerPanel(a)):g.panels[f]&&(h=d("\x3cdiv\x3e\x3c/div\x3e").insertBefore(g.panels[f].panel),
h=h.ligerPanel(a));h&&(h.bind("closed",this._createPanelClosed()),this.setPanelEvent({panel:h}),g.panels.splice(f,0,h));this._updatePortal()}},_createPanelClosed:function(){var a=this,b=this.options;return function(){var c=this,e=a.getPanels(),f,g,h;d(e).each(function(){this.panel==c&&(f=this.rowIndex,g=this.columnIndex,h=this.index)});b.rows[f].columns[g].panels.splice(h,1);a.rows[f].columns[g].panels.splice(h,1)}},_renderColumn:function(a){var b=a.column,c=a.columnIndex;a=a.jcolumn;var e={element:a[0]};
b.width&&a.width(b.width);b.height&&a.height(b.height);b.panels&&(e.panels=[]);if(b.panels&&b.panels.length)for(c=0;c<b.panels.length;c++){var f=b.panels[c],g=d("\x3cdiv\x3e\x3c/div\x3e").appendTo(a);e.panels[c]=g.ligerPanel(f);e.panels[c].bind("closed",this._createPanelClosed());this.setPanelEvent({panel:e.panels[c]})}else this.tempInitPanels&&(c=this.tempInitPanels.find("\x3ediv:eq("+c+")"),c.length&&(e.panels=[],b={},c=c.clone(),liger.inject&&liger.inject.getOptions&&(b=liger.inject.getOptions({jelement:c,
defaults:d.ligerDefaults.Panel,config:liger.inject.config.Panel})),e.panels[0]=c.appendTo(a).ligerPanel(b),e.panels[0].bind("closed",this._createPanelClosed()),this.setPanelEvent({panel:e.panels[0]})));e.jplace=d('\x3cdiv class\x3d"l-column-place"\x3e\x3c/div\x3e').appendTo(a);return e},setPanelEvent:function(a){var b=a.panel,c=b.panel,e=this,f=this.options;d.fn.ligerDrag&&f.draggable&&c.addClass("l-panel-draggable").ligerDrag({proxy:!1,revert:!0,handler:".l-panel-header span:first",onRendered:function(){},
onStartDrag:function(a,b){e.portal.find("\x3e.l-row").addClass("l-row-dragging");this.jplace=d('\x3cdiv class\x3d"l-panel-place"\x3e\x3c/div\x3e');this.jplace.height(c.height());c.width(c.width());c.addClass("l-panel-dragging");c.css("position","absolute");c.after(this.jplace);e._updatePortal()},onDrag:function(a,d){function f(a,b,c,d){var e=a?a.jpanel:b.jplace;if(!e)return null;var f=e.height(),g=e.width(),h=e.offset().left,e=e.offset().top;if(c>h-3&&c<h+g+3){if(d>e-3&&d<e+f/2+3)return{panel:a,column:b,
position:"top"};if(d>e+f/2-3&&d<e+f+3)return{panel:a,column:b,position:a?"bottom":"top"}}return null}c.height();a=c.width();d=c.offset();a=d.left+a/2;d=d.top+10;var g=e.getPanels(),h=e.getEmptyColumns();(a=function(a,c,d,e){i=0;for(l=a.length;i<l;i++){var g=a[i];if(g.panel!=b&&(g=f(g,null,d,e)))return g}i=0;for(l=c.length;i<l;i++)if(g=f(null,c[i],d,e))return g;return null}(g,h,a,d))?this.placeStatus&&(this.placeStatus.panel&&a.panel&&this.placeStatus.panel.rowIndex==a.panel.rowIndex&&this.placeStatus.panel.columnIndex==
a.panel.columnIndex&&this.placeStatus.panel.index==a.panel.index&&this.placeStatus.position==a.position||this.placeStatus.column&&a.column&&this.placeStatus.column.rowIndex==a.column.rowIndex&&this.placeStatus.column.columnIndex==a.column.columnIndex&&this.placeStatus.position==a.position)||("top"==a.position?(this.jplace.insertBefore(a.panel?a.panel.jpanel:a.column.jplace),this.savedPosition=a.panel?a.panel:a.column,this.savedPosition.inTop=!0):"bottom"==a.position&&(this.jplace.insertAfter(a.panel.jpanel),
this.savedPosition=a.panel,this.savedPosition.inTop=!1),this.placeStatus=a):this.placeStatus=null},onStopDrag:function(a,h){e.portal.find("\x3e.l-row").removeClass("l-row-dragging");b.set("width",b.get("width"));c.removeClass("l-panel-dragging");if(this.jplace&&(c.css({position:"relative",left:null,top:null}),c.insertAfter(this.jplace),e.portal.find("\x3e.l-row \x3e .l-column \x3e.l-panel-place").remove(),this.savedPosition)){a=e.getPanels();var g,m,n;d(a).each(function(){this.panel==b&&(g=this.rowIndex,
m=this.columnIndex,n=this.index)});a=f.rows[g].columns[m].panels[n];h=e.rows[g].columns[m].panels[n];f.rows[g].columns[m].panels.splice(n,1);e.rows[g].columns[m].panels.splice(n,1);this.savedPosition.panel?(f.rows[this.savedPosition.rowIndex].columns[this.savedPosition.columnIndex].panels.splice(this.savedPosition.index+this.savedPosition.inTop?-1:0,0,a),e.rows[this.savedPosition.rowIndex].columns[this.savedPosition.columnIndex].panels.splice(this.savedPosition.index+this.savedPosition.inTop?-1:0,
0,h)):(f.rows[this.savedPosition.rowIndex].columns[this.savedPosition.columnIndex].panels=[a],e.rows[this.savedPosition.rowIndex].columns[this.savedPosition.columnIndex].panels=[h])}e._updatePortal();return!1}})},_updatePortal:function(){d(this.rows).each(function(a){d(this.columns).each(function(a){this.panels&&this.panels.length?d(this.element).removeClass("l-column-empty"):d(this.element).addClass("l-column-empty")})})},getPanels:function(){var a=[];d(this.rows).each(function(b){d(this.columns).each(function(c){d(this.panels).each(function(d){a.push({rowIndex:b,
columnIndex:c,index:d,panel:this,jpanel:this.panel})})})});return a},getPanel:function(a){a=d.extend({rowIndex:0,columnIndex:0,index:0},a);var b=null;d(this.rows).each(function(c){d(this.columns).each(function(e){d(this.panels).each(function(d){b||c==a.rowIndex&&e==a.columnIndex&&d==a.index&&(b=this)})})});return b},getEmptyColumns:function(){var a=[];d(this.rows).each(function(b){d(this.columns).each(function(c){this.panels&&this.panels.length||a.push({rowIndex:b,columnIndex:c,jplace:this.jplace})})});
return a},_setUrl:function(a){var b=this,c=this.options;a&&d.ajax({url:a,data:c.parms,type:c.method,dataType:"json",success:function(a){b.set("rows",a)}})},_setWidth:function(a){a&&this.portal.width(a)},collapseAll:function(){var a=this.getPanels();d(a).each(function(a,c){c.panel.collapse()})},expandAll:function(){var a=this.getPanels();d(a).each(function(a,c){c.panel.expand()})}})})(jQuery);
(function(d){d.fn.ligerRadio=function(){return d.ligerui.run.call(this,"ligerRadio",arguments)};d.fn.ligerGetRadioManager=function(){return d.ligerui.run.call(this,"ligerGetRadioManager",arguments)};d.ligerDefaults.Radio={disabled:!1};d.ligerMethos.Radio={};d.ligerui.controls.Radio=function(a,b){d.ligerui.controls.Radio.base.constructor.call(this,a,b)};d.ligerui.controls.Radio.ligerExtend(d.ligerui.controls.Input,{__getType:function(){return"Radio"},__idPrev:function(){return"Radio"},_extendMethods:function(){return d.ligerMethos.Radio},
_render:function(){var a=this,b=this.options;a.input=d(this.element);a.link=d('\x3ca href\x3d"javascript:void(0)" class\x3d"l-radio"\x3e\x3c/a\x3e');a.wrapper=a.input.addClass("l-hidden").wrap('\x3cdiv class\x3d"l-radio-wrapper"\x3e\x3c/div\x3e').parent();a.wrapper.prepend(a.link);a.input.change(function(){this.checked?a.link.addClass("l-radio-checked"):a.link.removeClass("l-radio-checked");return!0});a.link.click(function(){a._doclick()});a.wrapper.hover(function(){b.disabled||d(this).addClass("l-over")},
function(){d(this).removeClass("l-over")});this.element.checked&&a.link.addClass("l-radio-checked");this.element.id&&d("label[for\x3d"+this.element.id+"]").click(function(){a._doclick()});a.set(b)},setValue:function(a){a?(this.input[0].checked=!0,this.link.addClass("l-radio-checked")):(this.input[0].checked=!1,this.link.removeClass("l-radio-checked"))},getValue:function(){return this.input[0].checked},setEnabled:function(){this.input.attr("disabled",!1);this.wrapper.removeClass("l-disabled");this.options.disabled=
!1},setDisabled:function(){this.input.attr("disabled",!0);this.wrapper.addClass("l-disabled");this.options.disabled=!0},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("l-disabled"),this.options.disabled=!0);this.input[0].checked?this.link.addClass("l-checkbox-checked"):this.link.removeClass("l-checkbox-checked")},_doclick:function(){if(this.input.attr("disabled"))return!1;this.input.trigger("click").trigger("change");d("input:radio[name\x3d"+this.input[0].name+"]",this.input[0].form?
this.input[0].form:document).not(this.input).trigger("change");return!1}})})(jQuery);
(function(d){d.fn.ligerRadioList=function(a){return d.ligerui.run.call(this,"ligerRadioList",arguments)};d.ligerDefaults.RadioList={rowSize:3,valueField:"id",textField:"text",valueFieldID:null,name:null,data:null,parms:null,url:null,urlParms:null,ajaxContentType:null,ajaxType:"post",onSuccess:null,onError:null,onSelect:null,css:null,value:null,valueFieldCssClass:null};d.ligerMethos.RadioList=d.ligerMethos.RadioList||{};d.ligerui.controls.RadioList=function(a,b){d.ligerui.controls.RadioList.base.constructor.call(this,
a,b)};d.ligerui.controls.RadioList.ligerExtend(d.ligerui.controls.Input,{__getType:function(){return"RadioList"},_extendMethods:function(){return d.ligerMethos.RadioList},_init:function(){d.ligerui.controls.RadioList.base._init.call(this)},_render:function(){var a=this.options;this.data=a.data;this.valueField=null;"hidden"===d(this.element).attr("type")||d(this.element).is(":text")?(this.valueField=d(this.element),d(this.element).is(":text")&&this.valueField.hide()):a.valueFieldID?(this.valueField=
d("#"+a.valueFieldID+":input,[name\x3d"+a.valueFieldID+"]:input"),0==this.valueField.length&&(this.valueField=d('\x3cinput type\x3d"hidden"/\x3e')),this.valueField[0].id=this.valueField[0].name=a.valueFieldID):(this.valueField=d('\x3cinput type\x3d"hidden"/\x3e'),this.valueField[0].id=this.valueField[0].name=this.id+"_val");null==this.valueField[0].name&&(this.valueField[0].name=this.valueField[0].id);a.valueFieldCssClass&&this.valueField.addClass(a.valueFieldCssClass);this.valueField.attr("data-ligerid",
this.id);"hidden"===d(this.element).attr("type")||d(this.element).is(":text")?this.radioList=d("\x3cdiv\x3e\x3c/div\x3e").insertBefore(this.element):this.radioList=d(this.element);this.radioList.html('\x3cdiv class\x3d"l-radiolist-inner"\x3e\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" border\x3d"0" class\x3d"l-radiolist-table"\x3e\x3c/table\x3e\x3c/div\x3e').addClass("l-radiolist").append(this.valueField);this.radioList.table=d("table:first",this.radioList);a.value=this.valueField.val()||a.value;
this.set(a);this._addClickEven()},destroy:function(){this.radioList&&this.radioList.remove();this.options=null;d.ligerui.remove(this)},clear:function(){this._changeValue("");this.trigger("clear")},_setCss:function(a){a&&this.radioList.addClass(a)},_setDisabled:function(a){a?(this.radioList.addClass("l-radiolist-disabled"),d("input:radio",this.radioList).attr("disabled",!0)):(this.radioList.removeClass("l-radiolist-disabled"),d("input:radio",this.radioList).removeAttr("disabled"))},_setWidth:function(a){this.radioList.width(a)},
_setHeight:function(a){this.radioList.height(a)},indexOf:function(a){var b=this.options;if(!this.data)return-1;for(var c=0,d=this.data.length;c<d;c++)if("object"==typeof a){if(this.data[c]==a)return c}else if(this.data[c][b.valueField].toString()==a.toString())return c;return-1},removeItems:function(a){var b=this;b.data&&(d(a).each(function(a,d){a=b.indexOf(d);-1!=a&&b.data.splice(a,1)}),b.refresh())},removeItem:function(a){this.data&&(a=this.indexOf(a),-1!=a&&(this.data.splice(a,1),this.refresh()))},
insertItem:function(a,b){this.data||(this.data=[]);this.data.splice(b,0,a);this.refresh()},addItems:function(a){var b=this;b.data||(b.data=[]);d(a).each(function(a,d){b.data.push(d)});b.refresh()},addItem:function(a){this.data||(this.data=[]);this.data.push(a);this.refresh()},_setValue:function(a){var b=this.options;this._changeValue(a);b.value=a},setValue:function(a){this._setValue(a)},_setUrl:function(a){var b=this,c=this.options;if(a){var e=d.isFunction(c.urlParms)?c.urlParms.call(b):c.urlParms;
if(e)for(name in e)a+=-1==a.indexOf("?")?"?":"\x26",a+=name+"\x3d"+e[name];e=d.isFunction(c.parms)?c.parms():c.parms;"application/json"==c.ajaxContentType&&"string"!=typeof e&&(e=liger.toJSON(e));d.ajax({type:"post",url:a,data:e,cache:!1,dataType:"json",contentType:c.ajaxContentType,success:function(a){b.setData(a);b.trigger("success",[a])},error:function(a,c){b.trigger("error",[a,c])}})}},setUrl:function(a){return this._setUrl(a)},setParm:function(a,b){if(a){var c=this.get("parms");c||(c={});c[a]=
b;this.set("parms",c)}},clearContent:function(){d("table",this.radioList).html("")},_setData:function(a){this.setData(a)},setData:function(a){a&&a.length&&(this.data=a,this.refresh(),this.updateStyle())},refresh:function(){var a=this.options,b=this.data;this.clearContent();if(b){for(var c=[],d=a.rowSize,f=!1,g=a.name||this.id,h=0;h<b.length;h++){var k=b[h][a.valueField],m=b[h][a.textField],n=this.id+"-"+h;0==h%d&&(f&&c.push("\x3c/tr\x3e"),c.push("\x3ctr\x3e"),f=!0);c.push("\x3ctd\x3e\x3cinput type\x3d'radio' name\x3d'"+
g+"' value\x3d'"+k+"' id\x3d'"+n+"'/\x3e\x3clabel for\x3d'"+n+"'\x3e"+m+"\x3c/label\x3e\x3c/td\x3e")}f&&c.push("\x3c/tr\x3e");this.radioList.table.append(c.join(""))}},_getValue:function(){return d('input:radio[name\x3d"'+(this.options.name||this.id)+'"]:checked').val()},getValue:function(){return this._getValue()},updateStyle:function(){var a=this;a._dataInit();d(":radio",a.element).change(function(){var b=a.getValue();a.trigger("select",[{value:b}])})},_dataInit:function(){var a=this.options,a=
this.valueField.val()||this._getValue()||a.value;this._changeValue(a)},_changeValue:function(a){d("input:radio[name\x3d'"+(this.options.name||this.id)+"']",this.radioList).each(function(){this.checked=this.value==a});this.valueField.val(a);this.selectedValue=a},_addClickEven:function(){var a=this;a.radioList.click(function(b){(b=a.getValue())&&a.valueField.val(b)})}})})(jQuery);
(function(d){d.fn.ligerResizable=function(a){return d.ligerui.run.call(this,"ligerResizable",arguments,{idAttrName:"ligeruiresizableid",hasElement:!1,propertyToElemnt:"target"})};d.fn.ligerGetResizableManager=function(){return d.ligerui.run.call(this,"ligerGetResizableManager",arguments,{idAttrName:"ligeruiresizableid",hasElement:!1,propertyToElemnt:"target"})};d.ligerDefaults.Resizable={handles:"n, e, s, w, ne, se, sw, nw",maxWidth:2E3,maxHeight:2E3,minWidth:20,minHeight:20,scope:3,animate:!1,onStartResize:function(a){},
onResize:function(a){},onStopResize:function(a){},onEndResize:null};d.ligerui.controls.Resizable=function(a){d.ligerui.controls.Resizable.base.constructor.call(this,null,a)};d.ligerui.controls.Resizable.ligerExtend(d.ligerui.core.UIComponent,{__getType:function(){return"Resizable"},__idPrev:function(){return"Resizable"},_render:function(){var a=this,b=this.options;a.target=d(b.target);a.set(b);a.target.mousemove(function(c){b.disabled||(a.dir=a._getDir(c),a.dir?a.target.css("cursor",a.dir+"-resize"):
0<a.target.css("cursor").indexOf("-resize")&&a.target.css("cursor","default"),b.target.ligeruidragid&&((c=d.ligerui.get(b.target.ligeruidragid))&&a.dir?c.set("disabled",!0):c&&c.set("disabled",!1)))}).mousedown(function(c){b.disabled||a.dir&&a._start(c)})},_rendered:function(){this.options.target.ligeruiresizableid=this.id},_getDir:function(a){var b=this.options,c="",e=this.target.offset(),f=this.target.width(),g=this.target.height(),h=b.scope,k=a.pageX||a.screenX;a=a.pageY||a.screenY;a>=e.top&&a<
e.top+h?c+="n":a<=e.top+g&&a>e.top+g-h&&(c+="s");k>=e.left&&k<e.left+h?c+="w":k<=e.left+f&&k>e.left+f-h&&(c+="e");return"all"==b.handles||""==c||-1!=d.inArray(c,this.handles)?c:""},_setHandles:function(a){a&&(this.handles=a.replace(/(\s*)/g,"").split(","))},_createProxy:function(){this.proxy=d('\x3cdiv class\x3d"l-resizable"\x3e\x3c/div\x3e');this.proxy.width(this.target.width()).height(this.target.height());this.proxy.attr("resizableid",this.id).appendTo("body")},_removeProxy:function(){this.proxy&&
(this.proxy.remove(),this.proxy=null)},_start:function(a){var b=this;b._createProxy();b.proxy.css({left:b.target.offset().left,top:b.target.offset().top,position:"absolute"});b.current={dir:b.dir,left:b.target.offset().left,top:b.target.offset().top,startX:a.pageX||a.screenX,startY:a.pageY||a.clientY,width:b.target.width(),height:b.target.height()};d(document).bind("selectstart.resizable",function(){return!1});d(document).bind("mouseup.resizable",function(){b._stop.apply(b,arguments)});d(document).bind("mousemove.resizable",
function(){b._drag.apply(b,arguments)});b.proxy.show();b.trigger("startResize",[b.current,a])},changeBy:{t:["n","ne","nw"],l:["w","sw","nw"],w:"w sw nw e ne se".split(" "),h:"n ne nw s se sw".split(" ")},_drag:function(a){if(this.current&&this.proxy){this.proxy.css("cursor",""==this.current.dir?"default":this.current.dir+"-resize");var b=a.pageY||a.screenY;this.current.diffX=(a.pageX||a.screenX)-this.current.startX;this.current.diffY=b-this.current.startY;this._applyResize(this.proxy);this.trigger("resize",
[this.current,a])}},_stop:function(a){this.hasBind("stopResize")?0!=this.trigger("stopResize",[this.current,a])&&this._applyResize():this._applyResize();this._removeProxy();this.trigger("endResize",[this.current,a]);d(document).unbind("selectstart.resizable");d(document).unbind("mousemove.resizable");d(document).unbind("mouseup.resizable")},_applyResize:function(a){var b=this.options,c={left:this.current.left,top:this.current.top,width:this.current.width,height:this.current.height},e=!1;a||(a=this.target,
e=!0,isNaN(parseInt(this.target.css("top")))?c.top=0:c.top=parseInt(this.target.css("top")),isNaN(parseInt(this.target.css("left")))?c.left=0:c.left=parseInt(this.target.css("left")));-1<d.inArray(this.current.dir,this.changeBy.l)?(c.left+=this.current.diffX,this.current.diffLeft=this.current.diffX):e&&delete c.left;-1<d.inArray(this.current.dir,this.changeBy.t)?(c.top+=this.current.diffY,this.current.diffTop=this.current.diffY):e&&delete c.top;-1<d.inArray(this.current.dir,this.changeBy.w)?(c.width+=
(-1==this.current.dir.indexOf("w")?1:-1)*this.current.diffX,this.current.newWidth=c.width):e&&delete c.width;-1<d.inArray(this.current.dir,this.changeBy.h)?(c.height+=(-1==this.current.dir.indexOf("n")?1:-1)*this.current.diffY,this.current.newHeight=c.height):e&&delete c.height;e&&b.animate?a.animate(c):a.css(c)}})})(jQuery);
(function(d){d.fn.ligerSpinner=function(){return d.ligerui.run.call(this,"ligerSpinner",arguments)};d.fn.ligerGetSpinnerManager=function(){return d.ligerui.run.call(this,"ligerGetSpinnerManager",arguments)};d.ligerDefaults.Spinner={type:"float",isNegative:!0,decimalplace:2,step:.1,interval:50,value:null,onChangeValue:!1,minValue:null,maxValue:null,disabled:!1,readonly:!1};d.ligerMethos.Spinner={};d.ligerui.controls.Spinner=function(a,b){d.ligerui.controls.Spinner.base.constructor.call(this,a,b)};
d.ligerui.controls.Spinner.ligerExtend(d.ligerui.controls.Input,{__getType:function(){return"Spinner"},__idPrev:function(){return"Spinner"},_extendMethods:function(){return d.ligerMethos.Spinner},_init:function(){d.ligerui.controls.Spinner.base._init.call(this);var a=this.options;"float"==a.type?(a.step=.1,a.interval=50):("int"!=a.type&&"time"!=a.type&&(a.type="int"),a.step=1,a.interval=100)},_render:function(){var a=this,b=this.options;a.interval=null;a.inputText=null;a.value=null;a.textFieldID=
"";"input"==this.element.tagName.toLowerCase()&&this.element.type&&"text"==this.element.type?(a.inputText=d(this.element),this.element.id&&(a.textFieldID=this.element.id)):(a.inputText=d('\x3cinput type\x3d"text"/\x3e'),a.inputText.appendTo(d(this.element)));""==a.textFieldID&&b.textFieldID&&(a.textFieldID=b.textFieldID);a.link=d('\x3cdiv class\x3d"l-trigger"\x3e\x3cdiv class\x3d"l-spinner-up"\x3e\x3cdiv class\x3d"l-spinner-icon"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"l-spinner-split"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-spinner-down"\x3e\x3cdiv class\x3d"l-spinner-icon"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e');
a.wrapper=a.inputText.wrap('\x3cdiv class\x3d"l-text"\x3e\x3c/div\x3e').parent();a.wrapper.append('\x3cdiv class\x3d"l-text-l"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-text-r"\x3e\x3c/div\x3e');a.wrapper.append(a.link).after(a.selectBox).after(a.valueField);a.link.up=d(".l-spinner-up",a.link);a.link.down=d(".l-spinner-down",a.link);a.inputText.addClass("l-text-field");b.disabled&&a.wrapper.addClass("l-text-disabled");a._isVerify(a.inputText.val())||(a.value=a._getDefaultValue(),a._showValue(a.value));a.link.up.hover(function(){b.disabled||
d(this).addClass("l-spinner-up-over")},function(){clearInterval(a.interval);d(document).unbind("selectstart.spinner");d(this).removeClass("l-spinner-up-over")}).mousedown(function(){b.disabled||(a._uping.call(a),a.interval=setInterval(function(){a._uping.call(a)},b.interval),d(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(a.interval);a.inputText.trigger("change").focus();d(document).unbind("selectstart.spinner")});a.link.down.hover(function(){b.disabled||
d(this).addClass("l-spinner-down-over")},function(){clearInterval(a.interval);d(document).unbind("selectstart.spinner");d(this).removeClass("l-spinner-down-over")}).mousedown(function(){b.disabled||(a._downing.call(a),a.interval=setInterval(function(){a._downing.call(a)},b.interval),d(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(a.interval);a.inputText.trigger("change").focus();d(document).unbind("selectstart.spinner")});a.inputText.change(function(){var b=
a.inputText.val();a.value=a._getVerifyValue(b);a.trigger("changeValue",[a.value]);a._showValue(a.value)}).blur(function(){a.wrapper.removeClass("l-text-focus")}).focus(function(){a.wrapper.addClass("l-text-focus")});a.wrapper.hover(function(){b.disabled||a.wrapper.addClass("l-text-over")},function(){a.wrapper.removeClass("l-text-over")});a.set(b)},_setWidth:function(a){20<a&&(this.wrapper.css({width:a}),this.inputText.css({width:a-20}))},_setHeight:function(a){10<a&&(this.wrapper.height(a),this.inputText.height(a-
2),this.link.height(a-4))},_setDisabled:function(a){a?this.wrapper.addClass("l-text-disabled"):this.wrapper.removeClass("l-text-disabled")},_showValue:function(a){var b=this.options;a&&"NaN"!=a||(a=0);"float"==b.type&&(a=parseFloat(a).toFixed(b.decimalplace));this.inputText.val(a)},_setValue:function(a){this._showValue(a)},setValue:function(a){this._showValue(a)},getValue:function(){return this.inputText.val()},_round:function(a,b){for(var c=1;0<b;c*=10,b--);for(;0>b;c/=10,b++);return Math.round(a*
c)/c},_isInt:function(a){return(this.options.isNegative?/^-?\d+$/:/^\d+$/).test(a)&&parseFloat(a)==a?!0:!1},_isFloat:function(a){return(this.options.isNegative?/^-?\d+(\.\d+)?$/:/^\d+(\.\d+)?$/).test(a)&&parseFloat(a)==a?!0:!1},_isTime:function(a){a=a.match(/^(\d{1,2}):(\d{1,2})$/);return null==a||24<a[1]||60<a[2]?!1:!0},_isVerify:function(a){var b=this.options;if("float"==b.type){if(!this._isFloat(a))return!1;a=parseFloat(a);return void 0!=b.minValue&&b.minValue>a||void 0!=b.maxValue&&b.maxValue<
a?!1:!0}if("int"==b.type){if(!this._isInt(a))return!1;a=parseInt(a);return void 0!=b.minValue&&b.minValue>a||void 0!=b.maxValue&&b.maxValue<a?!1:!0}return"time"==b.type?this._isTime(a):!1},_getVerifyValue:function(a){var b=this.options,c=null;"float"==b.type?c=this._round(a,b.decimalplace):"int"==b.type?c=parseInt(a):"time"==b.type&&(c=a);return this._isVerify(c)?c:this.value},_isOverValue:function(a){var b=this.options;return null!=b.minValue&&b.minValue>a||null!=b.maxValue&&b.maxValue<a?!0:!1},
_getDefaultValue:function(){var a=this.options;if("float"==a.type||"int"==a.type)return 0;if("time"==a.type)return"00:00"},_addValue:function(a){var b=this.inputText.val(),b=parseFloat(b)+a;this._isOverValue(b)||(this._showValue(b),this.inputText.trigger("change"))},_addTime:function(a){var b=this.inputText.val(),b=b.match(/^(\d{1,2}):(\d{1,2})$/);newminute=parseInt(b[2])+a;10>newminute&&(newminute="0"+newminute);b=b[1]+":"+newminute;this._isOverValue(b)||(this._showValue(b),this.inputText.trigger("change"))},
_uping:function(){var a=this.options;"float"==a.type||"int"==a.type?this._addValue(a.step):"time"==a.type&&this._addTime(a.step)},_downing:function(){var a=this.options;"float"==a.type||"int"==a.type?this._addValue(-1*a.step):"time"==a.type&&this._addTime(-1*a.step)},_isDateTime:function(a){a=a.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(null==a)return!1;var b=new Date(a[1],a[3]-1,a[4]);return"NaN"==b?!1:b.getFullYear()==a[1]&&b.getMonth()+1==a[3]&&b.getDate()==a[4]},_isLongDateTime:function(a){a=
a.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/);if(null==a)return!1;var b=new Date(a[1],a[3]-1,a[4],a[5],a[6]);return"NaN"==b?!1:b.getFullYear()==a[1]&&b.getMonth()+1==a[3]&&b.getDate()==a[4]&&b.getHours()==a[5]&&b.getMinutes()==a[6]}})})(jQuery);
(function(d){d.fn.ligerTab=function(a){return d.ligerui.run.call(this,"ligerTab",arguments)};d.fn.ligerGetTabManager=function(){return d.ligerui.run.call(this,"ligerGetTabManager",arguments)};d.ligerDefaults.Tab={height:null,heightDiff:0,tabMargin:2,tabWidthDiff:0,autoMove:!1,changeHeightOnResize:!1,contextmenu:!0,dblClickToClose:!1,dragToMove:!1,showSwitch:!1,showSwitchInTab:!1,data:null,onBeforeOverrideTabItem:null,onAfterOverrideTabItem:null,onBeforeRemoveTabItem:null,onAfterRemoveTabItem:null,
onBeforeAddTabItem:null,onAfterAddTabItem:null,onBeforeSelectTabItem:null,onAfterSelectTabItem:null,onCloseOther:null,onCloseAll:null,onClose:null,onReload:null,onSwitchRender:null};d.ligerDefaults.TabString={closeMessage:"关闭当前页",closeOtherMessage:"关闭其他",closeAllMessage:"关闭所有",reloadMessage:"刷新"};d.ligerMethos.Tab={};d.ligerui.controls.Tab=function(a,b){d.ligerui.controls.Tab.base.constructor.call(this,a,b)};d.ligerui.controls.Tab.ligerExtend(d.ligerui.core.UIComponent,{__getType:function(){return"Tab"},
__idPrev:function(){return"Tab"},_extendMethods:function(){return d.ligerMethos.Tab},_render:function(){function a(){var a=b.tab.width()-parseInt(b.tab.links.css("marginLeft"),10)-parseInt(b.tab.links.css("marginRight"),10);b.tab.links.width(a)}var b=this,c=this.options;c.height&&(b.makeFullHeight=!0);b.tab=d(this.element);b.tab.addClass("l-tab");c.contextmenu&&d.ligerMenu&&(b.tab.menu=d.ligerMenu({width:100,items:[{text:c.closeMessage,id:"close",click:function(){b._menuItemClick.apply(b,arguments)}},
{text:c.closeOtherMessage,id:"closeother",click:function(){b._menuItemClick.apply(b,arguments)}},{text:c.closeAllMessage,id:"closeall",click:function(){b._menuItemClick.apply(b,arguments)}},{text:c.reloadMessage,id:"reload",click:function(){b._menuItemClick.apply(b,arguments)}}]}));b.tab.content=d('\x3cdiv class\x3d"l-tab-content"\x3e\x3c/div\x3e');d("\x3e div",b.tab).appendTo(b.tab.content);b.tab.content.appendTo(b.tab);b.tab.links=d('\x3cdiv class\x3d"l-tab-links"\x3e\x3cul style\x3d"left: 0px; "\x3e\x3c/ul\x3e\x3cdiv class\x3d"l-tab-switch"\x3e\x3c/div\x3e\x3c/div\x3e');
b.tab.links.prependTo(b.tab);b.tab.links.ul=d("ul",b.tab.links);var e=d("\x3e div[lselected\x3dtrue]",b.tab.content),f=0<e.length;b.selectedTabId=e.attr("tabid");d("\x3e div",b.tab.content).each(function(a,c){var e=d('\x3cli class\x3d""\x3e\x3ca\x3e\x3c/a\x3e\x3cdiv class\x3d"l-tab-links-item-left"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-tab-links-item-right"\x3e\x3c/div\x3e\x3c/li\x3e');c=d(this);c.attr("title")&&(d("\x3e a",e).html(c.attr("title")),c.attr("title",""));var g=c.attr("tabid");void 0==g&&
(g=b.getNewTabid(),c.attr("tabid",g),c.attr("lselected")&&(b.selectedTabId=g));e.attr("tabid",g);f||0!=a||(b.selectedTabId=g);c.attr("showClose")&&e.append("\x3cdiv class\x3d'l-tab-links-item-close'\x3e\x3c/div\x3e");d("\x3e ul",b.tab.links).append(e);c.hasClass("l-tab-content-item")||c.addClass("l-tab-content-item");if(0<c.find("iframe").length&&(a=d("iframe:first",c),"complete"!=a[0].readyState)){0==c.find(".l-tab-loading:first").length&&c.prepend("\x3cdiv class\x3d'l-tab-loading' style\x3d'display:block;'\x3e\x3c/div\x3e");
var h=d(".l-tab-loading:first",c);a.bind("load.tab",function(){h.hide()})}});b.selectTabItem(b.selectedTabId);c.height&&("string"==typeof c.height&&0<c.height.indexOf("%")?(b.onResize(),c.changeHeightOnResize&&d(window).resize(function(){b.onResize.call(b)})):b.setHeight(c.height));b.makeFullHeight&&b.setContentHeight();d("li",b.tab.links).each(function(){b._addTabItemEvent(d(this))});b.tab.bind("dblclick.tab",function(a){if(c.dblClickToClose){b.dblclicking=!0;a=a.target||a.srcElement;if("a"==a.tagName.toLowerCase()){var e=
d(a).parent().attr("tabid");d(a).parent().find("div.l-tab-links-item-close").length&&b.removeTabItem(e)}b.dblclicking=!1}});b.set(c);setTimeout(a,100);d(window).resize(function(){a.call(b)});b.bind("sysWidthChange",function(){a.call(b)})},_setShowSwitch:function(a){var b=this;a?(d(".l-tab-switch",b.tab.links).length||d("\x3cdiv class\x3d'l-tab-switch'\x3e\x3c/div\x3e").appendTo(b.tab.links),d(b.tab).addClass("l-tab-switchable"),d(".l-tab-switch",b.tab).click(function(){b.toggleSwitch(this)})):(d(b.tab).removeClass("l-tab-switchable"),
d("body \x3e .l-tab-windowsswitch").remove())},_setShowSwitchInTab:function(a){var b=this;this.options.showSwitch&&a?(d(b.tab).removeClass("l-tab-switchable"),d(".l-tab-switch",b.tab).remove(),a=d("\x3cli class\x3d'l-tab-itemswitch'\x3e\x3ca\x3e\x3c/a\x3e\x3cdiv class\x3d'l-tab-links-item-left'\x3e\x3c/div\x3e\x3cdiv class\x3d'l-tab-links-item-right'\x3e\x3c/div\x3e\x3c/li\x3e"),a.appendTo(b.tab.links.ul),a.click(function(){b.toggleSwitch(this)})):d(".l-tab-itemswitch",b.tab.ul).remove()},toggleSwitch:function(a){var b=
this;if(d("body \x3e .l-tab-windowsswitch").length)d("body \x3e .l-tab-windowsswitch").remove();else if(null!=a){var c=d("\x3cdiv class\x3d'l-tab-windowsswitch'\x3e\x3c/div\x3e").appendTo("body"),e=b.tab.links.ul.find("\x3eli"),f=b.getSelectedTabItemID();e.each(function(a,b){a=d("\x3ca href\x3d'javascript:void(0)'\x3e\x3c/a\x3e");a.text(d(b).find("a").text());b=d(b).attr("tabid");null!=b&&(b==f&&a.addClass("selected"),a.attr("tabid",b),c.append(a))});c.css({top:d(a).offset().top+d(a).height(),left:d(a).offset().left-
c.width()});c.find("a").bind("click",function(a){a=d(this).attr("tabid");void 0!=a&&(b.selectTabItem(a),b.moveToTabItem(a),d("body \x3e .l-tab-windowsswitch").remove())});b.trigger("switchRender",[c])}},_applyDrag:function(a){var b=this;b.droptip=b.droptip||d("\x3cdiv class\x3d'l-tab-drag-droptip' style\x3d'display:none'\x3e\x3cdiv class\x3d'l-drop-move-up'\x3e\x3c/div\x3e\x3cdiv class\x3d'l-drop-move-down'\x3e\x3c/div\x3e\x3c/div\x3e").appendTo("body");return d(a).ligerDrag({revert:!0,animate:!1,
proxy:function(){var a=d(this).find("a").html();b.dragproxy=d("\x3cdiv class\x3d'l-tab-drag-proxy' style\x3d'display:none'\x3e\x3cdiv class\x3d'l-drop-icon l-drop-no'\x3e\x3c/div\x3e\x3c/div\x3e").appendTo("body");b.dragproxy.append(a);return b.dragproxy},onRendered:function(){this.set("cursor","pointer")},onStartDrag:function(b,e){if(!d(a).hasClass("l-selected")||2==e.button||d(e.srcElement||e.target).hasClass("l-tab-links-item-close"))return!1},onDrag:function(a,e){null==b.dropIn&&(b.dropIn=-1);
var c=b.tab.links.ul.find("\x3eli"),g=c.index(a.target);c.each(function(a,c){if(g!=a){var f=a>g;if(-1==b.dropIn||b.dropIn==a){var h=d(this).offset();c=h.top;var k=h.top+d(this).height(),r=h.left-10,h=h.left+10;f&&(r+=d(this).width(),h+=d(this).width());var f=e.pageX||e.screenX,u=e.pageY||e.screenY;f>r&&f<h&&u>c&&u<k?(b.droptip.css({left:r+5,top:c-9}).show(),b.dropIn=a,b.dragproxy.find(".l-drop-icon").removeClass("l-drop-no").addClass("l-drop-yes")):(b.dropIn=-1,b.droptip.hide(),b.dragproxy.find(".l-drop-icon").removeClass("l-drop-yes").addClass("l-drop-no"))}}})},
onStopDrag:function(a,e){if(-1<b.dropIn){var c=b.tab.links.ul.find("\x3eli:eq("+b.dropIn+")").attr("tabid"),g=d(a.target).attr("tabid");setTimeout(function(){b.moveTabItem(g,c)},0);b.dropIn=-1;b.dragproxy.remove()}b.droptip.hide();this.set("cursor","default")}})},_setDragToMove:function(a){if(d.fn.ligerDrag){var b=this;a&&!b.drags&&(b.drags=b.drags||[],b.tab.links.ul.find("\x3eli").each(function(){b.drags.push(b._applyDrag(this))}))}},moveTabItem:function(a,b){a=this.tab.links.ul.find("\x3eli[tabid\x3d"+
a+"]");b=this.tab.links.ul.find("\x3eli[tabid\x3d"+b+"]");var c=this.tab.links.ul.find("\x3eli").index(a),d=this.tab.links.ul.find("\x3eli").index(b);c<d?b.after(a):b.before(a)},setTabButton:function(){var a=this.options,b=0,c=a.tabMargin;d("li",this.tab.links.ul).each(function(){b+=d(this).width()+c});var e=this.tab.width()-a.tabWidthDiff;if(b>e)return d(".l-tab-links-left",this.tab).length||(this.tab.links.append('\x3cdiv class\x3d"l-tab-links-left"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"l-tab-links-right" style\x3d"right:'+
a.tabWidthDiff+'px"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e'),this.setTabButtonEven()),!0;this.tab.links.ul.animate({left:0});d(".l-tab-links-left,.l-tab-links-right",this.tab.links).remove();return!1},setTabButtonEven:function(){var a=this;d(".l-tab-links-left",a.tab.links).hover(function(){d(this).addClass("l-tab-links-left-over")},function(){d(this).removeClass("l-tab-links-left-over")}).click(function(){a.moveToPrevTabItem()});d(".l-tab-links-right",a.tab.links).hover(function(){d(this).addClass("l-tab-links-right-over")},
function(){d(this).removeClass("l-tab-links-right-over")}).click(function(){a.moveToNextTabItem()})},moveToPrevTabItem:function(a){var b=d("\x3e li",this.tab.links.ul),c=d(".l-tab-links-right",this.tab),e=d(".l-tab-links-left",this.tab);if(!c.length||!e.length)return!1;c.offset();for(var c=null,f=0,g=e.offset().left+e.outerWidth(),h=0,k=b.length;h<k;h++){var m=d(b[h]),n=m.offset(),q=n.left,n=n.left+m.outerWidth();if(null!=a){if(q<g&&m.attr("tabid")==a){c=m;break}}else if(q<g&&n>=g){c=m;break}f+=m.outerWidth()+
parseInt(m.css("marginLeft"))+parseInt(m.css("marginRight"))}if(null==c)return!1;a=f-e.outerWidth();this.tab.links.ul.animate({left:-1*a});return!0},moveToNextTabItem:function(a){var b=d("\x3e li",this.tab.links.ul),c=d(".l-tab-links-right",this.tab),e=d(".l-tab-links-left",this.tab);if(!c.length||!e.length)return!1;for(var c=c.offset(),e=e.offset(),f=null,g=0,h=0,k=b.length;h<k;h++){var m=d(b[h]),g=g+(m.outerWidth()+parseInt(m.css("marginLeft"))+parseInt(m.css("marginRight"))),n=m.offset(),q=n.left,
n=n.left+m.outerWidth();if(null!=a){if(n>c.left&&m.attr("tabid")==a){f=m;break}}else if(q<=c.left&&n>c.left){f=m;break}}if(null==f)return!1;a=g-(c.left-e.left)+parseInt(f.css("marginLeft"))+parseInt(f.css("marginRight"));this.tab.links.ul.animate({left:-1*a});return!0},moveToTabItem:function(a){this.moveToPrevTabItem(a)||this.moveToNextTabItem(a)},getTabItemCount:function(){return d("li",this.tab.links.ul).length},getSelectedTabItemID:function(){return d("li.l-selected",this.tab.links.ul).attr("tabid")},
removeSelectedTabItem:function(){this.removeTabItem(this.getSelectedTabItemID())},overrideSelectedTabItem:function(a){this.overrideTabItem(this.getSelectedTabItemID(),a)},overrideTabItem:function(a,b){if(0==this.trigger("beforeOverrideTabItem",[a]))return!1;var c=b.tabid;void 0==c&&(c=this.getNewTabid());var e=b.url,f=b.content,g=b.text,h=b.showClose;b=b.height;if(!this.isTabItemExist(c)){var k=d("li[tabid\x3d"+a+"]",this.tab.links.ul),m=d(".l-tab-content-item[tabid\x3d"+a+"]",this.tab.content);k&&
m&&(k.attr("tabid",c),m.attr("tabid",c),0==d("iframe",m).length&&e?m.html("\x3ciframe frameborder\x3d'0'\x3e\x3c/iframe\x3e"):f&&m.html(f),d("iframe",m).attr("name",c),void 0==h&&(h=!0),0==h?d(".l-tab-links-item-close",k).remove():0==d(".l-tab-links-item-close",k).length&&k.append("\x3cdiv class\x3d'l-tab-links-item-close'\x3e\x3c/div\x3e"),void 0==g&&(g=c),b&&m.height(b),d("a",k).text(g),d("iframe",m).attr("src",e),this.trigger("afterOverrideTabItem",[a]))}},setHeader:function(a,b){d("li[tabid\x3d"+
a+"] a",this.tab.links.ul).text(b)},selectTabItem:function(a){var b=this.options;if(0==this.trigger("beforeSelectTabItem",[a]))return!1;this.selectedTabId=a;d("\x3e .l-tab-content-item[tabid\x3d"+a+"]",this.tab.content).show().siblings().hide();var c=d("li[tabid\x3d"+a+"]",this.tab.links.ul);if(b.autoMove&&0<c.length){var e=this.tab.links.ul,f=d(".l-tab-links-left",this.tab).outerWidth(),g=d(".l-tab-links-right",this.tab).outerWidth(),b=this.tab.width()-b.tabWidthDiff-f-g,g=e.position().left,h=c.position().left,
k=c.width();0>g&&(g=-g);g>h?e.css("left",f-h+"px"):h+k-g>b&&e.css("left",f-(h+k-b)+"px")}c.addClass("l-selected").siblings().removeClass("l-selected");this.trigger("afterSelectTabItem",[a])},moveToLastTabItem:function(){var a=this.options,b=0,c=a.tabMargin;d("li",this.tab.links.ul).each(function(){b+=d(this).width()+c});a=this.tab.width()-a.tabWidthDiff;if(b>a){var e=d(".l-tab-links-right",this.tab.links).width();this.tab.links.ul.animate({left:-1*(b-a+e+2)})}},getTabItemTitle:function(a){return d("li[tabid\x3d"+
a+"] a",this.tab.links.ul).text()},setTabItemTitle:function(a,b){d("li[tabid\x3d"+a+"] a",this.tab.links.ul).text(b)},getTabItemSrc:function(a){return d(".l-tab-content-item[tabid\x3d"+a+"] iframe",this.tab.content).attr("src")},setTabItemSrc:function(a,b){var c=d(".l-tab-content-item[tabid\x3d"+a+"]",this.tab.content),e=d(".l-tab-loading:first",c);a=d(".l-tab-content-item[tabid\x3d"+a+"] iframe",this.tab.content);e.show();a.attr("src",b).unbind("load.tab").bind("load.tab",function(){e.hide()})},
isTabItemExist:function(a){return 0<d("li[tabid\x3d"+a+"] a",this.tab.links.ul).length},addTabItem:function(a){var b=this,c=this.options;if(0==b.trigger("beforeAddTabItem",[a]))return!1;var e=a.tabid;void 0==e&&(e=b.getNewTabid());var f=a.url,g=a.content,h=a.text,k=a.showClose,m=a.height;if(b.isTabItemExist(e))b.selectTabItem(e);else{var n=d("\x3cli\x3e\x3ca\x3e\x3c/a\x3e\x3cdiv class\x3d'l-tab-links-item-left'\x3e\x3c/div\x3e\x3cdiv class\x3d'l-tab-links-item-right'\x3e\x3c/div\x3e\x3cdiv class\x3d'l-tab-links-item-close'\x3e\x3c/div\x3e\x3c/li\x3e"),
q=d("\x3cdiv class\x3d'l-tab-content-item'\x3e\x3cdiv class\x3d'l-tab-loading' style\x3d'display:block;'\x3e\x3c/div\x3e\x3ciframe frameborder\x3d'0'\x3e\x3c/iframe\x3e\x3c/div\x3e"),r=d("div:first",q),u=d("iframe:first",q);if(b.makeFullHeight){var t=b.tab.height()-b.tab.links.height();q.height(t)}n.attr("tabid",e);q.attr("tabid",e);f?(u[0].tab=b,a.data&&(u[0].openerData=a.data),u.attr("name",e).attr("id",e).attr("src",f).bind("load.tab",function(){r.hide();a.callback&&a.callback()})):(u.remove(),
r.remove());g?(q.html(g),a.callback&&a.callback()):a.target&&(q.append(a.target),a.callback&&a.callback());void 0==k&&(k=!0);0==k&&d(".l-tab-links-item-close",n).remove();void 0==h&&(h=e);m&&q.height(m);d("a",n).text(h);d(".l-tab-itemswitch",b.tab.links.ul).length?n.insertBefore(d(".l-tab-itemswitch",b.tab.links.ul)):b.tab.links.ul.append(n);b.tab.content.append(q);b.selectTabItem(e);b.setTabButton()&&b.moveToTabItem(e);b._addTabItemEvent(n);c.dragToMove&&d.fn.ligerDrag&&(b.drags=b.drags||[],n.each(function(){b.drags.push(b._applyDrag(this))}));
b.toggleSwitch();b.trigger("afterAddTabItem",[a])}},_addTabItemEvent:function(a){var b=this;a.click(function(){var a=d(this).attr("tabid");b.selectTabItem(a)});b.tab.menu&&b._addTabItemContextMenuEven(a);d(".l-tab-links-item-close",a).hover(function(){d(this).addClass("l-tab-links-item-close-over")},function(){d(this).removeClass("l-tab-links-item-close-over")}).click(function(){var a=d(this).parent().attr("tabid");b.removeTabItem(a)})},removeTabItem:function(a){if(0==this.trigger("beforeRemoveTabItem",
[a]))return!1;var b=d(".l-tab-content-item[tabid\x3d"+a+"]",this.tab.content),c=d("li[tabid\x3d"+a+"]",this.tab.links.ul);if(c.hasClass("l-selected")){var e=b.prev().attr("tabid");!1!==this.trigger("beforeSelectTabItem",[e])&&(b.prev().show(),c.prev().addClass("l-selected").siblings().removeClass("l-selected"),this.trigger("afterSelectTabItem",[e]))}c=d("iframe",b);if(c.length){e=c[0];e.src="about:blank";try{e.contentWindow.document.write("")}catch(f){console.error(f)}d.browser.msie&&CollectGarbage();
c.remove()}b.remove();d("li[tabid\x3d"+a+"]",this.tab.links.ul).remove();this.setTabButton();this.trigger("afterRemoveTabItem",[a])},hideTabItem:function(a){d("li[tabid\x3d"+a+"]",this.tab.links.ul).hasClass("l-selected")&&(d(".l-tab-content-item[tabid\x3d"+a+"]",this.tab.content).prev().show(),d("li[tabid\x3d"+a+"]",this.tab.links.ul).prev().addClass("l-selected").siblings().removeClass("l-selected"));d("li[tabid\x3d"+a+"]",this.tab.links.ul).hide();d(".l-tab-content-item[tabid\x3d"+a+"]",this.tab.content).hide()},
showTabItem:function(a){d("li[tabid\x3d"+a+"]",this.tab.links.ul).show()},addHeight:function(a){a=this.tab.height()+a;this.setHeight(a)},setHeight:function(a){this.tab.height(a);this.setContentHeight()},setContentHeight:function(){var a=this.tab.height()-this.tab.links.height();this.tab.content.height(a);d("\x3e .l-tab-content-item",this.tab.content).height(a)},getNewTabid:function(){this.getnewidcount=this.getnewidcount||0;return"tabitem"+ ++this.getnewidcount},getTabidList:function(a,b){var c=[];
d("\x3e li",this.tab.links.ul).each(function(){d(this).attr("tabid")&&d(this).attr("tabid")!=a&&(!b||0<d(".l-tab-links-item-close",this).length)&&c.push(d(this).attr("tabid"))});return c},removeOther:function(a,b){var c=this;a=c.getTabidList(a,!0);d(a).each(function(){c.removeTabItem(this)})},reload:function(a){a=d(".l-tab-content-item[tabid\x3d"+a+"]");var b=d(".l-tab-loading:first",a);a=d("iframe:first",a);var c=d(a).attr("src");b.show();a.attr("src",c).unbind("load.tab").bind("load.tab",function(){b.hide()})},
removeAll:function(a){var b=this;a=b.getTabidList(null,!0);d(a).each(function(){b.removeTabItem(this)})},onResize:function(){var a=this.options;if(!a.height||"string"!=typeof a.height||-1==a.height.indexOf("%"))return!1;if("body"==this.tab.parent()[0].tagName.toLowerCase()){var b=d(window).height(),b=b-parseInt(this.tab.parent().css("paddingTop")),b=b-parseInt(this.tab.parent().css("paddingBottom"));this.height=a.heightDiff+b*parseFloat(this.height)*.01}else this.height=a.heightDiff+this.tab.parent().height()*
parseFloat(a.height)*.01;this.tab.height(this.height);this.setContentHeight()},_menuItemClick:function(a){if(a.id&&this.actionTabid)switch(a.id){case "close":if(0==this.trigger("close"))break;this.removeTabItem(this.actionTabid);this.actionTabid=null;break;case "closeother":if(0==this.trigger("closeother"))break;this.removeOther(this.actionTabid);break;case "closeall":if(0==this.trigger("closeall"))break;this.removeAll();this.actionTabid=null;break;case "reload":0!=this.trigger("reload",[{tabid:this.actionTabid}])&&
(this.selectTabItem(this.actionTabid),this.reload(this.actionTabid))}},_addTabItemContextMenuEven:function(a){var b=this;a.bind("contextmenu",function(c){if(b.tab.menu)return b.actionTabid=a.attr("tabid"),b.tab.menu.show({top:c.pageY,left:c.pageX}),0==d(".l-tab-links-item-close",this).length?b.tab.menu.setDisabled("close"):b.tab.menu.setEnabled("close"),!1})}})})(jQuery);
(function(d){function a(a,c){var b,d;a||(a=0);a=a.toString().replace(/\$|\,/g,"").replace(/[a-zA-Z]+/g,"");-1<a.indexOf(".")&&(a=a.replace(/[0]+$/g,""));isNaN(a)&&(a=0);d=a==(a=Math.abs(a));if(null==c){if(a=a.toString(),b=-1!=a.indexOf(".")?a.substr(a.indexOf(".")+1):"")a=Math.floor(1*a),a=a.toString()}else{c=parseInt(c);var g=Math.pow(10,c);a=Math.floor(a*g+.50000000001);b=a%100;for(a=Math.floor(a/g).toString();b.toString().length<c;)b="0"+b}for(c=0;c<Math.floor((a.length-(1+c))/3);c++)a=a.substring(0,
a.length-(4*c+3))+","+a.substring(a.length-(4*c+3));a=""+((d?"":"-")+""+a);b&&(a+="."+b);return a}d.fn.ligerTextBox=function(){return d.ligerui.run.call(this,"ligerTextBox",arguments)};d.fn.ligerGetTextBoxManager=function(){return d.ligerui.run.call(this,"ligerGetTextBoxManager",arguments)};d.ligerDefaults.TextBox={onChangeValue:null,onMouseOver:null,onMouseOut:null,onBlur:null,onFocus:null,width:null,disabled:!1,initSelect:!1,value:null,precision:2,nullText:null,digits:!1,number:!1,currency:!1,readonly:!1};
d.ligerui.controls.TextBox=function(a,c){d.ligerui.controls.TextBox.base.constructor.call(this,a,c)};d.ligerui.controls.TextBox.ligerExtend(d.ligerui.controls.Input,{__getType:function(){return"TextBox"},__idPrev:function(){return"TextBox"},_init:function(){d.ligerui.controls.TextBox.base._init.call(this);var a=this.options;a.width||(a.width=d(this.element).width());d(this.element).attr("readonly")?a.readonly=!0:a.readonly&&d(this.element).attr("readonly",!0)},_render:function(){var a=this.options;
this.inputText=d(this.element);this.wrapper=this.inputText.wrap('\x3cdiv class\x3d"l-text"\x3e\x3c/div\x3e').parent();this.wrapper.append('\x3cdiv class\x3d"l-text-l"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-text-r"\x3e\x3c/div\x3e');this.inputText.hasClass("l-text-field")||this.inputText.addClass("l-text-field");this._setEvent();(a.digits||a.number||a.currency)&&this.inputText.addClass("l-text-field-number");this.set(a);this.formatValue()},destroy:function(){this.wrapper&&this.wrapper.remove();this.options=
null;liger.remove(this)},_getValue:function(){var a=this.options;return this.inputText.hasClass("l-text-field-null")?"":a.digits||a.number||a.currency?this.parseNumber():this.inputText.val()},_setNullText:function(){this.checkNotNull()},formatValue:function(){var b=this.options,c=this.inputText.val()||"";if(""==c)return"";b.currency?this.inputText.val(a(c,b.precision)):b.number&&b.precision&&c&&(b=parseFloat(this.inputText.val()).toFixed(b.precision),this.inputText.val(b))},checkNotNull:function(){var a=
this.options;!a.nullText||"null"==a.nullText||a.disabled||a.readonly?this.inputText.removeClass("l-text-field-null"):this.inputText.val()||this.inputText.addClass("l-text-field-null").val(a.nullText)},_setEvent:function(){function a(){var a;a=(a=c.inputText.val())&&"-"!=a?(e.digits?/^-?\d+$/:/^(-?\d+)(\.)?(\d+)?$/).test(a):!0;a||c.inputText.val(c.parseNumber())}var c=this,e=this.options;(e.digits||e.number||e.currency)&&c.inputText.keyup(a).bind("paste",a);c.inputText.on("blur.textBox",function(){c.trigger("blur");
c.checkNotNull();c.formatValue();c.wrapper.removeClass("l-text-focus")}).on("focus.textBox",function(){!e.readonly&&(c.trigger("focus"),e.nullText&&d(this).hasClass("l-text-field-null")&&d(this).removeClass("l-text-field-null").val(""),c.wrapper.addClass("l-text-focus"),e.digits||e.number||e.currency)&&(d(this).val(c.parseNumber()),e.initSelect&&setTimeout(function(){c.inputText.select()},150))}).change(function(){c.trigger("changeValue",[this.value])});c.wrapper.hover(function(){c.trigger("mouseOver");
c.wrapper.addClass("l-text-over")},function(){c.trigger("mouseOut");c.wrapper.removeClass("l-text-over")})},parseNumber:function(a){var b=this.options,d=b.digits?!0:!1;a=a||this.inputText.val();if(null==a||""==a)return"";if(!(b.digits||b.number||b.currency))return a;"string"!=typeof a&&(a=(a||"").toString());var f=/^\-/.test(a);if(d){if("0"==a)return a;a=a.replace(/\D+|^[0]+/g,"")}else a=a.replace(/[^0-9.]/g,""),/^[0]+[1-9]+/.test(a)&&(a=a.replace(/^[0]+/,""));if(!d&&b.precision&&(a=parseFloat(a).toFixed(b.precision),
"NaN"==a))return"0";f&&(a="-"+a);return a},_setDisabled:function(a){var b=this.options;a?(this.inputText.attr("readonly","readonly"),this.wrapper.addClass("l-text-disabled")):b.readonly||(this.inputText.removeAttr("readonly"),this.wrapper.removeClass("l-text-disabled"))},_setWidth:function(a){20<a&&(this.wrapper.css({width:a}),this.inputText.css({width:a-4}))},_setHeight:function(a){10<a&&(this.wrapper.height(a),this.inputText.height(a-2))},_setValue:function(a){null!=a&&this.inputText.val(a);this.checkNotNull()},
_setLabel:function(a){var b=this.options;this.labelwrapper?this.labelwrapper.find(".l-text-label").html(a+":\x26nbsp"):(this.labelwrapper=this.wrapper.wrap('\x3cdiv class\x3d"l-labeltext"\x3e\x3c/div\x3e').parent(),a=d('\x3cdiv class\x3d"l-text-label" style\x3d"float:left;"\x3e'+a+":\x26nbsp\x3c/div\x3e"),this.labelwrapper.prepend(a),this.wrapper.css("float","left"),b.labelWidth?this._setLabelWidth(b.labelWidth):b.labelWidth=a.width(),a.height(this.wrapper.height()),b.labelAlign&&this._setLabelAlign(b.labelAlign),
this.labelwrapper.append('\x3cbr style\x3d"clear:both;" /\x3e'),this.labelwrapper.width(b.labelWidth+b.width+2))},_setLabelWidth:function(a){this.labelwrapper&&this.labelwrapper.find(".l-text-label").width(a)},_setLabelAlign:function(a){this.labelwrapper&&this.labelwrapper.find(".l-text-label").css("text-align",a)},updateStyle:function(){var a=this.options;this.inputText.attr("readonly")?(this.wrapper.addClass("l-text-readonly"),a.disabled=!0):(this.wrapper.removeClass("l-text-readonly"),a.disabled=
!1);this.inputText.attr("disabled")?(this.wrapper.addClass("l-text-disabled"),a.disabled=!0):(this.wrapper.removeClass("l-text-disabled"),a.disabled=!1);this.inputText.hasClass("l-text-field-null")&&this.inputText.val()!=a.nullText&&this.inputText.removeClass("l-text-field-null");this.formatValue()},setValue:function(a){this._setValue(a);this.trigger("changeValue",[a])}})})(jQuery);
(function(d){d.fn.ligerToolBar=function(a){return d.ligerui.run.call(this,"ligerToolBar",arguments)};d.fn.ligerGetToolBarManager=function(){return d.ligerui.run.call(this,"ligerGetToolBarManager",arguments)};d.ligerDefaults.ToolBar={};d.ligerMethos.ToolBar={};d.ligerui.controls.ToolBar=function(a,b){d.ligerui.controls.ToolBar.base.constructor.call(this,a,b)};d.ligerui.controls.ToolBar.ligerExtend(d.ligerui.core.UIComponent,{__getType:function(){return"ToolBar"},__idPrev:function(){return"ToolBar"},
_extendMethods:function(){return d.ligerMethos.ToolBar},_render:function(){var a=this.options;this.toolbarItemCount=0;this.toolBar=d(this.element);this.toolBar.addClass("l-toolbar");this.set(a)},_setItems:function(a){var b=this;b.toolBar.html("");d(a).each(function(a,d){d.ignore||b.addItem(d)})},removeItem:function(a){d("\x3e .l-toolbar-item[toolbarid\x3d"+a+"]",this.toolBar).remove()},setEnabled:function(a){d("\x3e .l-toolbar-item[toolbarid\x3d"+a+"]",this.toolBar).removeClass("l-toolbar-item-disable")},
setDisabled:function(a){d("\x3e .l-toolbar-item[toolbarid\x3d"+a+"]",this.toolBar).addClass("l-toolbar-item-disable")},isEnable:function(a){return!d("\x3e .l-toolbar-item[toolbarid\x3d"+a+"]",this.toolBar).hasClass("l-toolbar-item-disable")},addItem:function(a){var b=this;if(a.line||"line"==a.type)b.toolBar.append('\x3cdiv class\x3d"l-bar-separator"\x3e\x3c/div\x3e');else if("text"==a.type)b.toolBar.append('\x3cdiv class\x3d"l-toolbar-item l-toolbar-text"\x3e\x3cspan\x3e'+a.text||"\x3c/span\x3e\x3c/div\x3e");
else{var c=d('\x3cdiv class\x3d"l-toolbar-item l-panel-btn '+(a.disable?"l-toolbar-item-disable":"")+'"\x3e\x3cspan\x3e\x3c/span\x3e\x3cdiv class\x3d"l-panel-btn-l"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-panel-btn-r"\x3e\x3c/div\x3e\x3c/div\x3e');b.toolBar.append(c);a.id||(a.id="item-"+ ++b.toolbarItemCount);c.attr("toolbarid",a.id);a.img?(c.append("\x3cimg src\x3d'"+a.img+"' /\x3e"),c.addClass("l-toolbar-item-hasicon")):a.icon?(c.append("\x3cdiv class\x3d'l-icon l-icon-"+a.icon+"'\x3e\x3c/div\x3e"),
c.addClass("l-toolbar-item-hasicon")):a.color&&(c.append("\x3cdiv class\x3d'l-toolbar-item-color' style\x3d'background:"+a.color+"'\x3e\x3c/div\x3e"),c.addClass("l-toolbar-item-hasicon"));a.text&&d("span:first",c).html(a.text);a.disable&&c.addClass("l-toolbar-item-disable");a.click&&c.click(function(){d(this).hasClass("l-toolbar-item-disable")||a.click(a)});if(a.menu){var e=function(){b.menuType=!1;d(this).hasClass("l-toolbar-item-disable")||d(this).removeClass("l-panel-btn-over")},f=function(){b.menuType=
!0;if(!d(this).hasClass("l-toolbar-item-disable")){b.actionMenu&&b.actionMenu.hide();var c=d(this).offset().left,e=d(this).offset().top+d(this).height();a.menu.show({top:e,left:c});b.actionMenu=a.menu;d(this).addClass("l-panel-btn-over")}};a.menu=d.ligerMenu(a.menu);a.menuType=!1;c.on({click:function(){a.menuType?e.call(this):f.call(this)},touchend:function(b){a.menuType?e.call(this):f.call(this);b.preventDefault()},mouseover:function(){f.call(this)},mouseout:function(){e.call(this)}})}else c.hover(function(){d(this).hasClass("l-toolbar-item-disable")||
d(this).addClass("l-panel-btn-over")},function(){d(this).hasClass("l-toolbar-item-disable")||d(this).removeClass("l-panel-btn-over")})}}});d.ligerui.controls.ToolBar.prototype.setEnable=d.ligerui.controls.ToolBar.prototype.setEnabled;d.ligerui.controls.ToolBar.prototype.setDisable=d.ligerui.controls.ToolBar.prototype.setDisabled})(jQuery);
(function(d){function a(a){return a?a.replace(/(^\s*)|(\s*$)/g,""):a}d.fn.ligerTree=function(a){return d.ligerui.run.call(this,"ligerTree",arguments)};d.fn.ligerGetTreeManager=function(){return d.ligerui.run.call(this,"ligerGetTreeManager",arguments)};d.ligerDefaults.Tree={url:null,urlParms:null,data:null,checkbox:!0,checkWhileSelect:!1,autoCheckboxEven:!0,enabledCompleteCheckbox:!0,parentIcon:"folder",childIcon:"leaf",textFieldName:"text",attribute:["id","url"],treeLine:!0,nodeWidth:90,statusName:"__status",
isLeaf:null,single:!1,singleOpen:!1,needCancel:!0,onBeforeExpand:function(){},onContextmenu:function(){},onExpand:function(){},onBeforeCollapse:function(){},onCollapse:function(){},onBeforeSelect:function(){},onSelect:function(){},onBeforeCancelSelect:function(){},onCancelselect:function(){},onCheck:function(){},onSuccess:function(){},onError:function(){},onClick:function(){},idFieldName:"id",parentIDFieldName:null,topParentIDValue:0,onBeforeAppend:function(){},onAppend:function(){},onAfterAppend:function(){},
slide:!0,iconFieldName:"icon",nodeDraggable:!1,nodeDraggingRender:null,btnClickToToggleOnly:!0,ajaxType:"post",ajaxContentType:null,render:null,selectable:null,isExpand:null,delay:null,idField:null,parentIDField:null,iconClsFieldName:null};d.ligerui.controls.Tree=function(a,c){d.ligerui.controls.Tree.base.constructor.call(this,a,c)};d.ligerui.controls.Tree.ligerExtend(d.ligerui.core.UIComponent,{_init:function(){d.ligerui.controls.Tree.base._init.call(this);var a=this.options;a.single&&(a.autoCheckboxEven=
!1)},_render:function(){var a=this.options;this.set(a,!0);this.tree=d(this.element);this.tree.addClass("l-tree");this.toggleNodeCallbacks=[];this.sysAttribute=["isexpand","ischecked","href","style","delay"];this.loading=d("\x3cdiv class\x3d'l-tree-loading'\x3e\x3c/div\x3e");this.tree.after(this.loading);this.data=[];this.maxOutlineLevel=1;this.treedataindex=0;this._applyTree();this._setTreeEven();this.set(a,!1)},_setTreeLine:function(a){a?this.tree.removeClass("l-tree-noline"):this.tree.addClass("l-tree-noline")},
_setParms:function(){var a=this.options;d.isFunction(a.parms)&&(a.parms=a.parms())},reload:function(a){var b=this.options;this.clear();this.loadData(null,b.url,null,{success:a})},reloadNode:function(a,c,d){var b=this.options;this.clear(a);"string"==typeof c?this.loadData(a,c,null,{success:d}):c&&(b.idField&&b.parentIDField&&(c=this.arrayToTree(c,b.idField,b.parentIDField)),this.append(a,c))},_setUrl:function(a){a&&(this.clear(),this.loadData(null,a))},_setData:function(a){a&&(this.clear(),this.append(null,
a))},setData:function(a){this.set("data",a)},getData:function(){return this.data},hasChildren:function(a){return this.options.isLeaf?!this.options.isLeaf(a):a.children?!0:!1},getParent:function(a,c){a=this.getNodeDom(a);a=this.getParentTreeItem(a,c);if(!a)return null;a=d(a).attr("treedataindex");return this._getDataNodeByTreeDataIndex(this.data,a)},getParentTreeItem:function(a,c){a=this.getNodeDom(a);var b=d(a);if(b.parent().hasClass("l-tree"))return null;if(void 0==c)return 0==b.parent().parent("li").length?
null:b.parent().parent("li")[0];a=parseInt(b.attr("outlinelevel"));for(--a;a>=c;a--)b=b.parent().parent("li");return b[0]},getChecked:function(){var a=this;if(!this.options.checkbox)return null;var c=[];d(".l-checkbox-checked",a.tree).parent().parent("li").each(function(){var b=parseInt(d(this).attr("treedataindex"));c.push({target:this,data:a._getDataNodeByTreeDataIndex(a.data,b)})});return c},getCheckedData:function(){var a=this;if(!this.options.checkbox)return null;var c=[];d(".l-checkbox-checked",
a.tree).parent().parent("li").each(function(){var b=parseInt(d(this).attr("treedataindex"));c.push(a._getDataNodeByTreeDataIndex(a.data,b))});return c},refreshTree:function(){var a=this;d.each(this.getChecked(),function(b,e){a._setParentCheckboxStatus(d(e.target))})},getSelected:function(){var a={};a.target=d(".l-selected",this.tree).parent("li")[0];if(a.target){var c=parseInt(d(a.target).attr("treedataindex"));a.data=this._getDataNodeByTreeDataIndex(this.data,c);return a}return null},upgrade:function(a){var b=
this;d(".l-note",a).each(function(){d(this).removeClass("l-note").addClass("l-expandable-open")});d(".l-note-last",a).each(function(){d(this).removeClass("l-note-last").addClass("l-expandable-open")});d("."+b._getChildNodeClassName(),a).each(function(){d(this).removeClass(b._getChildNodeClassName()).addClass(b._getParentNodeClassName(!0))})},demotion:function(a){var b=this;if(a||"li"==a[0].tagName.toLowerCase()){var e=d(a).hasClass("l-last");d(".l-expandable-open",a).each(function(){d(this).removeClass("l-expandable-open").addClass(e?
"l-note-last":"l-note")});d(".l-expandable-close",a).each(function(){d(this).removeClass("l-expandable-close").addClass(e?"l-note-last":"l-note")});d("."+b._getParentNodeClassName(!0),a).each(function(){d(this).removeClass(b._getParentNodeClassName(!0)).addClass(b._getChildNodeClassName())})}},collapseAll:function(){d(".l-expandable-open",this.tree).click()},expandAll:function(){d(".l-expandable-close",this.tree).click()},arrayToTree:function(a,c,d){function b(a){"string"==typeof a&&(a=a.replace(/[.]/g,
"").toLowerCase());return a}if(!a||!a.length)return[];for(var e=[],h={},k=a.length,m=0;m<k;m++){var n=a[m],q=b(n[c]);h[q]=n}for(m=0;m<k;m++)c=a[m],q=b(c[d]),(q=h[q])?(q.children=q.children||[],q.children.push(c)):e.push(c);return e},loadData:function(a,c,e,f){var b=this,h=this.options;f=d.extend({showLoading:function(){b.loading.show()},success:function(){},error:function(){},hideLoading:function(){b.loading.hide()}},f||{});var k=h.ajaxType;e=d.extend(d.isFunction(h.parms)?h.parms():h.parms,e);"application/json"==
h.ajaxContentType&&"string"!=typeof e&&(e=liger.toJSON(e));var m=d.isFunction(h.urlParms)?h.urlParms.call(b):h.urlParms;if(m)for(name in m)c+=-1==c.indexOf("?")?"?":"\x26",c+=name+"\x3d"+m[name];c={type:k,url:c,data:e,dataType:"json",beforeSend:function(){f.showLoading()},success:function(c){c&&(h.idField&&h.parentIDField&&(c=b.arrayToTree(c,h.idField,h.parentIDField)),f.hideLoading(),b.append(a,c),b.trigger("success",[c]),f.success(c))},error:function(a,c,d){try{f.hideLoading(),b.trigger("error",
[a,c,d]),f.error(a,c,d)}catch(u){console.error(u)}}};h.ajaxContentType&&(c.contentType=h.ajaxContentType);d.ajax(c)},clear:function(a){if(a){a=this.getNodeDom(a);var b=this._getDataNodeByTreeDataIndex(this.data,d(a).attr("treedataindex"));d(a).find("ul.l-children").remove();b&&(b.children=[])}else this.toggleNodeCallbacks=[],this.data=null,this.data=[],this.nodes=null,this.tree.html("")},getNodeDom:function(a){return null==a?a:"string"==typeof a||"number"==typeof a?d("li[treedataindex\x3d"+a+"]",
this.tree).get(0):"object"==typeof a&&"treedataindex"in a?this.getNodeDom(a.treedataindex):a.target&&a.data?a.target:a},hide:function(a){(a=this.getNodeDom(a))&&d(a).hide()},show:function(a){(a=this.getNodeDom(a))&&d(a).show()},remove:function(a){var b=this.options;a=this.getNodeDom(a);var e=parseInt(d(a).attr("treedataindex"));(e=this._getDataNodeByTreeDataIndex(this.data,e))&&this._setTreeDataStatus([e],"delete");e=this.getParentTreeItem(a);b.checkbox&&this._setParentCheckboxStatus(d(a));d(a).remove();
this._updateStyle(e?d("ul:first",e):this.tree)},_updateStyle:function(a){var b=this;a=d(" \x3e li",a);var e=a.length;e&&a.each(function(a,c){0!=a||d(this).hasClass("l-first")||d(this).addClass("l-first");a!=e-1||d(this).hasClass("l-last")||d(this).addClass("l-last");0==a&&a==e-1&&d(this).addClass("l-onlychild");d("\x3e div .l-note,\x3e div .l-note-last",this).removeClass("l-note l-note-last").addClass(a==e-1?"l-note-last":"l-note");b._setTreeItem(this,{isLast:a==e-1})})},update:function(a,c){var b=
this.options;a=this.getNodeDom(a);var f=parseInt(d(a).attr("treedataindex"));nodedata=this._getDataNodeByTreeDataIndex(this.data,f);for(var g in c)nodedata[g]=c[g],g==b.textFieldName&&(b.render?d("\x3e .l-body \x3e span",a).html(b.render(c,c[g])):d("\x3e .l-body \x3e span",a).text(c[g]))},append:function(a,c,e,f){var b=this.options;a=this.getNodeDom(a);if(0==this.trigger("beforeAppend",[a,c])||!c||!c.length)return!1;b.idFieldName&&b.parentIDFieldName&&(c=this.arrayToTree(c,b.idFieldName,b.parentIDFieldName));
this._addTreeDataIndexToData(c);this._setTreeDataStatus(c,"add");null!=e&&(e=this.getNodeDom(e));this.trigger("append",[a,c]);this._appendData(a,c);if(null==a){var h=this._getTreeHTMLByData(c,1,[],!0);h[h.length-1]=h[0]="";null!=e?(d(e)[f?"after":"before"](h.join("")),this._updateStyle(a?d("ul:first",a):this.tree)):(0<d("\x3e li:last",this.tree).length&&this._setTreeItem(d("\x3e li:last",this.tree)[0],{isLast:!1}),this.tree.append(h.join("")));d(".l-body",this.tree).hover(function(){d(this).addClass("l-over")},
function(){d(this).removeClass("l-over")});this._upadteTreeWidth()}else{b=d(a);h=parseInt(b.attr("outlinelevel"));0<d("\x3e ul",b).length||(b.append("\x3cul class\x3d'l-children'\x3e\x3c/ul\x3e"),this.upgrade(a));for(var k=[],m=1;m<=h-1;m++){var n=d(this.getParentTreeItem(a,m));k.push(n.hasClass("l-last"))}k.push(b.hasClass("l-last"));h=this._getTreeHTMLByData(c,h+1,k,!0);h[h.length-1]=h[0]="";null!=e?(d(e)[f?"after":"before"](h.join("")),this._updateStyle(a?d("ul:first",a):this.tree)):(0<d("\x3e .l-children \x3e li:last",
b).length&&this._setTreeItem(d("\x3e .l-children \x3e li:last",b)[0],{isLast:!1}),d("\x3e.l-children",a).append(h.join("")));this._upadteTreeWidth();d("\x3e.l-children .l-body",a).hover(function(){d(this).addClass("l-over")},function(){d(this).removeClass("l-over")})}this.trigger("afterAppend",[a,c])},cancelSelect:function(a,c){var b=this.options;a=this.getNodeDom(a);a=d(a);var f=parseInt(a.attr("treedataindex")),f=this._getDataNodeByTreeDataIndex(this.data,f),g=d("\x3ediv:first",a);b.checkbox?d(".l-checkbox",
g).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"):g.removeClass("l-selected");0!=c&&this.trigger("cancelSelect",[{data:f,target:a[0]}])},selectNode:function(b,c){var e=this,f=this.options,g=null;if("function"==typeof b)g=b;else{if("object"==typeof b){var h=d(b),k=parseInt(h.attr("treedataindex")),m=e._getDataNodeByTreeDataIndex(e.data,k),h=d("\x3ediv:first",h);h.length||(h=d("li[treedataindex\x3d"+k+"] \x3ediv:first",e.tree));f.checkbox?d(".l-checkbox",h).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked"):
(d("div.l-selected",e.tree).removeClass("l-selected"),h.addClass("l-selected"));0!=c&&e.trigger("select",[{data:m,target:h.parent().get(0)}]);return}g=function(c){return c[f.idFieldName]||0==c[f.idFieldName]?a(c[f.idFieldName].toString())==a(b.toString()):!1}}d("li",e.tree).each(function(){var a=d(this),a=parseInt(a.attr("treedataindex")),b=e._getDataNodeByTreeDataIndex(e.data,a);g(b,a)?e.selectNode(this,c):e.options.checkbox||e.cancelSelect(this,c)})},getTextByID:function(a){var b=this.options;return(a=
this.getDataByID(a))?a[b.textFieldName]:null},getDataByID:function(a){function b(c){for(var d=0;d<c.length;d++){var e=c[d];if(e[f.idFieldName]==a||e.children&&e.children.length&&(e=b(e.children)))return e}return null}var e=this,f=this.options,g=null;if(e.data&&e.data.length)return b(e.data);d("li",e.tree).each(function(){if(!g){var b=d(this),b=parseInt(b.attr("treedataindex")),b=e._getDataNodeByTreeDataIndex(e.data,b);b[f.idFieldName].toString()==a.toString()&&(g=b)}});return g},_getDataNodeByTreeDataIndex:function(a,
c){for(var b=0;b<a.length;b++){if(a[b].treedataindex==c)return a[b];if(a[b].children){var d=this._getDataNodeByTreeDataIndex(a[b].children,c);if(d)return d}}return null},_setTreeDataStatus:function(a,c){var b=this,f=this.options;d(a).each(function(){this[f.statusName]=c;this.children&&b._setTreeDataStatus(this.children,c)})},_addTreeDataIndexToData:function(a){var b=this;d(a).each(function(){void 0==this.treedataindex&&(this.treedataindex=b.treedataindex++,this.children&&b._addTreeDataIndexToData(this.children))})},
_addToNodes:function(a){var b=this;b.nodes=b.nodes||[];b.nodes.push(a);a.children&&d(a.children).each(function(a,c){b._addToNodes(c)})},_appendData:function(a,c){var b=this;a=parseInt(d(a).attr("treedataindex"));var f=b._getDataNodeByTreeDataIndex(b.data,a);void 0==b.treedataindex&&(b.treedataindex=0);f&&void 0==f.children&&(f.children=[]);d(c).each(function(a,c){f?f.children[f.children.length]=c:b.data[b.data.length]=c;b._addToNodes(c)})},_setTreeItem:function(a,c){if(c){a=this.getNodeDom(a);a=d(a);
var b=parseInt(a.attr("outlinelevel"));void 0!=c.isLast&&(1==c.isLast?(a.removeClass("l-last").addClass("l-last"),d("\x3e div .l-note",a).removeClass("l-note").addClass("l-note-last"),d(".l-children li",a).find(".l-box:eq("+(b-1)+")").removeClass("l-line")):0==c.isLast&&(a.removeClass("l-last"),d("\x3e div .l-note-last",a).removeClass("l-note-last").addClass("l-note"),d(".l-children li",a).find(".l-box:eq("+(b-1)+")").removeClass("l-line").addClass("l-line")))}},_upadteTreeWidth:function(){var a=
this.options,c=22*this.maxOutlineLevel;a.checkbox&&(c+=22);if(a.parentIcon||a.childIcon)c+=22;c+=a.nodeWidth;this.tree.width(c)},_getChildNodeClassName:function(){return"l-tree-icon-"+this.options.childIcon},_getParentNodeClassName:function(a){var b="l-tree-icon-"+this.options.parentIcon;a&&(b+="-open");return b},_isExpand:function(a,c){var b=this.options,d=null!=a.isExpand?a.isExpand:null!=a.isexpand?a.isexpand:b.isExpand;if(null==d)return!0;"function"==typeof d&&(d=b.isExpand({data:a,level:c}));
return"boolean"==typeof d?d:"string"==typeof d?"true"==d:"number"==typeof d?d>c:!0},_getDelay:function(a,c){var b=this.options,b=null!=a.delay?a.delay:b.delay;if(null==b)return!1;"function"==typeof b&&(b=b({data:a,level:c}));if("boolean"==typeof b)return b;if("string"==typeof b)return{url:b};"number"==typeof b&&(b=[b]);return d.isArray(b)?-1!=d.inArray(c,b):"object"==typeof b&&b.url?b:!1},_getTreeHTMLByData:function(a,c,e,f){var b=this,h=this.options;b.maxOutlineLevel<c&&(b.maxOutlineLevel=c);e=e||
[];c=c||1;var k=[];f?k.push("\x3cul class\x3d'l-children'\x3e"):k.push('\x3cul class\x3d"l-children" style\x3d"display:none"\x3e');for(f=0;f<a.length;f++){var m=a[f],n=0==f,q=f==a.length-1,r=b._getDelay(m,c),u=r?!1:b._isExpand(m,c);k.push("\x3cli ");void 0!=m.treedataindex&&k.push('treedataindex\x3d"'+m.treedataindex+'" ');u&&k.push("isexpand\x3d"+m.isexpand+" ");k.push("outlinelevel\x3d"+c+" ");for(var t=0;t<b.sysAttribute.length;t++)d(this).attr(b.sysAttribute[t])&&(a[dataindex][b.sysAttribute[t]]=
d(this).attr(b.sysAttribute[t]));for(t=0;t<h.attribute.length;t++)m[h.attribute[t]]&&k.push(h.attribute[t]+'\x3d"'+m[h.attribute[t]]+'" ');k.push('class\x3d"');n&&k.push("l-first ");q&&k.push("l-last ");n&&q&&k.push("l-onlychild ");h.selectable&&0==h.selectable(m)&&k.push(" l-unselectable ");k.push('"');k.push("\x3e");k.push('\x3cdiv class\x3d"l-body');k.push('"\x3e');for(n=0;n<=c-2;n++)e[n]?k.push('\x3cdiv class\x3d"l-box"\x3e\x3c/div\x3e'):k.push('\x3cdiv class\x3d"l-box l-line"\x3e\x3c/div\x3e');
b.hasChildren(m)?(u?k.push('\x3cdiv class\x3d"l-box l-expandable-open"\x3e\x3c/div\x3e'):k.push('\x3cdiv class\x3d"l-box l-expandable-close"\x3e\x3c/div\x3e'),h.checkbox&&(m.ischecked?k.push('\x3cdiv class\x3d"l-box l-checkbox l-checkbox-checked"\x3e\x3c/div\x3e'):k.push('\x3cdiv class\x3d"l-box l-checkbox l-checkbox-unchecked"\x3e\x3c/div\x3e')),h.parentIcon&&(k.push('\x3cdiv class\x3d"l-box l-tree-icon '),k.push(b._getParentNodeClassName(u?!0:!1)+" "),h.iconFieldName&&m[h.iconFieldName]?k.push("l-tree-icon-none"):
h.iconClsFieldName&&m[h.iconClsFieldName]&&k.push("l-tree-icon-"+m[h.iconClsFieldName]+" "),k.push('"\x3e'),h.iconFieldName&&m[h.iconFieldName]&&k.push('\x3cimg src\x3d"'+m[h.iconFieldName]+'" /\x3e'),k.push("\x3c/div\x3e"))):(q?k.push('\x3cdiv class\x3d"l-box l-note-last"\x3e\x3c/div\x3e'):k.push('\x3cdiv class\x3d"l-box l-note"\x3e\x3c/div\x3e'),h.checkbox&&(m.ischecked?k.push('\x3cdiv class\x3d"l-box l-checkbox l-checkbox-checked"\x3e\x3c/div\x3e'):k.push('\x3cdiv class\x3d"l-box l-checkbox l-checkbox-unchecked"\x3e\x3c/div\x3e')),
h.childIcon&&(k.push('\x3cdiv class\x3d"l-box l-tree-icon '),k.push(b._getChildNodeClassName()+" "),h.iconFieldName&&m[h.iconFieldName]?k.push("l-tree-icon-none"):h.iconClsFieldName&&m[h.iconClsFieldName]&&k.push("l-tree-icon-"+m[h.iconClsFieldName]+" "),k.push('"\x3e'),h.iconFieldName&&m[h.iconFieldName]&&k.push('\x3cimg src\x3d"'+m[h.iconFieldName]+'" /\x3e'),k.push("\x3c/div\x3e")));h.render?k.push("\x3cspan\x3e"+h.render(m,m[h.textFieldName])+"\x3c/span\x3e"):k.push("\x3cspan\x3e"+m[h.textFieldName]+
"\x3c/span\x3e");k.push("\x3c/div\x3e");if(b.hasChildren(m)){for(var v=[],n=0;n<e.length;n++)v.push(e[n]);v.push(q);r?1==r?b.toggleNodeCallbacks.push({data:m,callback:function(a,e){var f=b._getTreeHTMLByData(e.children,c+1,v,u).join("");d(a).append(f);d("\x3e.l-children .l-body",a).hover(function(){d(this).addClass("l-over")},function(){d(this).removeClass("l-over")});b._removeToggleNodeCallback(e)}}):r.url&&function(a,c,e){b.toggleNodeCallbacks.push({data:a,callback:function(a,f){b.loadData(a,c,
e,{showLoading:function(){d("div.l-expandable-close:first",a).addClass("l-box-loading")},hideLoading:function(){d("div.l-box-loading:first",a).removeClass("l-box-loading")}});b._removeToggleNodeCallback(f)}})}(m,r.url,r.parms):k.push(b._getTreeHTMLByData(m.children,c+1,v,u).join(""))}k.push("\x3c/li\x3e")}k.push("\x3c/ul\x3e");return k},_removeToggleNodeCallback:function(a){for(var b=0;b<=this.toggleNodeCallbacks.length;b++)if(this.toggleNodeCallbacks[b]&&this.toggleNodeCallbacks[b].data==a){this.toggleNodeCallbacks.splice(b,
1);break}},_getDataByTreeHTML:function(a){var b=this,e=this.options,f=[];d("\x3e li",a).each(function(a,c){a=f.length;f[a]={treedataindex:b.treedataindex++};f[a][e.textFieldName]=d("\x3e span,\x3e a",this).html();for(c=0;c<b.sysAttribute.length;c++)d(this).attr(b.sysAttribute[c])&&(f[a][b.sysAttribute[c]]=d(this).attr(b.sysAttribute[c]));for(c=0;c<e.attribute.length;c++)d(this).attr(e.attribute[c])&&(f[a][e.attribute[c]]=d(this).attr(e.attribute[c]));0<d("\x3e ul",this).length&&(f[a].children=b._getDataByTreeHTML(d("\x3e ul",
this)))});return f},_applyTree:function(){this.data=this._getDataByTreeHTML(this.tree);var a=this._getTreeHTMLByData(this.data,1,[],!0);a[a.length-1]=a[0]="";this.tree.html(a.join(""));this._upadteTreeWidth();d(".l-body",this.tree).hover(function(){d(this).addClass("l-over")},function(){d(this).removeClass("l-over")})},_getSrcElementByEvent:function(a){var b=a.target||a.srcElement;a=b.tagName.toLowerCase();var e=d(b).parents().add(b),b=function(a){for(var b=e.length-1;0<=b;b--)if(d(e[b]).hasClass(a))return e[b];
return null};if(-1==e.index(this.element))return{out:!0};a={tree:b("l-tree"),node:b("l-body"),checkbox:b("l-checkbox"),icon:b("l-tree-icon"),text:"span"==a};a.node&&(b=parseInt(d(a.node).parent().attr("treedataindex")),a.data=this._getDataNodeByTreeDataIndex(this.data,b));return a},_setTreeEven:function(){var a=this,c=this.options;a.hasBind("contextmenu")&&a.tree.bind("contextmenu",function(b){var c=b.target||b.srcElement,e=null;"a"==c.tagName.toLowerCase()||"span"==c.tagName.toLowerCase()||d(c).hasClass("l-box")?
e=d(c).parent().parent():d(c).hasClass("l-body")?e=d(c).parent():"li"==c.tagName.toLowerCase()&&(e=d(c));if(e)return c=parseInt(e.attr("treedataindex")),c=a._getDataNodeByTreeDataIndex(a.data,c),a.trigger("contextmenu",[{data:c,target:e[0]},b])});a.tree.click(function(b){b=b.target||b.srcElement;var e=null;if(e="a"==b.tagName.toLowerCase()||"span"==b.tagName.toLowerCase()||d(b).hasClass("l-box")?d(b).parent().parent():d(b).hasClass("l-body")?d(b).parent():d(b)){var g=parseInt(e.attr("treedataindex")),
h=a._getDataNodeByTreeDataIndex(a.data,g),g=d("div.l-body:first",e).find("div.l-expandable-open:first,div.l-expandable-close:first"),k=d(b).hasClass("l-expandable-open")||d(b).hasClass("l-expandable-close");if(!d(b).hasClass("l-checkbox")&&!k&&!e.hasClass("l-unselectable"))if(d("\x3ediv:first",e).hasClass("l-selected")&&c.needCancel){if(0==a.trigger("beforeCancelSelect",[{data:h,target:e[0]}]))return!1;d("\x3ediv:first",e).removeClass("l-selected");a.trigger("cancelSelect",[{data:h,target:e[0]}])}else{if(0==
a.trigger("beforeSelect",[{data:h,target:e[0]}]))return!1;d(".l-body",a.tree).removeClass("l-selected");d("\x3ediv:first",e).addClass("l-selected");a.trigger("select",[{data:h,target:e[0]}])}if(d(b).hasClass("l-checkbox")||c.checkWhileSelect&&!k)g=d(b).hasClass("l-checkbox")?d(b):e.find(".l-checkbox:eq(0)"),c.autoCheckboxEven?(g.hasClass("l-checkbox-unchecked")?(g.removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked"),d(".l-children .l-checkbox",e).removeClass("l-checkbox-incomplete l-checkbox-unchecked").addClass("l-checkbox-checked"),
a.trigger("check",[{data:h,target:e[0]},!0])):g.hasClass("l-checkbox-checked")?(g.removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"),d(".l-children .l-checkbox",e).removeClass("l-checkbox-incomplete l-checkbox-checked").addClass("l-checkbox-unchecked"),a.trigger("check",[{data:h,target:e[0]},!1])):g.hasClass("l-checkbox-incomplete")&&(g.removeClass("l-checkbox-incomplete").addClass("l-checkbox-checked"),d(".l-children .l-checkbox",e).removeClass("l-checkbox-incomplete l-checkbox-unchecked").addClass("l-checkbox-checked"),
a.trigger("check",[{data:h,target:e[0]},!0])),a._setParentCheckboxStatus(e)):g.hasClass("l-checkbox-unchecked")?(g.removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked"),c.single&&d(".l-checkbox",a.tree).not(b).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"),a.trigger("check",[{data:h,target:e[0]},!0])):g.hasClass("l-checkbox-checked")&&(g.removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"),a.trigger("check",[{data:h,target:e[0]},!1]));else if(g.hasClass("l-expandable-open")&&
(!c.btnClickToToggleOnly&&!d("\x3ediv:first",e).hasClass("l-selected")||k)){if(0==a.trigger("beforeCollapse",[{data:h,target:e[0]}]))return!1;g.removeClass("l-expandable-open").addClass("l-expandable-close");c.slide?d("\x3e .l-children",e).slideToggle("fast"):d("\x3e .l-children",e).hide();d("\x3e div ."+a._getParentNodeClassName(!0),e).removeClass(a._getParentNodeClassName(!0)).addClass(a._getParentNodeClassName());a.trigger("collapse",[{data:h,target:e[0]}])}else if(g.hasClass("l-expandable-close")&&
(!c.btnClickToToggleOnly||k)){if(0==a.trigger("beforeExpand",[{data:h,target:e[0]}]))return!1;d(a.toggleNodeCallbacks).each(function(){this.data==h&&this.callback(e[0],h)});g.removeClass("l-expandable-close").addClass("l-expandable-open");b=function(){a.trigger("expand",[{data:h,target:e[0]}])};c.slide?d("\x3e .l-children",e).slideToggle("fast",b):(d("\x3e .l-children",e).show(),b());d("\x3e div ."+a._getParentNodeClassName(),e).removeClass(a._getParentNodeClassName()).addClass(a._getParentNodeClassName(!0));
c.singleOpen&&g.parents("li[outlinelevel]").siblings("li[outlinelevel]").find(".l-expandable-open").click()}a.trigger("click",[{data:h,target:e[0]}])}});d.fn.ligerDrag&&c.nodeDraggable&&(a.nodeDroptip=d("\x3cdiv class\x3d'l-drag-nodedroptip' style\x3d'display:none'\x3e\x3c/div\x3e").appendTo("body"),a.tree.ligerDrag({revert:!0,animate:!1,proxyX:20,proxyY:20,proxy:function(b,f){if(a._getSrcElementByEvent(f).node){if(c.nodeDraggingRender)f=c.nodeDraggingRender(b.draggingNodes,b,a);else{f="";var e=!1,
h;for(h in b.draggingNodes){var k=b.draggingNodes[h];e&&(f+=",");f+=k.text;e=!0}}return d("\x3cdiv class\x3d'l-drag-proxy' style\x3d'display:none'\x3e\x3cdiv class\x3d'l-drop-icon l-drop-no'\x3e\x3c/div\x3e"+f+"\x3c/div\x3e").appendTo("body")}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default");a.children[this.id]=this},onStartDrag:function(b,d){if(2==d.button)return!1;this.set("cursor","default");b=a._getSrcElementByEvent(d);if(b.checkbox)return!1;if(c.checkbox){d=a.getChecked();
this.draggingNodes=[];for(var e in d)this.draggingNodes.push(d[e].data);if(!this.draggingNodes||!this.draggingNodes.length)return!1}else this.draggingNodes=[b.data];this.draggingNode=b.data;this.set("cursor","move");a.nodedragging=!0;this.validRange={top:a.tree.offset().top,bottom:a.tree.offset().top+a.tree.height(),left:a.tree.offset().left,right:a.tree.offset().left+a.tree.width()}},onDrag:function(b,c){b=this.draggingNode;if(!b)return!1;var e=this.draggingNodes?this.draggingNodes:[b];null==a.nodeDropIn&&
(a.nodeDropIn=-1);var f=c.pageX;c=c.pageY;var k=!1,m=this.validRange;if(f<m.left||f>m.right||c>m.bottom||c<m.top)a.nodeDropIn=-1,a.nodeDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no");else for(var n=0,q=a.nodes.length;n<q;n++){var r=a.nodes[n],m=r.treedataindex;b.treedataindex==m&&(k=!0);if(-1==d.inArray(r,e)&&(r=k?!0:!1,-1==a.nodeDropIn||a.nodeDropIn==m)){var u=d("li[treedataindex\x3d"+m+"] div:first",a.tree),t=u.offset(),v=t.top,w=t.top+
u.height(),x=a.tree.offset().left,z=a.tree.offset().left+a.tree.width();if(f>x&&f<z&&c>v&&c<w){b=t.top;r&&(b+=u.height());a.nodeDroptip.css({left:x,top:b,width:z-x}).show();a.nodeDropIn=m;a.nodeDropDir=r?"bottom":"top";c>v+7&&c<w-7?(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add"),a.nodeDroptip.hide(),a.nodeDropInParent=!0):(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes"),a.nodeDroptip.show(),a.nodeDropInParent=
!1);break}else-1!=a.nodeDropIn&&(a.nodeDropIn=-1,a.nodeDropInParent=!1,a.nodeDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no"))}}},onStopDrag:function(b,c){b=this.draggingNodes;a.nodedragging=!1;if(-1!=a.nodeDropIn){for(c=0;c<b.length;c++){var e=b[c].children;e&&(b=d.grep(b,function(a,b){return-1==d.inArray(a,e)}))}for(c in b){var f=b[c];a.nodeDropInParent?(a.remove(f),a.append(a.nodeDropIn,[f])):(a.remove(f),a.append(a.getParent(a.nodeDropIn),
[f],a.nodeDropIn,"bottom"==a.nodeDropDir))}a.nodeDropIn=-1}a.nodeDroptip.hide();this.set("cursor","default")}}))},_setParentCheckboxStatus:function(a){var b=this.options,e=0==d(".l-checkbox-unchecked",a.parent()).length;0==d(".l-checkbox-checked",a.parent()).length?a.parent().prev().find("\x3e .l-checkbox").removeClass("l-checkbox-checked l-checkbox-incomplete").addClass("l-checkbox-unchecked"):e||!b.enabledCompleteCheckbox?a.parent().prev().find(".l-checkbox").removeClass("l-checkbox-unchecked l-checkbox-incomplete").addClass("l-checkbox-checked"):
a.parent().prev().find("\x3e .l-checkbox").removeClass("l-checkbox-unchecked l-checkbox-checked").addClass("l-checkbox-incomplete");0<a.parent().parent("li").length&&this._setParentCheckboxStatus(a.parent().parent("li"))}})})(jQuery);
(function(d){d.ligerTip=function(a){return d.ligerui.run.call(null,"ligerTip",arguments)};d.fn.ligerTip=function(a){this.each(function(){var b=d.extend({},d.ligerDefaults.ElementTip,a||{});b.target=b.target||this;b.auto||void 0==a?(b.content||(b.content=this.title,b.removeTitle&&d(this).removeAttr("title")),b.content=b.content||this.title,d(this).bind("mouseover.tip",function(){b.x=d(this).offset().left+d(this).width()+(b.distanceX||0);b.y=d(this).offset().top+(b.distanceY||0);d.ligerTip(b)}).bind("mouseout.tip",
function(){var a=d.ligerui.managers[this.ligeruitipid];a&&a.remove()})):b.target.ligeruitipid||(b.x=d(this).offset().left+d(this).width()+(b.distanceX||0),b.y=d(this).offset().top+(b.distanceY||0),b.x=b.x||0,b.y=b.y||0,d.ligerTip(b))});return d.ligerui.get(this,"ligeruitipid")};d.fn.ligerHideTip=function(a){return this.each(function(){var b=a||{};void 0==b.isLabel&&(b.isLabel="label"==this.tagName.toLowerCase()&&null!=d(this).attr("for"));var c=this;if(b.isLabel){b=d("#"+d(this).attr("for"));if(0==
b.length)return;c=b[0]}(b=d.ligerui.managers[c.ligeruitipid])&&b.remove()}).unbind("mouseover.tip").unbind("mouseout.tip")};d.fn.ligerGetTipManager=function(){return d.ligerui.get(this)};d.ligerDefaults=d.ligerDefaults||{};d.ligerDefaults.HideTip={};d.ligerDefaults.Tip={content:null,callback:null,width:150,height:null,x:0,y:0,appendIdTo:null,target:null,auto:null,removeTitle:!0};d.ligerDefaults.ElementTip={distanceX:1,distanceY:-3,auto:null,removeTitle:!0};d.ligerMethos.Tip={};d.ligerui.controls.Tip=
function(a){d.ligerui.controls.Tip.base.constructor.call(this,null,a)};d.ligerui.controls.Tip.ligerExtend(d.ligerui.core.UIComponent,{__getType:function(){return"Tip"},__idPrev:function(){return"Tip"},_extendMethods:function(){return d.ligerMethos.Tip},_render:function(){var a=this.options,b=d('\x3cdiv class\x3d"l-verify-tip"\x3e\x3cdiv class\x3d"l-verify-tip-corner"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-verify-tip-content"\x3e\x3c/div\x3e\x3c/div\x3e');this.tip=b;this.tip.attr("id",this.id);a.content&&
(d("\x3e .l-verify-tip-content:first",b).html(a.content),b.appendTo("body"),b.css({left:a.x,top:a.y}).show(),a.width&&d("\x3e .l-verify-tip-content:first",b).width(a.width-8),a.height&&d("\x3e .l-verify-tip-content:first",b).width(a.height),(eee=a.appendIdTo)&&a.appendIdTo.attr("ligerTipId",this.id),a.target&&(d(a.target).attr("ligerTipId",this.id),a.target.ligeruitipid=this.id),a.callback&&a.callback(b),this.set(a))},_setContent:function(a){d("\x3e .l-verify-tip-content:first",this.tip).html(a)},
remove:function(){this.options.appendIdTo&&this.options.appendIdTo.removeAttr("ligerTipId");this.options.target&&(d(this.options.target).removeAttr("ligerTipId"),this.options.target.ligeruitipid=null);this.tip.remove()}})})(jQuery);
(function(d){var a=d.ligerui;a.windowCount=0;d.ligerWindow=function(b){return a.run.call(null,"ligerWindow",arguments,{isStatic:!0})};d.ligerWindow.show=function(a){return d.ligerWindow(a)};d.ligerDefaults.Window={showClose:!0,showMax:!0,showToggle:!0,showMin:!0,title:"window",load:!1,onLoaded:null,onClose:null,onRegain:null,onMax:null,modal:!1};d.ligerMethos.Window={};a.controls.Window=function(b){a.controls.Window.base.constructor.call(this,null,b)};a.controls.Window.ligerExtend(a.core.Win,{__getType:function(){return"Window"},
__idPrev:function(){return"Window"},_extendMethods:function(){return d.ligerMethos.Window},_render:function(){var b=this,c=this.options;b.window=d('\x3cdiv class\x3d"l-window"\x3e\x3cdiv class\x3d"l-window-header"\x3e\x3cdiv class\x3d"l-window-header-buttons"\x3e\x3cdiv class\x3d"l-window-toggle"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-window-max"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-window-close"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-clear"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"l-window-header-inner"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"l-window-content"\x3e\x3c/div\x3e\x3c/div\x3e');
b.element=b.window[0];b.window.content=d(".l-window-content",b.window);b.window.header=d(".l-window-header",b.window);b.window.buttons=d(".l-window-header-buttons:first",b.window);if(c.url)if(c.load)b.window.content.load(c.url,function(){b.trigger("loaded")}),b.window.content.addClass("l-window-content-scroll");else{var e=d("\x3ciframe frameborder\x3d'0' src\x3d'"+c.url+"'\x3e\x3c/iframe\x3e"),f="ligeruiwindow"+a.windowCount++;c.name&&(f=c.name);e.attr("name",f).attr("id",f);c.framename=f;e.appendTo(b.window.content);
b.iframe=e}else c.content?d("\x3cdiv\x3e"+c.content+"\x3c/div\x3e").appendTo(b.window.content):c.target&&(b.window.content.append(c.target),c.target.show());this.mask();b.active();d("body").append(b.window);b.set({width:c.width,height:c.height});f=e=0;null!=c.left?e=c.left:c.left=e=.5*(d(window).width()-b.window.width());null!=c.top?f=c.top:c.top=f=.5*(d(window).height()-b.window.height())+d(window).scrollTop()-10;0>e&&(c.left=e=0);0>f&&(c.top=f=0);b.set(c);c.framename&&d("\x3eiframe",b.window.content).attr("name",
c.framename);c.showToggle||d(".l-window-toggle",b.window).remove();c.showMax||d(".l-window-max",b.window).remove();c.showClose||d(".l-window-close",b.window).remove();b._saveStatus();d.fn.ligerDrag&&(b.draggable=b.window.drag=b.window.ligerDrag({handler:".l-window-header-inner",onStartDrag:function(){b.active()},onStopDrag:function(){b._saveStatus()},animate:!1}));d.fn.ligerResizable&&(b.resizeable=b.window.resizable=b.window.ligerResizable({onStartResize:function(){b.active();d(".l-window-max",b.window).removeClass("l-window-regain")},
onStopResize:function(a,c){var d=c=0;isNaN(parseInt(b.window.css("top")))||(c=parseInt(b.window.css("top")));isNaN(parseInt(b.window.css("left")))||(d=parseInt(b.window.css("left")));a.diffTop&&b.window.css({top:c+a.diffTop});a.diffLeft&&b.window.css({left:d+a.diffLeft});a.newWidth&&b.window.width(a.newWidth);a.newHeight&&b.window.content.height(a.newHeight-28);b._saveStatus();return!1}}),b.window.append("\x3cdiv class\x3d'l-btn-nw-drop'\x3e\x3c/div\x3e"));d(".l-window-toggle",b.window).click(function(){d(this).hasClass("l-window-toggle-close")?
(b.collapsed=!1,d(this).removeClass("l-window-toggle-close")):(b.collapsed=!0,d(this).addClass("l-window-toggle-close"));b.window.content.slideToggle()}).hover(function(){b.window.drag&&b.window.drag.set("disabled",!0)},function(){b.window.drag&&b.window.drag.set("disabled",!1)});d(".l-window-close",b.window).click(function(){if(0==b.trigger("close"))return!1;b.window.hide();a.win.removeTask(b)}).hover(function(){b.window.drag&&b.window.drag.set("disabled",!0)},function(){b.window.drag&&b.window.drag.set("disabled",
!1)});d(".l-window-max",b.window).click(function(){if(d(this).hasClass("l-window-regain")){if(0==b.trigger("regain"))return!1;b.window.width(b._width).css({left:b._left,top:b._top});b.window.content.height(b._height-28);d(this).removeClass("l-window-regain")}else{if(0==b.trigger("max"))return!1;b.window.width(d(window).width()-2).css({left:0,top:0});b.window.content.height(d(window).height()-28).show();d(this).addClass("l-window-regain")}})},_saveStatus:function(){this._width=this.window.width();
this._height=this.window.height();var a=0,c=0;isNaN(parseInt(this.window.css("top")))||(a=parseInt(this.window.css("top")));isNaN(parseInt(this.window.css("left")))||(c=parseInt(this.window.css("left")));this._top=a;this._left=c},min:function(){this.window.hide();this.minimize=!0;this.actived=!1},_setShowMin:function(b){var c=this;b?c.winmin||(c.winmin=d('\x3cdiv class\x3d"l-window-min"\x3e\x3c/div\x3e').prependTo(c.window.buttons).click(function(){c.min()}),a.win.addTask(c)):c.winmin&&(c.winmin.remove(),
c.winmin=null)},_setLeft:function(a){null!=a&&this.window.css({left:a})},_setTop:function(a){null!=a&&this.window.css({top:a})},_setWidth:function(a){0<a&&this.window.width(a)},_setHeight:function(a){28<a&&this.window.content.height(a-28)},_setTitle:function(a){a&&d(".l-window-header-inner",this.window.header).html(a)},_setUrl:function(a){var b=this,d=this.options;d.url=a;d.load?b.window.content.html("").load(d.url,function(){if(0==b.trigger("loaded"))return!1}):b.jiframe&&b.jiframe.attr("src",d.url)},
hide:function(){this.unmask();this.window.hide()},show:function(){this.mask();this.window.show()},remove:function(){this.unmask();this.window.remove()},active:function(){if(this.minimize){var b=this._width,c=this._height,e=this._left,f=this._top;this.maximum&&(b=d(window).width(),c=d(window).height(),e=f=0,a.win.taskbar&&(c-=a.win.taskbar.outerHeight(),a.win.top&&(f+=a.win.taskbar.outerHeight())));this.set({width:b,height:c,left:e,top:f})}this.actived=!0;this.minimize=!1;a.win.setFront(this);this.show();
a.win.setFront(this)},setUrl:function(a){return _setUrl(a)}})})(jQuery);
(function(d){d.fn.ligerSet=function(a){return d.ligerui.run.call(this,"ligerSet",arguments)};d.fn.ligerGetSetManager=function(){return d.ligerui.run.call(this,"ligerGetSetManager",arguments)};d.ligerDefaults.Set={css:null,maxValue:null,mixValue:null,value:null,onChangeValue:null,disabled:!1,readonly:!1,selectBoxCss:null,selectWidth:null,selectHeight:null};d.ligerMethos.Set={};d.ligerui.controls.Set=function(a,b){d.ligerui.controls.Set.base.constructor.call(this,a,b)};d.ligerui.controls.Set.ligerExtend(d.ligerui.controls.Input,
{__getType:function(){return"Set"},__idPrev:function(){return"Set"},_extendMethods:function(){return d.ligerMethos.Set},destroy:function(){this.options=null;d.ligerui.remove(this)},_render:function(){var a=this,b=a.options,c=d(this.element);a.selectBox=null;a.wrapper=c.wrap('\x3cdiv class\x3d"l-text l-set-box"\x3e\x3c/div\x3e').parent();a.inputText=d('\x3cp class\x3d"l-text-field"\x3e\x3c/p\x3e');a.link=d('\x3cdiv class\x3d"l-trigger"\x3e\x3cdiv class\x3d"l-trigger-icon"\x3e\x3c/div\x3e\x3c/div\x3e');
c.css("display","none");!a.selectBox&&a._addDropDownBox();b.css&&a.wrapper.addClass(b.css);b.value&&a.setValue(b.value);a.wrapper.append(a.inputText);a.wrapper.append(a.link);a.wrapper.on("click",".l-text-field, .l-trigger",function(){a.showDropDownBox()})},getValue:function(){return this.element.value},setValue:function(a){function b(a){try{var b=a.split(",");c([b[0].substring(1),b[1].substring(0,b[1].length-1)])}catch(h){console.error(h)}}function c(a){if((""!==a[0]||""!==a[1])&&a[0]!==a[1]){var b=
""===a[0]?0:parseFloat(a[0]);a=""===a[1]?0:parseFloat(a[1]);b>a?d._setValue(a,b):d._setValue(b,a)}}var d=this;!a||2>a.length||("string"===typeof a&&b(a),Array.isArray(a)&&c(a))},_setValue:function(a,b){var c;c=this.minRadio[0].checked?"[":"(";c=c+(a+","+b)+(this.maxRadio[0].checked?"]":")");/^\[|\([0-9]+,[0-9]+(\)|\])$/.test(c)&&(this.inputText.text(c),this.element.value=c,this.minInput.val(a),this.maxInput.val(b))},_addDropDownBox:function(){var a=this,b=a.options,c=d("body");a.selectBox=d('\x3cdiv class\x3d"l-box-select l-set-select"\x3e\x3c/div\x3e');
a.minInput=d('\x3cinput class\x3d"l-set-enter" type\x3d"text"\x3e');a.maxInput=d('\x3cinput class\x3d"l-set-enter" type\x3d"text"\x3e');a.minRadio=d('\x3cinput class\x3d"l-set-radio" type\x3d"checkbox" checked\x3d"true"\x3e');a.maxRadio=d('\x3cinput class\x3d"l-set-radio" type\x3d"checkbox" checked\x3d"true"\x3e');a.minDom=d('\x3cdiv class\x3d"l-set-minbox l-set-ebox"\x3e\x3c/div\x3e');a.maxDom=d('\x3cdiv class\x3d"l-set-maxbox l-set-ebox "\x3e\x3c/div\x3e');a.symbol=d('\x3cdiv class\x3d"l-set-symbol l-set-sbox "\x3e~\x3c/div\x3e');
a.selectButtonBox=d('\x3cdiv class\x3d"l-set-buttonbox"\x3e\x3c/div\x3e');a.confirmBut=d("\x3cspan\x3e\x3c/span\x3e").ligerButton({text:"确认",click:function(){d("body").children().not(a.selectBox).off("click.closeSet");a.hideDropDownBox();var b=[a.minInput.val(),a.maxInput.val()];a.setValue(b)}});a.cancelBut=d("\x3cspan\x3e\x3c/span\x3e").ligerButton({text:"取消",click:function(){d("body").children().not(a.selectBox).off("click.closeSet");a.hideDropDownBox()}});b.selectBoxCss&&a.selectBox.addClass(b.selectBoxCss);
b.selectBoxHeight&&a.selectBox.height(b.selectBoxHeight);a.minDom.append(a.minRadio);a.maxDom.append(a.maxRadio);a.minDom.append(a.minInput);a.maxDom.append(a.maxInput);a.selectBox.append(a.minDom);a.selectBox.append(a.symbol);a.selectBox.append(a.maxDom);a.selectButtonBox.append(a.confirmBut.element);a.selectButtonBox.append(a.cancelBut.element);a.selectBox.append(a.selectButtonBox);a.selectBox.appendTo(c).addClass("l-box-select-absolute");a.minRadio.on("click",function(){a.minInput.attr("disabled",
!this.checked)});a.maxRadio.on("click",function(){a.maxInput.attr("disabled",!this.checked)})},showDropDownBox:function(){var a=this,b=a.options,c=d("body");!a.selectBox&&a._addDropDownBox();a.selectHieght=b.selectHeight?b.selectHeight:75;a.selectWidth=b.selectWidth?b.selectWidth:a.wrapper.width()+50;b=a.inputText.offset();b.top+=a.wrapper.height()+2;a.selectBox&&a.selectBox.css({top:b.top,left:b.left-30,width:a.selectWidth-10,height:a.selectHieght-10,display:"block"});setTimeout(function(){c.children().not(a.selectBox).one("click.closeSet",
function(){a.hideDropDownBox()})},200);a.trigger("toggle")},hideDropDownBox:function(){this.selectBox&&this.selectBox.css("display","none");this.trigger&&this.trigger("toggle")}})})(jQuery);
(function(d){function a(a,b){this.itemsArray=[];this.$element=d(a);this.$element.hide();this.multiple=(this.isSelect="SELECT"===a.tagName)&&a.hasAttribute("multiple");this.objectItems=b&&b.itemValue;this.placeholderText=a.hasAttribute("placeholder")?this.$element.attr("placeholder"):"";this.inputSize=Math.max(1,this.placeholderText.length);this.$container=d('\x3cdiv class\x3d"bootstrap-tagsinput"\x3e\x3c/div\x3e');this.$input=d('\x3cinput type\x3d"text" placeholder\x3d"'+this.placeholderText+'"/\x3e').appendTo(this.$container);
this.$element.before(this.$container);this.build(b)}function b(a,b){if("function"!==typeof a[b]){var c=a[b];a[b]=function(a){return a[c]}}}function c(a,b){if("function"!==typeof a[b]){var c=a[b];a[b]=function(){return c}}}function e(a){return a?k.text(a).html():""}function f(a){var b=0;if(document.selection)a.focus(),b=document.selection.createRange(),b.moveStart("character",-a.value.length),b=b.text.length;else if(a.selectionStart||"0"==a.selectionStart)b=a.selectionStart;return b}function g(a,b){var c=
!1;d.each(b,function(b,d){if("number"===typeof d&&a.which===d)return c=!0,!1;if(a.which===d.which){b=!d.hasOwnProperty("altKey")||a.altKey===d.altKey;var e=!d.hasOwnProperty("shiftKey")||a.shiftKey===d.shiftKey;d=!d.hasOwnProperty("ctrlKey")||a.ctrlKey===d.ctrlKey;if(b&&e&&d)return c=!0,!1}});return c}var h={tagClass:function(a){return"label label-info"},itemValue:function(a){return a?a.toString():a},itemText:function(a){return this.itemValue(a)},itemTitle:function(a){return null},freeInput:!0,addOnBlur:!0,
removeItem:null,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!0,onTagExists:function(a,b){b.hide().fadeIn()},trimValue:!1,allowDuplicates:!1};a.prototype={constructor:a,add:function(a,b,c){var f=this;if(!(f.options.maxTags&&f.itemsArray.length>=f.options.maxTags||!1!==a&&!a)){"string"===typeof a&&f.options.trimValue&&(a=d.trim(a));if("object"===typeof a&&!f.objectItems)throw"Can't add objects when itemValue option is not set";if(!a.toString().match(/^\s*$/)){f.isSelect&&
!f.multiple&&0<f.itemsArray.length&&f.remove(f.itemsArray[0]);if("string"===typeof a&&"INPUT"===this.$element[0].tagName){var g=a.split(f.options.delimiterRegex?f.options.delimiterRegex:f.options.delimiter);if(1<g.length){for(a=0;a<g.length;a++)this.add(g[a],!0);b||f.pushVal();return}}var h=f.options.itemValue(a),g=f.options.itemText(a),k=f.options.tagClass(a),m=f.options.itemTitle(a),n=d.grep(f.itemsArray,function(a){return f.options.itemValue(a)===h})[0];if(n&&!f.options.allowDuplicates)f.options.onTagExists&&
(b=d(".tag",f.$container).filter(function(){return d(this).data("item")===n}),f.options.onTagExists(a,b));else if(!(f.items().toString().length+a.length+1>f.options.maxInputLength)){var q=d.Event("beforeItemAdd",{item:a,cancel:!1,options:c});f.$element.trigger(q);q.cancel||(f.itemsArray.push(a),k=d('\x3cspan class\x3d"tag '+e(k)+(null!==m?'" title\x3d"'+m:"")+'"\x3e'+e(g)+'\x3cspan data-role\x3d"remove"\x3e\x3c/span\x3e\x3c/span\x3e'),k.data("item",a),f.findInputWrapper().before(k),k.after(" "),f.isSelect&&
!d('option[value\x3d"'+encodeURIComponent(h)+'"]',f.$element)[0]&&(g=d("\x3coption selected\x3e"+e(g)+"\x3c/option\x3e"),g.data("item",a),g.attr("value",h),f.$element.append(g)),b||f.pushVal(),f.options.maxTags!==f.itemsArray.length&&f.items().toString().length!==f.options.maxInputLength||f.$container.addClass("bootstrap-tagsinput-max"),f.$element.trigger(d.Event("itemAdded",{item:a,options:c})))}}}},remove:function(a,b,c){var e=this;e.objectItems&&(a="object"===typeof a?d.grep(e.itemsArray,function(b){return e.options.itemValue(b)==
e.options.itemValue(a)}):d.grep(e.itemsArray,function(b){return e.options.itemValue(b)==a}),a=a[a.length-1]);if(a){var f=d.Event("beforeItemRemove",{item:a,cancel:!1,options:c});e.$element.trigger(f);if(f.cancel)return;d(".tag",e.$container).filter(function(){return d(this).data("item")===a}).remove();d("option",e.$element).filter(function(){return d(this).data("item")===a}).remove();-1!==d.inArray(a,e.itemsArray)&&e.itemsArray.splice(d.inArray(a,e.itemsArray),1)}b||e.pushVal();e.options.maxTags>
e.itemsArray.length&&e.$container.removeClass("bootstrap-tagsinput-max");e.$element.trigger(d.Event("itemRemoved",{item:a,options:c}))},removeAll:function(){d(".tag",this.$container).remove();for(d("option",this.$element).remove();0<this.itemsArray.length;)this.itemsArray.pop();this.pushVal()},refresh:function(){var a=this;d(".tag",a.$container).each(function(){var b=d(this),c=b.data("item"),f=a.options.itemValue(c),g=a.options.itemText(c),h=a.options.tagClass(c);b.attr("class",null);b.addClass("tag "+
e(h));b.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=e(g);a.isSelect&&d("option",a.$element).filter(function(){return d(this).data("item")===c}).attr("value",f)})},items:function(){return this.itemsArray},pushVal:function(){var a=this,b=d.map(a.items(),function(b){return a.options.itemValue(b).toString()});a.$element.val(b,!0).trigger("change")},build:function(a){var e=this;e.options=d.extend({},h,a);e.objectItems&&(e.options.freeInput=!1);b(e.options,"itemValue");b(e.options,
"itemText");c(e.options,"tagClass");if(e.options.typeahead){var k=e.options.typeahead||{};c(k,"source");e.$input.typeahead(d.extend({},k,{source:function(a,b){function c(a){for(var c=[],d=0;d<a.length;d++){var g=e.options.itemText(a[d]);f[g]=a[d];c.push(g)}b(c)}var f=this.map={};a=k.source(a);d.isFunction(a.success)?a.success(c):d.isFunction(a.then)?a.then(c):d.when(a).then(c)},updater:function(a){e.add(this.map[a]);return this.map[a]},matcher:function(a){return-1!==a.toLowerCase().indexOf(this.query.trim().toLowerCase())},
sorter:function(a){return a.sort()},highlighter:function(a){return a.replace(new RegExp("("+this.query+")","gi"),"\x3cstrong\x3e$1\x3c/strong\x3e")}}))}if(e.options.typeaheadjs){a=null;var m={},u=e.options.typeaheadjs;d.isArray(u)?(a=u[0],m=u[1]):m=u;e.$input.typeahead(a,m).on("typeahead:selected",d.proxy(function(a,b){m.valueKey?e.add(b[m.valueKey]):e.add(b);e.$input.typeahead("val","")},e))}e.$container.on("click",d.proxy(function(a){e.$element.attr("disabled")||e.$input.removeAttr("disabled");
e.$input.focus()},e));if(e.options.addOnBlur&&e.options.freeInput)e.$input.on("focusout",d.proxy(function(a){0===d(".typeahead, .twitter-typeahead",e.$container).length&&(e.add(e.$input.val()),e.$input.val(""))},e));e.$container.on("keydown","input",d.proxy(function(a){var b=d(a.target),c=e.findInputWrapper();if(e.$element.attr("disabled"))e.$input.attr("disabled","disabled");else{switch(a.which){case 8:0===f(b[0])&&(a=c.prev(),a.length&&(e.options.removeItem?e.options.removeItem(e,a,b,c):e.remove(a.data("item"))));
break;case 46:0===f(b[0])&&(a=c.next(),a.length&&(e.options.removeItem?e.options.removeItem(e,a,b,c):e.remove(a.data("item"))));break;case 37:a=c.prev();0===b.val().length&&a[0]&&(a.before(c),b.focus());break;case 39:a=c.next(),0===b.val().length&&a[0]&&(a.after(c),b.focus())}b.val();b.attr("size",Math.max(this.inputSize,b.val().length))}},e));e.$container.on("keypress","input",d.proxy(function(a){var b=d(a.target);if(e.$element.attr("disabled"))e.$input.attr("disabled","disabled");else{var c=b.val(),
f=e.options.maxChars&&c.length>=e.options.maxChars;e.options.freeInput&&(g(a,e.options.confirmKeys)||f)&&(0!==c.length&&(e.add(f?c.substr(0,e.options.maxChars):c),b.val("")),!1===e.options.cancelConfirmKeysOnEmpty&&a.preventDefault());b.val();b.attr("size",Math.max(this.inputSize,b.val().length))}},e));e.$container.on("click","[data-role\x3dremove]",d.proxy(function(a){e.$element.attr("disabled")||e.remove(d(a.target).closest(".tag").data("item"))},e));e.options.itemValue===h.itemValue&&("INPUT"===
e.$element[0].tagName?e.add(e.$element.val()):d("option",e.$element).each(function(){e.add(d(this).attr("value"),!0)}))},destroy:function(){this.$container.off("keypress","input");this.$container.off("click","[role\x3dremove]");this.$container.remove();this.$element.removeData("tagsinput");this.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var a=this.$input[0],b=this.$container[0];a&&a.parentNode!==b;)a=a.parentNode;return d(a)}};
d.fn.tagsinput=function(b,c,e){var f=[];this.each(function(){var g=d(this).data("tagsinput");g?b||c?void 0!==g[b]&&(g=3===g[b].length&&void 0!==e?g[b](c,null,e):g[b](c),void 0!==g&&f.push(g)):f.push(g):(g=new a(this,b),d(this).data("tagsinput",g),f.push(g),"SELECT"===this.tagName&&d("option",d(this)).attr("selected","selected"),d(this).val(d(this).val()))});return"string"==typeof b?1<f.length?f:f[0]:f};d.fn.tagsinput.Constructor=a;var k=d("\x3cdiv /\x3e");d(function(){d("input[data-role\x3dtagsinput], select[multiple][data-role\x3dtagsinput]").tagsinput()})})(window.jQuery);
(function(d){d.fn.ligerTagInput=function(a){if(d().tagsinput)return d.ligerui.run.call(this,"ligerTagInput",arguments);console.error("需要先加载‘bootstrap-tagsinput’");return d.ligerui.run.call(this,"ligerComboBox",arguments)};d.fn.ligerGetTagInputManager=function(){return d.ligerui.run.call(this,"ligerGetTagInputManager",arguments)};d.ligerDefaults.TagInput={inputCss:null,tagCss:null,initValue:null,tagFocusCss:null,inputMaxWidth:100,inputMinWidth:45,valueField:"id",textField:"text",split:",",width:null,
height:null,inputWidth:null,inputHeight:null,autoInputWidth:null,enterInput:!1,freeInput:!1,confirmKeys:[13],removeKeys:[8,46],maxTag:null,maxChars:8,trim:!0,isRepeat:!1,isEnter:!1,isAutoFilling:!0,isMultiple:!0,autoFiler:"text",data:null,inputRender:null,renderItem:null,isPrevent:!0,url:null,ajaxType:null,parms:null,onSuccess:null,onError:null,dataGetter:null,comboboxRender:null,ontagInit:null,onBeforeAdd:null,onAdded:null,onBeforeRemove:null,onRemoved:null,onTagExists:null,onCleared:null};d.ligerui.controls.TagInput=
function(a,b){d.ligerui.controls.TagInput.base.constructor.call(this,a,b)};d.ligerui.controls.TagInput.ligerExtend(d.ligerui.controls.Input,{__getType:function(){return"TagInput"},__idPrev:function(){return"TagInput"},_extendMethods:function(){return d.ligerMethos.TagInput},_init:function(){d.ligerui.controls.TagInput.base._init.call(this);var a=this.options;!0===a.freeInput&&(a.valueField="id",a.textField="text")},_render:function(){var a=this,b=a.options,c=d(a.element);c.attr("type","hidden");a.inputText=
c;a.wrapper=c.wrap('\x3cdiv class\x3d"l-text l-tag-input-wrap"\x3e\x3c/div\x3e').parent();a.wrapper.css({width:b.width||"100%",height:b.height});a.text=[];a.inputText.tagsinput({tagClass:b.tagCss,confirmKeys:b.confirmKeys,maxTags:b.maxTags,maxChars:b.maxChars,itemText:function(c){return a.DataHash[c]?a.DataHash[c][b.textField]||c:c},itemValue:function(c){return a.DataHash[c]?a.DataHash[c][b.valueField]||c:c},trimValue:b.trim,allowDuplicates:b.isRepeat,freeInput:!1,cancelConfirmKeysOnEmpty:b.isEnter,
removeItem:a._removeItem});a.tagsinputWarpper=a.wrapper.children(".bootstrap-tagsinput");a.inputText.on({beforeItemRemove:function(c){var d=c.item,e=a.DataHash[d];return a._beforeRemove(e[b.valueField]||d,d,e,c)},itemAdded:function(c){c=c.item;a.text.push(a.DataHash[c]?a.DataHash[c][b.textField]||c:c)},itemRemoved:function(c){c=c.item;var d=a.DataHash[c],e=d[b.valueField]||c,h=a.text.indexOf(c);a.text.splice(h,1);a.combobox.inputText.focus();b.onRemoved&&b.onRemoved(e,c,d)}});a.tagsinputWarpper.on("keydown",
".l-tag-item-select",function(c){c=c.keyCode;var e=d(this);-1<b.removeKeys.indexOf(c)&&e.hasClass("l-tag-item-select-delay")&&(a.inputText.tagsinput("remove",e.data("item")),ligerComboBoxM.inputText.focus())});b.initValue&&a.data&&a.setValue(b.initValue);a.comboboxInput=a.tagsinputWarpper.children("input");a.combobox=a.comboboxInput.ligerComboBox({resize:!0,selectBoxWidth:b.selectBoxWidth||b.inputMaxWidth,selectBoxHeight:b.selectBoxHeight||120,keySupport:!0,data:b.data,url:b.url,type:b.ajaxType,urlParms:b.parms,
onSuccess:b.onSuccess,onError:b.onError,dataGetter:b.dataGetter,valueField:b.valueField,textField:b.textField,render:b.inputRender,renderItem:b.renderItem,autocomplete:b.isAutoFilling,autocompleteKeyField:b.autoFiler,highLight:!0,onBeforeOpen:b.onBeforeOpen,onSelected:function(b,c,d){a.addItem(b,c,d)},onAfterShowData:function(b){a._setData(b)}});a.combobox.inputText.on({keypress:function(c){if(-1<b.confirmKeys.indexOf(c.keyCode||c.which)){var d=a.combobox.getText();b.freeInput&&a.addItem(d,d,{id:d,
value:d});c.preventDefault();c.stopPropagation()}},focus:function(){d(this).parents(".bootstrap-tagsinput").children(".tag.l-tag-item-select").removeClass("l-tag-item-select")}}).css({width:"auto","max-width":b.inputMaxWidth,"min-width":b.inputMinWidth})},setValue:function(a){var b=this,c=b.options;b.clear();var d=[],f=a&&typeof a;if("array"===f)d=a;else if("string"===f)d=a.split(c.split);else if("number"===f)d.push(a);else return;(function(a){for(var d=a.length-1;0<=d;d--){var e=a[d];b.addItem(e[c.valueField],
e[c.textField],e)}})(d.filter(function(a){return c.freeInput||b.DataHash[a]}).map(function(a){return c.freeInput?{text:a,id:a}:b.DataHash[a]}))},getText:function(){return this.text.join(this.options.split)},getValue:function(){return this.inputText.val()},setData:function(){var a=this.options,b=typeof data;if(Array.isArray(data))a=data;else if("string"===b)a=data.split(a.split);else{"function"===b?this.setData(data()):console.error("tagInput 数据格式为数组");return}this.combobox.setData(a)},_setData:function(a){var b=
this.options;this.data=a;this.DataHash={};for(var c=a.length-1;0<=c;c--){var d=a[c];this.DataHash[d[b.valueField]]=d}},getData:function(){return this.data},addItem:function(a,b,c){var d=this.options;if(!d.onBeforeAdd||d.onBeforeAdd.call(this,a,b,c))this.inputText.tagsinput("add",a),this.combobox.clear(),d.onAdded&&d.onAdded.call(this,a,b,c)},removeItem:function(a){this.inputText.tagsinput("remove",a)},_beforeRemove:function(a,b,c,d){d=this.options;var e=!0;return e=d.onBeforeRemove?d.onBeforeRemove.call(this,
a,b,c):e},_removeItem:function(a,b,c,d){b.hasClass("l-tag-item-select")?b.hasClass("l-tag-item-select-delay")||(a.remove(b.data("item")),c.focus()):b.addClass("l-tag-item-select l-tag-item-select-delay").attr("tabindex",-1).focus()},clear:function(){this.inputText.tagsinput("removeAll");this.text=[];this.options.onCleared&&this.options.onCleared.call(this,this.data)},refresh:function(){this.clear();this.options.initValue&&this.setValue(p.initValue)}})})(jQuery);
//# sourceMappingURL=tms.ligerui.v133.min.js.map