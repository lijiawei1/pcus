jQuery.cookie=function(b,a,c){if("undefined"!=typeof a){c=c||{};null===a&&(a="",c.expires=-1);var e="";c.expires&&("number"==typeof c.expires||c.expires.toUTCString)&&("number"==typeof c.expires?(e=new Date,e.setTime(e.getTime()+864E5*c.expires)):e=c.expires,e="; expires\x3d"+e.toUTCString());var f=c.path?"; path\x3d"+c.path:"",g=c.domain?"; domain\x3d"+c.domain:"";c=c.secure?"; secure":"";document.cookie=[b,"\x3d",encodeURIComponent(a),e,f,g,c].join("")}else{a=null;if(document.cookie&&""!=document.cookie)for(c=
document.cookie.split(";"),e=0;e<c.length;e++)if(f=jQuery.trim(c[e]),f.substring(0,b.length+1)==b+"\x3d"){a=decodeURIComponent(f.substring(b.length+1));break}return a}};
(function(b){function a(a){var c=a.data;a.isDefaultPrevented()||(a.preventDefault(),b(this).ajaxSubmit(c))}function c(a){var c=a.target,e=b(c);if(!e.is(":submit,input:image")){c=e.closest(":submit");if(0==c.length)return;c=c[0]}var f=this;f.clk=c;"image"==c.type&&(void 0!=a.offsetX?(f.clk_x=a.offsetX,f.clk_y=a.offsetY):"function"==typeof b.fn.offset?(e=e.offset(),f.clk_x=a.pageX-e.left,f.clk_y=a.pageY-e.top):(f.clk_x=a.pageX-c.offsetLeft,f.clk_y=a.pageY-c.offsetTop));setTimeout(function(){f.clk=f.clk_x=
f.clk_y=null},100)}function e(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}b.fn.ajaxSubmit=function(a){function c(c){for(var e=new FormData,f=0;f<c.length;f++)"file"!=c[f].type&&e.append(c[f].name,c[f].value);m.find("input:file:enabled").each(function(){var a=b(this).attr("name"),c=this.files;if(a)for(var f=0;f<c.length;f++)e.append(a,
c[f])});if(a.extraData)for(var g in a.extraData)e.append(g,a.extraData[g]);a.data=null;c=b.extend(!0,{},b.ajaxSettings,a,{contentType:!1,processData:!1,cache:!1,type:"POST"});c.data=null;var h=c.beforeSend;c.beforeSend=function(b,c){c.data=e;b.upload&&(b.upload.onprogress=function(a){c.progress(a.position,a.total)});h&&h.call(c,b,a)};b.ajax(c)}function f(c){function f(){function a(){try{var b=(r.contentWindow?r.contentWindow.document:r.contentDocument?r.contentDocument:r.document).readyState;e("state \x3d "+
b);"uninitialized"==b.toLowerCase()&&setTimeout(a,50)}catch(G){console.error(G),e("Server abort: ",G," (",G.name,")"),g(2),E&&clearTimeout(E),E=void 0}}var c=m.attr("target"),f=m.attr("action");h.setAttribute("target",v);l||h.setAttribute("method","POST");f!=p.url&&h.setAttribute("action",p.url);p.skipEncodingOverride||l&&!/post/i.test(l)||m.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});p.timeout&&(E=setTimeout(function(){u=!0;g(1)},p.timeout));var n=[];try{if(p.extraData)for(var k in p.extraData)n.push(b('\x3cinput type\x3d"hidden" name\x3d"'+
k+'"\x3e').attr("value",p.extraData[k]).appendTo(h)[0]);p.iframeTarget||(z.appendTo("body"),r.attachEvent?r.attachEvent("onload",g):r.addEventListener("load",g,!1));setTimeout(a,15);h.submit()}catch(Q){console.error(Q)}finally{h.setAttribute("action",f),c?h.setAttribute("target",c):m.removeAttr("target"),b(n).remove()}}function g(a){if(!t.aborted&&!N){try{y=r.contentWindow?r.contentWindow.document:r.contentDocument?r.contentDocument:r.document}catch(C){console.error(a),e("cannot access response document: ",
C),a=2}if(1===a&&t)t.abort("timeout");else if(2==a&&t)t.abort("server abort");else if(y&&y.location.href!=p.iframeSrc||u){r.detachEvent?r.detachEvent("onload",g):r.removeEventListener("load",g,!1);a="success";var c;try{if(u)throw"timeout";var f="xml"==p.dataType||y.XMLDocument||b.isXMLDoc(y);e("isXml\x3d"+f);if(!f&&window.opera&&(null==y.body||""==y.body.innerHTML)&&--R){e("requeing onLoad callback, DOM not available");setTimeout(g,250);return}var m=y.body?y.body:y.documentElement;t.responseText=
m?m.innerHTML:null;t.responseXML=y.XMLDocument?y.XMLDocument:y;f&&(p.dataType="xml");t.getResponseHeader=function(a){return{"content-type":p.dataType}[a]};m&&(t.status=Number(m.getAttribute("status"))||t.status,t.statusText=m.getAttribute("statusText")||t.statusText);var h=(p.dataType||"").toLowerCase(),n=/(json|script|text)/.test(h);if(n||p.textarea){var k=y.getElementsByTagName("textarea")[0];if(k)t.responseText=k.value,t.status=Number(k.getAttribute("status"))||t.status,t.statusText=k.getAttribute("statusText")||
t.statusText;else if(n){var l=y.getElementsByTagName("pre")[0],D=y.getElementsByTagName("body")[0];l?t.responseText=l.textContent?l.textContent:l.innerText:D&&(t.responseText=D.textContent?D.textContent:D.innerText)}}else"xml"!=h||t.responseXML||null==t.responseText||(t.responseXML=S(t.responseText));try{O=I(t,h,p)}catch(C){console.error(C),a="parsererror",t.error=c=C||a}}catch(C){console.error(C),e("error caught: ",C),a="error",t.error=c=C||a}t.aborted&&(e("upload aborted"),a=null);t.status&&(a=
200<=t.status&&300>t.status||304===t.status?"success":"error");"success"===a?(p.success&&p.success.call(p.context,O,"success",t),q&&b.event.trigger("ajaxSuccess",[t,p])):a&&(void 0==c&&(c=t.statusText),p.error&&p.error.call(p.context,t,a,c),q&&b.event.trigger("ajaxError",[t,p,c]));q&&b.event.trigger("ajaxComplete",[t,p]);q&&!--b.active&&b.event.trigger("ajaxStop");p.complete&&p.complete.call(p.context,t,a);N=!0;p.timeout&&clearTimeout(E);setTimeout(function(){p.iframeTarget||z.remove();t.responseXML=
null},100)}}}var h=m[0],n,k,p,q,v,z,r,t,u,E;n=!!b.fn.prop;if(c)if(n)for(k=0;k<c.length;k++)n=b(h[c[k].name]),n.prop("disabled",!1);else for(k=0;k<c.length;k++)n=b(h[c[k].name]),n.removeAttr("disabled");if(b(":input[name\x3dsubmit],:input[id\x3dsubmit]",h).length)alert('Error: Form elements must not have name or id of "submit".');else if(p=b.extend(!0,{},b.ajaxSettings,a),p.context=p.context||p,v="jqFormIO"+(new Date).getTime(),p.iframeTarget?(z=b(p.iframeTarget),n=z.attr("name"),null==n?z.attr("name",
v):v=n):(z=b('\x3ciframe name\x3d"'+v+'" src\x3d"'+p.iframeSrc+'" /\x3e'),z.css({position:"absolute",top:"-1000px",left:"-1000px"})),r=z[0],t={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var c="timeout"===a?"timeout":"aborted";e("aborting upload... "+c);this.aborted=1;z.attr("src",p.iframeSrc);t.error=c;p.error&&p.error.call(p.context,t,c,a);q&&b.event.trigger("ajaxError",
[t,p,c]);p.complete&&p.complete.call(p.context,t,c)}},(q=p.global)&&!b.active++&&b.event.trigger("ajaxStart"),q&&b.event.trigger("ajaxSend",[t,p]),p.beforeSend&&!1===p.beforeSend.call(p.context,t,p))p.global&&b.active--;else if(!t.aborted){(c=h.clk)&&(n=c.name)&&!c.disabled&&(p.extraData=p.extraData||{},p.extraData[n]=c.value,"image"==c.type&&(p.extraData[n+".x"]=h.clk_x,p.extraData[n+".y"]=h.clk_y));c=b("meta[name\x3dcsrf-token]").attr("content");(n=b("meta[name\x3dcsrf-param]").attr("content"))&&
c&&(p.extraData=p.extraData||{},p.extraData[n]=c);p.forceSync?f():setTimeout(f,10);var O,y,R=50,N,S=b.parseXML||function(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},J=b.parseJSON||function(a){return window.eval("("+a+")")},I=function(a,c,e){var f=a.getResponseHeader("content-type")||"",g="xml"===c||!c&&0<=f.indexOf("xml");
a=g?a.responseXML:a.responseText;g&&"parsererror"===a.documentElement.nodeName&&b.error&&b.error("parsererror");e&&e.dataFilter&&(a=e.dataFilter(a,c));"string"===typeof a&&("json"===c||!c&&0<=f.indexOf("json")?a=J(a):("script"===c||!c&&0<=f.indexOf("javascript"))&&b.globalEval(a));return a}}}if(!this.length)return e("ajaxSubmit: skipping submit process - no element selected"),this;var l,h,m=this;"function"==typeof a&&(a={success:a});l=this.attr("method");h=this.attr("action");(h=(h="string"===typeof h?
b.trim(h):"")||window.location.href||"")&&(h=(h.match(/^([^#]+)/)||[])[1]);a=b.extend(!0,{url:h,success:b.ajaxSettings.success,type:l||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);h={};this.trigger("form-pre-serialize",[this,a,h]);if(h.veto)return e("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return e("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var n=a.traditional;
void 0===n&&(n=b.ajaxSettings.traditional);var q,v=this.formToArray(a.semantic);a.data&&(a.extraData=a.data,q=b.param(a.data,n));if(a.beforeSubmit&&!1===a.beforeSubmit(v,this,a))return e("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[v,this,a,h]);if(h.veto)return e("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;h=b.param(v,n);q&&(h=h?h+"\x26"+q:q);"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"\x26":"?")+h,a.data=
null):a.data=h;var r=[];a.resetForm&&r.push(function(){m.resetForm()});a.clearForm&&r.push(function(){m.clearForm(a.includeHidden)});if(!a.dataType&&a.target){var z=a.success||function(){};r.push(function(c){var e=a.replaceTarget?"replaceWith":"html";b(a.target)[e](c).each(z,arguments)})}else a.success&&r.push(a.success);a.success=function(b,c,e){for(var f=a.context||a,g=0,h=r.length;g<h;g++)r[g].apply(f,[b,c,e||m,m])};n=b("input:file:enabled[value]",this);q=0<n.length;h="multipart/form-data"==m.attr("enctype")||
"multipart/form-data"==m.attr("encoding");n=!!(q&&n.get(0).files&&window.FormData);e("fileAPI :"+n);!1!==a.iframe&&(a.iframe||(q||h)&&!n)?a.closeKeepAlive?b.get(a.closeKeepAlive,function(){f(v)}):f(v):(q||h)&&n?(a.progress=a.progress||b.noop,c(v)):b.ajax(a);this.trigger("form-submit-notify",[this,a]);return this};b.fn.ajaxForm=function(f){f=f||{};f.delegation=f.delegation&&b.isFunction(b.fn.on);if(!f.delegation&&0===this.length){var g=this.selector,k=this.context;if(!b.isReady&&g)return e("DOM not ready, queuing ajaxForm"),
b(function(){b(g,k).ajaxForm(f)}),this;e("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));return this}return f.delegation?(b(document).off("submit.form-plugin",this.selector,a).off("click.form-plugin",this.selector,c).on("submit.form-plugin",this.selector,f,a).on("click.form-plugin",this.selector,f,c),this):this.ajaxFormUnbind().on("submit.form-plugin",f,a).on("click.form-plugin",f,c)};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};
b.fn.formToArray=function(a){var c=[];if(0===this.length)return c;var e=this[0],f=a?e.getElementsByTagName("*"):e.elements;if(!f)return c;var h,m,n,q,v,r;h=0;for(v=f.length;h<v;h++)if(m=f[h],n=m.name)if(a&&e.clk&&"image"==m.type)m.disabled||e.clk!=m||(c.push({name:n,value:b(m).val(),type:m.type}),c.push({name:n+".x",value:e.clk_x},{name:n+".y",value:e.clk_y}));else if((q=b.fieldValue(m,!0))&&q.constructor==Array)for(m=0,r=q.length;m<r;m++)c.push({name:n,value:q[m]});else null!==q&&"undefined"!=typeof q&&
c.push({name:n,value:q,type:m.type});!a&&e.clk&&(a=b(e.clk),f=a[0],(n=f.name)&&!f.disabled&&"image"==f.type&&(c.push({name:n,value:a.val()}),c.push({name:n+".x",value:e.clk_x},{name:n+".y",value:e.clk_y})));return c};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};b.fn.fieldSerialize=function(a){var c=[];this.each(function(){var e=this.name;if(e){var f=b.fieldValue(this,a);if(f&&f.constructor==Array)for(var g=0,m=f.length;g<m;g++)c.push({name:e,value:f[g]});else null!==f&&"undefined"!=
typeof f&&c.push({name:this.name,value:f})}});return b.param(c)};b.fn.fieldValue=function(a){for(var c=[],e=0,f=this.length;e<f;e++){var h=b.fieldValue(this[e],a);null===h||"undefined"==typeof h||h.constructor==Array&&!h.length||(h.constructor==Array?b.merge(c,h):c.push(h))}return c};b.fieldValue=function(a,c){var e=a.name,f=a.type,g=a.tagName.toLowerCase();void 0===c&&(c=!0);if(c&&(!e||a.disabled||"reset"==f||"button"==f||("checkbox"==f||"radio"==f)&&!a.checked||("submit"==f||"image"==f)&&a.form&&
a.form.clk!=a||"select"==g&&-1==a.selectedIndex))return null;if("select"==g){g=a.selectedIndex;if(0>g)return null;c=[];a=a.options;e=(f="select-one"==f)?g+1:a.length;for(g=f?g:0;g<e;g++){var m=a[g];if(m.selected){var n=m.value;n||(n=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value);if(f)return n;c.push(n)}}return c}return b(a).val()};b.fn.clearForm=function(a){return this.each(function(){b("input,select,textarea",this).clearFields(a)})};b.fn.clearFields=b.fn.clearInputs=
function(a){var b=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var c=this.type,e=this.tagName.toLowerCase();b.test(c)||"textarea"==e||a&&/hidden/.test(c)?this.value="":"checkbox"==c||"radio"==c?this.checked=!1:"select"==e&&(this.selectedIndex=-1)})};b.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};b.fn.enable=function(a){void 0===
a&&(a=!0);return this.each(function(){this.disabled=!a})};b.fn.selected=function(a){void 0===a&&(a=!0);return this.each(function(){var c=this.type;"checkbox"==c||"radio"==c?this.checked=a:"option"==this.tagName.toLowerCase()&&(c=b(this).parent("select"),a&&c[0]&&"select-one"==c[0].type&&c.find("option").selected(!1),this.selected=a)})};b.fn.ajaxSubmit.debug=!1})(jQuery);this.JSON2||(this.JSON=this.JSON2={});
(function(){function b(a){return 10>a?"0"+a:a}function a(a){f.lastIndex=0;return f.test(a)?'"'+a.replace(f,function(a){var b=l[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(b,e){var f,m,n=g,l,u=e[b];u&&"object"===typeof u&&"function"===typeof u.toJSON&&(u=u.toJSON(b));"function"===typeof h&&(u=h.call(e,b,u));switch(typeof u){case "string":return a(u);case "number":return isFinite(u)?String(u):"null";case "boolean":case "null":return String(u);
case "object":if(!u)return"null";g+=k;l=[];if("[object Array]"===Object.prototype.toString.apply(u)){m=u.length;for(b=0;b<m;b+=1)l[b]=c(b,u)||"null";e=0===l.length?"[]":g?"[\n"+g+l.join(",\n"+g)+"\n"+n+"]":"["+l.join(",")+"]";g=n;return e}if(h&&"object"===typeof h)for(m=h.length,b=0;b<m;b+=1)f=h[b],"string"===typeof f&&(e=c(f,u))&&l.push(a(f)+(g?": ":":")+e);else for(f in u)Object.hasOwnProperty.call(u,f)&&(e=c(f,u))&&l.push(a(f)+(g?": ":":")+e);e=0===l.length?"{}":g?"{\n"+g+l.join(",\n"+g)+"\n"+
n+"}":"{"+l.join(",")+"}";g=n;return e}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,k,l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;"function"!==typeof JSON2.stringify&&(JSON2.stringify=function(a,b,e){var f;k=g="";if("number"===typeof e)for(f=0;f<e;f+=1)k+=" ";else"string"===typeof e&&(k=e);if((h=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON2.stringify");return c("",{"":a})});
"function"!==typeof JSON2.parse&&(JSON2.parse=function(a,b){function c(a,e){var f,g,m=a[e];if(m&&"object"===typeof m)for(f in m)Object.hasOwnProperty.call(m,f)&&(g=c(m,f),void 0!==g?m[f]=g:delete m[f]);return b.call(a,e,m)}a=String(a);e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return a=eval("("+a+")"),"function"===typeof b?c({"":a},""):a;throw new SyntaxError("JSON2.parse");})})();
(function(b){b.validator.addMethod("notnull",function(a,c){return a?!b(c).hasClass("l-text-field-null"):!0},"不能为空");jQuery.validator.addMethod("alnum",function(a,b){return this.optional(b)||/^[a-zA-Z0-9]+$/.test(a)},"只能包括英文字母和数字");jQuery.validator.addMethod("cellphone",function(a,b){var c=a.length;return this.optional(b)||11==c&&/^(1\d{10})$/.test(a)},"请正确填写手机号码");jQuery.validator.addMethod("telephone",function(a,b){var c=/^(\d{3,4}-?)?\d{7,9}$/g;return this.optional(b)||c.test(a)},"请正确填写电话号码");jQuery.validator.addMethod("zipcode",
function(a,b){var c=/^[0-9]{6}$/;return this.optional(b)||c.test(a)},"请正确填写邮政编码");jQuery.validator.addMethod("chcharacter",function(a,b){var c=/^[\u4e00-\u9fa5]+$/;return this.optional(b)||c.test(a)},"请输入汉字");jQuery.validator.addMethod("qq",function(a,b){var c=/^[1-9][0-9]{4,}$/;return this.optional(b)||c.test(a)},"请输入正确的QQ");jQuery.validator.addMethod("username",function(a,b){return this.optional(b)||/^[a-zA-Z][a-zA-Z0-9_]+$/.test(a)},"用户名格式不正确");jQuery.validator.addMethod("isTwoPrecision",function(a,
b,e){b=!0;if(!e)return!0;a=a.toString();1==/^[+-]?[1-9]?[0-9]*\.[0-9]*$/.test(a)&&-1!=a.indexOf(".")&&2<a.substring(a.indexOf(".")+1,a.length).length&&(b=!1);return b},"小数点后不能超过2位");jQuery.validator.addMethod("textRequired",function(a,b,e){if(!a)return!0},"文本框不能为空");jQuery.validator.addMethod("containerCode",function(a,b,e){return a?cntrUtil.verifyContainerCode(a):!0},"集装箱号不正确")})(jQuery);this.LG||(this.LG={});
(function(b){LG.render=function(){return{boolean:function(a){return function(b){return 1==b[a]?"是":"否"}},ref:function(a,b,e,f,g){e=e||"id";f=f||"text";return function(c){if(!a||0==a.length)return c[b];var l=a.filter(function(a){return a[e]==c[b]}),l=0<l.length?l[0][f]:"";return g&&"function"===typeof g?g(l,c):l}},multiValue:function(a,c){return b.grep(a,function(a){return!!a}).join(c)}}}();LG.cookies=function(){var a=function(){};a.prototype.get=function(a){var b="";a+="\x3d";0<document.cookie.length&&
(offset=document.cookie.indexOf(a),-1!=offset&&(offset+=a.length,end=document.cookie.indexOf(";",offset),-1==end&&(end=document.cookie.length),b=decodeURIComponent(document.cookie.substring(offset,end))));return b};a.prototype.set=function(a,b,f){var c=1;null!=f&&(c=f);f=new Date((new Date).getTime()+864E5*c);f="; expires\x3d"+f.toGMTString();document.cookie=a+"\x3d"+encodeURIComponent(b)+";path\x3d/"+f};a.prototype.remvoe=function(a){var b;b=new Date((new Date).getTime()-1);b="; expires\x3d"+b.toGMTString();
document.cookie=a+"\x3d"+escape("")+";path\x3d/"+b};return new a}();LG.tip=function(a){LG.wintip?(LG.wintip.set("content",a),LG.wintip.show()):LG.wintip=b.ligerDialog.tip({content:a});setTimeout(function(){LG.wintip.hide()},4E3)};LG.prevLoadImage=function(a,c){for(var e in c)b("\x3cimg /\x3e").attr("src",a+c[e])};LG.showLoading=function(a){a=a||"正在加载中...";b("body").append("\x3cdiv class\x3d'jloading'\x3e"+a+"\x3c/div\x3e");b.ligerui.win.mask()};LG.hideLoading=function(a){b("body \x3e div.jloading").remove();
b.ligerui.win.unmask({id:(new Date).getTime()})};LG.showSuccess=function(a,c){if("function"==typeof a||0==arguments.length)c=a,a="操作成功!";b.ligerDialog.success(a,"提示信息",c)};LG.showError=function(a,c){if("function"==typeof a||0==arguments.length)c=a,a="操作失败!";b.ligerDialog.error(a,"提示信息",c)};LG.showOperate=function(a,c,e){var f=b.ligerDialog.waitting(a);e||setTimeout(function(){f.close()},c||1E3);return f};LG.showConfirm=function(a,c,e){b.ligerDialog.confirm(a,c,e)};LG.validateTip=function(a,c,e){e=
e?e:1E3;var f=a.ligerTip(b.extend({content:"数据错误",auto:!0},c));setTimeout(function(){(f.tip||b(f.element)).fadeOut("normal",function(){f.remove()})},e)};LG.prevDialogImage=function(a){a=a||"";LG.prevLoadImage(a+"/Content/ligerUI/skins/Aqua/images/win/",["dialog-icons.gif"]);LG.prevLoadImage(a+"/Content/ligerUI/skins/Gray/images/win/",["dialogicon.gif"])};LG.ajax=function(a){var c=b.extend({cache:!1,async:!0,contentType:"application/x-www-form-urlencoded;charset\x3dUTF-8",dataType:"json",type:"post"},
a||{});b.ajax({cache:!1,async:!0,url:c.url,data:c.data,contentType:c.contentType,dataType:c.dataType,type:c.type,beforeSend:function(){LG.loading=!0;c.beforeSend?c.beforeSend():LG.showLoading(c.loading)},complete:function(){LG.loading=!1;c.complete?c.complete():LG.hideLoading()},success:function(a){a&&(a.error?c.error&&c.error(a.message,a.data,a.code):c.success&&c.success(a.data,a.message,a.code))},error:function(a,b){LG.tip("发现系统错误 \x3cBR\x3e错误码："+a.status);c.ajaxError&&c.ajaxError(a,b)}})};LG.singleAjax=
function(a,c){if(c)if(c instanceof jQuery){if(c.hasClass("disabled"))return;c.addClass("disabled")}else{if(c.__ajaxLoading)return;c.__ajaxLoading=!0}var e=b.extend({cache:!1,async:!0,contentType:"application/x-www-form-urlencoded;charset\x3dUTF-8",dataType:"json",type:"post"},a||{});b.ajax({cache:!1,async:!0,url:e.url,data:e.data,contentType:e.contentType,dataType:e.dataType,type:e.type,beforeSend:function(){e.beforeSend&&e.beforeSend()},complete:function(){e.complete&&e.complete();c&&(c instanceof
jQuery?c.removeClass("disabled"):c.__ajaxLoading=!1)},success:function(a){a&&(a.error?e.error&&e.error(a.message,a.code):e.success&&e.success(a.data,a.message,a.code))},error:function(a,b){LG.tip("发现系统错误 \x3cBR\x3e错误码："+a.status);e.ajaxError&&e.ajaxError(a,b)}})};LG.getPageMenuNo=function(){var a=b("#MenuNo").val();a||(a=getQueryStringByName("MenuNo"));return a};LG.createButton=function(a){a=b.extend({appendTo:b("body")},a||{});var c=b('\x3cdiv class\x3d"button button2 buttonnoicon" style\x3d"width:60px"\x3e\x3cdiv class\x3d"button-l"\x3e \x3c/div\x3e\x3cdiv class\x3d"button-r"\x3e \x3c/div\x3e \x3cspan\x3e\x3c/span\x3e\x3c/div\x3e');
a.icon&&(c.removeClass("buttonnoicon"),c.append('\x3cdiv class\x3d"button-icon"\x3e \x3cimg src\x3d"'+a.icon+'" /\x3e \x3c/div\x3e '));a.green&&c.removeClass("button2");a.width&&c.width(a.width);a.click&&c.click(a.click);a.text&&b("span",c).html(a.text);"string"==typeof a.appendTo&&(a.appendTo=b(a.appendTo));c.appendTo(a.appendTo);return c};LG.bulidFilterGroup=function(a){if(!a)return null;var c={op:"and",rules:[]};b(":input",a).not(":submit, :reset, :image,:button, [disabled]").each(function(){if(this.name&&
b(this).hasClass("field")&&null!=b(this).val()&&""!=b(this).val()){var a=b(this).attr("ltype"),f=b(this).attr("ligerui"),g;f&&(g=JSON2.parse(f));var f=b(this).attr("op")||"like",k=b(this).attr("vt")||"string",l=b(this).val(),h=this.name;"select"==a&&g&&g.valueFieldID&&(l=b("#"+g.valueFieldID).val(),h=g.valueFieldID);"lessorequal"==f&&"date"==a&&(l+=" 23:59:59");c.rules.push({op:f,field:h,value:l,type:k})}});return c};LG.appendSearchButtons=function(a,c,e){if(a){a=b(a);var f=b('\x3cul\x3e\x3cli style\x3d"margin-right:8px"\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"l-clear"\x3e\x3c/div\x3e').appendTo(a);
LG.addSearchButtons(a,c,f.find("li:eq(0)"),f.find("li:eq(1)"),e)}};LG.addSearchButtons=function(a,c,e,f,g){if(a){if(e){var k=LG.createButton({appendTo:e,text:"搜索",click:function(){var b=LG.bulidFilterGroup(a);if(b.rules.length)g?(e={field:"dr",value:0,op:"equal"},b.rules.push(e),c.set("parms",[{name:"where",value:JSON2.stringify(b)}])):c.set("where",{where:JSON2.stringify(b)});else if(g){var e;c.set("parms",[{name:"where",value:JSON2.stringify(b)}])}else c.set("parms",[]);c.set("parms",[]);c.changePage("first");
c.loadData()}});b(document).keydown(function(a){13==a.keyCode&&k.trigger("click")})}f&&LG.createButton({appendTo:f,width:80,text:"高级搜索",click:function(){c.showFilter()}})}};LG.appendSearchAndRestBtn=function(a,c,e){if(a){var f=b('\x3cul\x3e\x3cli style\x3d"margin-right:8px"\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli style\x3d"margin-left:8px"\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"l-clear"\x3e\x3c/div\x3e').appendTo(b(a));LG.addSearchAndRestBtn(a,c,f.find("li:eq(0)"),f.find("li:eq(1)"),f.find("li:eq(2)"),
e)}};LG.appendSearchAndRestBtn=function(a,c,e,f){if(a){var g=b('\x3cul class\x3d"filter-btn-wrapper"\x3e\x3cli style\x3d"margin-right:8px"\x3e\x3c/li\x3e\x3cli\x3e\x3c/li\x3e\x3cli style\x3d"margin-left:8px"\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"l-clear"\x3e\x3c/div\x3e').appendTo(b(a));LG.addSearchAndRestBtn(a,c,g.find("li:eq(0)"),g.find("li:eq(1)"),g.find("li:eq(2)"),e,f)}};LG.addSearchAndRestBtn=function(a,c,e,f,g,k,l){var h=b(a);if(h){if(e){var m=LG.createButton({appendTo:e,text:"搜索",click:function(){var a=
LG.bulidFilterGroup(h);if(a.rules.length){b={field:"dr",value:0,op:"equal"};a.rules.push(b);if(l)for(i in l)a.rules.push(l[i]);c.set("parms",[{name:"where",value:JSON2.stringify(a)}])}else{var b={op:"and",rules:[{field:"dr",value:0,op:"equal"}]};if(l)for(i in l)b.rules.push(l[i]);c.set("parms",[{name:"where",value:JSON2.stringify(b)}])}c.changePage("first");c.loadData()}});b(document).keydown(function(a){13==a.keyCode&&m.trigger("click")})}g&&LG.createButton({appendTo:g,width:80,text:"重置",click:function(){var c=
b.ligerui.get(a.replace("#",""));c&&(b(":input",h).not(":submit, :reset, :image,:button, [disabled]").each(function(){this.name&&b(this).hasClass("field")&&b(this).val("")}),c.setData(k))}})}};LG.setFormDefaultBtn=function(a,b){var c=[];a&&c.push({text:"取消",onclick:a});b&&c.push({text:"保存",onclick:b});LG.addFormButtons(c)};LG.addFormButtons=function(a){if(a){var c=b("body \x3e div.form-bar");0==c.length&&(c=b('\x3cdiv class\x3d"form-bar"\x3e\x3cdiv class\x3d"form-bar-inner"\x3e\x3c/div\x3e\x3c/div\x3e').appendTo("body"));
a instanceof Array||(a=[a]);b(a).each(function(a,f){a=b('\x3cdiv class\x3d"l-dialog-btn"\x3e\x3cdiv class\x3d"l-dialog-btn-l"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-dialog-btn-r"\x3e\x3c/div\x3e\x3cdiv class\x3d"l-dialog-btn-inner"\x3e\x3c/div\x3e\x3c/div\x3e ');b("div.l-dialog-btn-inner:first",a).html(f.text||"BUTTON");if(f.onclick)a.on("click",function(){f.onclick(f)});f.width&&a.width(f.width);b("\x3e div:first",c).append(a)})}};LG.loadForm=function(a,c,e){c=c||{};a||(a=b("form:first"));var f=b.extend({beforeSend:function(){LG.showLoading("正在加载表单数据中...")},
complete:function(){LG.hideLoading()},success:function(f){var g=c.preID||"",l;for(l in f){var h=b("[name\x3d"+(g+l)+"]",a);h.is(":checkbox,:radio")?h[0].checked=f[l]?!0:!1:h.val(f[l])}g=b.ligerui.find(b.ligerui.controls.Input);l=0;for(h=g.length;l<h;l++){var m=g[l];m.updateStyle();g[l]instanceof b.ligerui.controls.TextBox&&m.checkValue()}e&&e(f)},error:function(a){LG.showError("数据加载失败!\x3cBR\x3e错误信息："+a)}},c);LG.ajax(f)};LG.submitForm=function(a,c,e){a||(a=b("form:first"));a.valid()?a.ajaxSubmit({dataType:"json",
success:c,beforeSubmit:function(a,c,e){b(":checkbox,:radio",c).each(function(){var b;a:{b=0;for(var c=a.length;b<c;b++)if(a[b].name==this.name){b=!0;break a}b=!1}b||a.push({name:this.name,type:this.type,value:this.checked})});e=0;for(var f=a.length;e<f;e++){var g=a[e];if("checkbox"==g.type||"radio"==g.type)g.value=b("[name\x3d"+g.name+"]",c)[0].checked?"true":"false"}},beforeSend:function(a,b,c){LG.showLoading("正在保存数据中...")},complete:function(){LG.hideLoading()},error:function(a){LG.tip("发现系统错误 \x3cBR\x3e错误码："+
a.status)}}):LG.showInvalid()};LG.showInvalid=function(a){(a=a||LG.validator)&&b.ligerDialog.error('\x3cdiv class\x3d"invalid"\x3e存在'+a.errorList.length+"个字段验证不通过，请检查!\x3c/div\x3e")};LG.clearValid=function(a){b(":input",a).not(":submit, :reset, :image,:button, [disabled]").each(function(){if(this.name){var a=b(this);a.hasClass("l-textarea")?a.removeClass("l-textarea-invalid"):a.hasClass("l-text-field")&&a.parent().removeClass("l-text-invalid");b(a).removeAttr("title").ligerHideTip()}})};LG.validate=
function(a,c){"string"===typeof a?a=b(a):"object"===typeof a&&1===a.NodeType&&(a=b(a));c=b.extend({errorPlacement:function(a,c){c.attr("id")||c.attr("id",(new Date).getTime());c.hasClass("l-textarea")?c.addClass("l-textarea-invalid"):c.hasClass("l-text-field")&&c.parent().addClass("l-text-invalid");b(c).removeAttr("title").ligerHideTip();b(c).attr("title",a.html()).ligerTip({distanceX:5,distanceY:-3,auto:!0})},success:function(a){a.attr("for")&&(a=b("#"+a.attr("for")),a.hasClass("l-textarea")?a.removeClass("l-textarea-invalid"):
a.hasClass("l-text-field")&&a.parent().removeClass("l-text-invalid"),b(a).removeAttr("title").ligerHideTip())}},c||{});LG.validator=a.validate(c);return LG.validator};LG.loadToolbar=function(a,b,e){var c=LG.getPageMenuNo();LG.ajax({loading:"正在加载工具条中...",url:"/Admin/Manage/GetMyButton",data:{MenuNo:c},success:function(c){if(a.toolbarManager){for(var f=[],g=0,h=c.length;g<h;g++){var m=c[g];f[f.length]={click:b,text:m.BtnName,img:m.BtnIcon,id:m.BtnNo};f[f.length]={line:!0}}if(e)for(g=0,h=e.length;g<
h;g++)f[f.length]={click:b,text:e[g].text,img:e[g].img,id:e[g].id};a.toolbarManager.set("items",f)}}})};LG.closeCurrentTab=function(a){a||(a=b("#framecenter \x3e .l-tab-content \x3e .l-tab-content-item:visible").attr("tabid"));tab&&tab.removeTabItem(a)};LG.clearFlash=function(){b.extend(b.ligerDefaults.Tab,{onBeforeRemoveTabItem:function(a){alert(a)}})};LG.closeAndReloadParent=function(a,c){LG.closeCurrentTab(a);a=b("#mainmenu ul.menulist li[menuno\x3d"+c+"]").attr("tabid");c=window.frames[a];tab&&
tab.selectTabItem(a);c&&c.f_reload?c.f_reload():tab&&tab.reload(a)};LG.overrideGridLoading=function(){b.extend(b.ligerDefaults.Grid,{onloading:function(){LG.showLoading("正在加载表格数据中...")},onloaded:function(){LG.hideLoading()}})};LG.fliterDrGrid=function(){b.extend(b.ligerDefaults.Grid,{onLoadData:function(){var a=this.get("parms");if(a.where){rule={field:"dr",value:0,op:"equal"};var b=JSON2.parse(a.where);b.rules.push(rule);a.where=JSON2.stringify(b)}else a.where=JSON2.stringify({op:"or",rules:[{field:"dr",
value:0,op:"equal"},{field:"dr",op:"isnull"}]});this.set("parms",a)}})};LG.adujestConfig=function(a,c){if(a.Form&&a.Form.fields)for(var e=a.Form.fields.length-1;0<=e;e--){var f=a.Form.fields[e];-1!=b.inArray(f.name,c)&&a.Form.fields.splice(e,1)}if(a.Grid&&a.Grid.columns)for(e=a.Grid.columns.length-1;0<=e;e--)-1!=b.inArray(a.Grid.columns[e].name,c)&&a.Grid.columns.splice(e,1);if(a.Search&&a.Search.fields)for(e=a.Search.fields.length-1;0<=e;e--)f=a.Search.fields[e],-1!=b.inArray(f.name,c)&&a.Search.fields.splice(e,
1)};LG.findToolbarItem=function(a,b){if(!a.toolbarManager||!a.toolbarManager.options.items)return null;a=a.toolbarManager.options.items;for(var c=0,f=a.length;c<f;c++)if(a[c].id==b)return a[c];return null};LG.setGridDoubleClick=function(a,b,e){if(e=e||toolbarBtnItemClick)a.on("dblClickRow",function(c){var f=LG.findToolbarItem(a,b);f&&(a.select(c),e(f))})};LG.addValidateStyle=function(a){var c=b.ligerui.get(a);if(c){var c=c.options.fields,e;for(e in c)c[e].validate&&c[e].validate.required&&+b("input[name\x3d"+
c[e].name+"]",b("#"+a)).parent().parent().next(":not(:has(span))").append("\x3cspan class\x3d'l-star' style\x3d'color: red;'\x3e*\x3c/span\x3e")}};LG.openFormDialog=function(a,c,e,f,g,k,l){var h,m,n;m=b("\x3cdiv\x3e\x3c/div\x3e");h=b("\x3cform\x3e\x3c/form\x3e");b(a).append(m);m.append(h);var q=h.ligerForm({fields:c,validate:e,inputWidth:220,labelWidth:100,space:30});g&&q.setData(g);f=b.extend({showType:"slide",width:390},f||{});b.extend(f,{target:m,buttons:[{text:"确定",onclick:function(){k(n,q,l)}},
{text:"取消",onclick:function(){n.close()}}]});n=b.ligerDialog.open(f)};LG.powerToolBar=function(a,b){if(!a||!b||1>b.items.length)return!1;if(0>disabledButtons.length)return a.ligerToolBar(b);for(var c=b.items,f=[],g=0,k=c.length;g<k;g++){var l=c[g];if(l.menu){for(var h=[],m=0,n=l.menu.items.length;m<n;m++){var q=l.menu.items[m];0<=disabledButtons.indexOf(q.id)||h.push(q)}l.menu.items=h;0===h.length&&disabledButtons.push(l.id)}-1===disabledButtons.indexOf(l.id)&&f.push(l)}b.items=f;return a.ligerToolBar(b)};
LG.ajaxSpecialField=function(a){if(a){var c=b.extend(a,{success:function(b){for(var c=b.data.length-1;0<=c;c--){var e=b[c],k=liger.get(e.name),l=k.wrapper;k.width(l.width-40);l.css("icon-alert","relative");LG.specialField(l,e.type)}a.success(b)}});LG.ajax(c)}};LG.specialField=function(a,b,e){if(a){var c={alert:"未录入"};1<a.children(".icon-type").length?a.children(".icon-type").attr({"class":"icon-type icon-"+(b||"none"),title:e||c[b]}):a.append('\x3cspan class\x3d"icon-type icon-'+(b||"none")+'" title\x3d"'+
(e||c[b])+'"\x3e\x3c/span\x3e')}};LG.clearspecial=function(a){a&&1<=a.children(".icon-type").length&&a.children(".icon-type").fadeOut().remove()}})(jQuery);$.extend($.ligerDefaults.Grid,{rowHeight:30,checkbox:!0,fixedCellHeight:!1,frozen:!1,async:!0,headerRowHeight:30,allowUnSelectRow:!0,onError:function(b,a){LG.tip("发现系统错误 "+a)}});$.extend($.ligerDefaults.Tab,{contextmenu:!1});
$.extend($.ligerui.controls.Grid.prototype,{_initBuildHeader:function(){var b=this.options;b.title?($(".l-panel-header-text",this.header).html(b.title),b.headerImg&&this.header.append("\x3cimg src\x3d'"+b.headerImg+"' /\x3e").addClass("l-panel-header-hasicon")):this.header.hide();b.toolbar?$.fn.ligerToolBar&&(this.toolbarManager=this.topbar.ligerToolBar(b.toolbar)):this.topbar.remove()},getSearchGridData:function(b,a,c){function e(a,b){for(var c=0,e=b.length;c<e;c++)a.push({op:"or",rules:[].concat(b[c])})}
function f(a,b,c){a=a.columns;for(var e,f=0,g=a.length;f<g;f++)e=a[f],!1!==e.quickSort&&(e=e.name)&&b.push({op:"like",field:e,value:c,type:"string"})}var g={op:"and",rules:[],groups:[]};b&&g.rules.push({field:"dr",value:0,op:"equal",type:"int"});c&&(g.rules=g.rules.concat(c.and),e(g.groups,c.or));g.groups[g.groups.length]={op:"or",rules:[]};a&&f(this,g.groups[g.groups.length-1].rules,a);return JSON2.stringify(g)},addEditRow:function(b){b=this.add(b);return this.beginEdit(b)},getEditingRow:function(){for(var b=
0,a=this.rows.length;b<a;b++)if(this.rows[b]._editing)return this.rows[b];return null},getChangedRows:function(){function b(b,e){if(b&&!(!b instanceof Array))for(var c=0,g=b.length;c<g;c++)a.push($.extend({},b[c],{__status:e}))}var a=[];b(this.getDeleted(),"delete");b(this.getUpdated(),"update");b(this.getAdded(),"add");return a}});$.ligerDefaults.Grid.formatters.percent=function(b,a){0>b&&(b=0);1<b&&(b=1);return(100*b).toFixed(a.editor.precision||0)+"%"};
$.ligerDefaults.Grid.formatters.numberbox=function(b,a){return b.toFixed(a.editor.precision||0)};
$.ligerDefaults.Grid.formatters.currency=function(b,a){if(!b)return"0.00";b=b.toString().replace(/\$|\,/g,"");isNaN(b)&&(b="0.00");sign=b==(b=Math.abs(b));b=Math.floor(100*b+.50000000001);cents=b%100;b=Math.floor(b/100).toString();10>cents&&(cents="0"+cents);for(a=0;a<Math.floor((b.length-(1+a))/3);a++)b=b.substring(0,b.length-(4*a+3))+","+b.substring(b.length-(4*a+3));return""+((sign?"":"-")+""+b+"."+cents)};
$.ligerDefaults.Grid.editors.percent={create:function(b,a){var c=a.column.editor.precision||0,e=$("\x3cinput type\x3d'text' style\x3d'text-align:right' class\x3d'l-text' /\x3e");e.bind("keypress",function(a){a=window.event?a.keyCode:a.which;return 48<=a&&57>=a||46==a||8==a});e.bind("blur",function(){var a=e.val();a.replace("%","");e.val(parseFloat(a).toFixed(c))});b.append(e);return e},getValue:function(b,a){b=b.val();b.replace("%","");b=.01*parseFloat(b);0>b&&(b=0);1<b&&(b=1);return b},setValue:function(b,
a,c){c=c.column.editor.precision||0;0>a&&(a=0);1<a&&(a=1);a=(100*a).toFixed(c)+"%";b.val(a)},resize:function(b,a,c,e){b.width(a).height(c)}};
$.ligerDefaults.Grid.editors.newnumberbox={create:function(b,a){var c=$("\x3cinput type\x3d'text' /\x3e"),e=a.column,f=e.editor.p||e.editor.ext,e={attr:null,type:"float",minValue:null,maxValue:null,defaultValue:""};f&&(a="function"===typeof f?f(a.record,a.rowindex,a.value,a.column):f,$.extend(e,a));c.bind("keypress",function(a){a=window.event?a.keyCode:a.which;return 48<=a&&57>=a||46==a||45==a||8==a});(a=e.attr)&&c.attr(a);b.append(c);c.ligerTextBox(e);return c},getValue:function(b,a){var c=a.column,
e=c.editor.p||c.editor.ext,c={attr:null,type:"float",minValue:null,maxValue:null,defaultValue:"",precision:null};e&&(a="function"===typeof e?e(a.record,a.rowindex,a.value,a.column):e,$.extend(c,a));b="int"===c.type?parseInt(b.val(),10):parseFloat(b.val());return isNaN(b)||null!==c.minValue&&b<c.minValue||null!==c.maxValue&&b>c.maxValue?c.defaultValue:c.precision?b.toFixed(c.precision):b},setValue:function(b,a,c){b.val(a)},resize:function(b,a,c,e){b.liger("option","width",a-8);b.liger("option","height",
c)},destroy:function(b,a){b.liger("destroy")}};
$.ligerDefaults.Grid.editors.numberbox={create:function(b,a){var c=a.column.editor.precision,e=$("\x3cinput type\x3d'text' style\x3d'text-align:right' class\x3d'l-text' /\x3e");e.bind("keypress",function(a){a=window.event?a.keyCode:a.which;return 48<=a&&57>=a||46==a||8==a});e.bind("blur",function(){var a=e.val();e.val(parseFloat(a).toFixed(c))});b.append(e);return e},getValue:function(b,a){return parseFloat(b.val())},setValue:function(b,a,c){b.val(a.toFixed(c.column.editor.precision))},resize:function(b,
a,c,e){b.width(a).height(c)}};
$.ligerDefaults.Grid.editors.date={create:function(b,a){var c=a.column,e=$("\x3cinput type\x3d'text'/\x3e");b.append(e);b={};var f=c.editor.p||c.editor.ext;f&&(a="function"==typeof f?f(a.record,a.rowindex,a.value,c):f,$.extend(b,a));e.ligerDateEditor(b);return e},getValue:function(b,a){return b.liger("option","value")},setValue:function(b,a,c){b.liger("option","value",a)},resize:function(b,a,c,e){b.liger("option","width",a);b.liger("option","height",c)},destroy:function(b,a){b.liger("destroy")}};
$.ligerDefaults.Grid.editors.select=$.ligerDefaults.Grid.editors.combobox={create:function(b,a){var c=a.column,e=$("\x3cinput type\x3d'text'/\x3e");b.append(e);b={data:c.editor.data,slide:!1,valueField:c.editor.valueField||c.editor.valueColumnName,textField:c.editor.textField||c.editor.displayColumnName};var f=c.editor.p||c.editor.ext;f&&(a="function"==typeof f?f(a.record,a.rowindex,a.value,c):f,$.extend(b,a));e.ligerComboBox(b);return e},getValue:function(b,a){return b.liger("option","value")},setValue:function(b,
a,c){b.liger("option","value",a)},resize:function(b,a,c,e){b.liger("option","width",a-2);b.liger("option","height",c)},destroy:function(b,a){b.liger("destroy")}};
$.ligerDefaults.Grid.editors["int"]=$.ligerDefaults.Grid.editors["float"]=$.ligerDefaults.Grid.editors.spinner={create:function(b,a){var c=a.column,e=$("\x3cinput type\x3d'text'/\x3e");b.append(e);e.css({border:"#6E90BE"});b={type:"float"==c.editor.type?"float":"int"};var f=a.column.editor.p||a.column.editor.ext;f&&(a="function"==typeof f?f(a.record,a.rowindex,a.value,a.column):f,$.extend(b,a));void 0!=c.editor.minValue&&(b.minValue=c.editor.minValue);void 0!=c.editor.maxValue&&(b.maxValue=c.editor.maxValue);
e.ligerSpinner(b);return e},getValue:function(b,a){b="int"==a.column.editor.type?parseInt(b.val(),10):parseFloat(b.val());return isNaN(b)?"":b},setValue:function(b,a,c){b.val(a)},resize:function(b,a,c,e){b.liger("option","width",a-8);b.liger("option","height",c)},destroy:function(b,a){b.liger("destroy")}};
$.ligerDefaults.Grid.editors.string=$.ligerDefaults.Grid.editors.text={create:function(b,a){var c=$("\x3cinput type\x3d'text' class\x3d'l-text-editing'/\x3e");"string"==typeof a.column.validate?c.attr("validate",a.column.validate):a.column.validate&&"object"==typeof a.column.validate&&c.attr("validate",JSON2.stringify(a.column.validate));if(a.grid){var e=a.grid.id+"_editor_"+a.grid.editorcounter++ +"_"+(new Date).getTime();c.attr("name",e).attr("id",e)}var e={},f=a.column.editor.p||a.column.editor.ext;
f&&(a="function"==typeof f?f(a.record,a.rowindex,a.value,a.column):f,$.extend(e,a));if(a=e.attr)for(var g in a)c.attr(g,a[g]);b.append(c);c.ligerTextBox(e);return c},getValue:function(b,a){return b.val()},setValue:function(b,a,c){b.val(a)},resize:function(b,a,c,e){b.liger("option","width",a-8);b.liger("option","height",c)},destroy:function(b,a){b.liger("destroy")}};
$.ligerui.controls.Grid.prototype.showFilter=function(){function b(){return encodeURIComponent(e.url.replace(/(.+)?view=/,""))}function a(){h.html('\x3coption value\x3d"0"\x3e历史查询记录\x3c/options\x3e');var a=b();if(a=LG.cookies.get(a))a=JSON2.parse(a),$(a).each(function(){h.append('\x3coption value\x3d"'+this.name+'"\x3e'+this.name+"\x3c/options\x3e")})}var c=this,e=this.options;if(c.winfilter)c.winfilter.show();else{var f=$('\x3cdiv id\x3d"'+c.id+'_filtercontainer"\x3e\x3c/div\x3e').width(380).height(120).hide(),
g=[];$(c.columns).each(function(){var a={name:this.name,display:this.display},b="date"==this.type;if("int"==this.type||"number"==this.type||"float"==this.type)a.type="number";b&&(a.type="date");this.editor&&(a.editor=this.editor);g.push(a)});var k=f.ligerFilter({fields:g});c.winfilter=$.ligerDialog.open({width:420,height:208,target:f,isResize:!0,top:50,buttons:[{text:"确定",onclick:function(a,b){(a=k.getData())&&a.rules&&a.rules.length?c.set("parms",{where:JSON2.stringify(a)}):c.set("parms",{});c.loadData();
b.hide()}},{text:"取消",onclick:function(a,b){b.hide()}}]});var l=$('\x3cdiv class\x3d"historypanle"\x3e\x3cselect class\x3d"selhistory"\x3e\x3coption value\x3d"0"\x3e历史查询记录\x3c/options\x3e\x3c/select\x3e\x3cinput type\x3d"button" value\x3d"删除" class\x3d"deletehistory" /\x3e\x3cinput type\x3d"button" value\x3d"保存" class\x3d"savehistory" /\x3e\x3c/div\x3e');f.append(l);var h=$(".selhistory",l).change(function(){if("0"!=this.value){var a;a:{a=this.value;var c=b();if(c=LG.cookies.get(c))for(var c=JSON2.parse(c),
e=0,f=c.length;e<f;e++)if(c[e].name==a){a=c[e].value;break a}a=null}a&&k.setData(a)}});$(".deletehistory",l).click(function(){"0"!=h.val()&&$.ligerDialog.confirm("确定删除吗",function(c){if(c){a:{c=h.val();var e=b(),f;if(f=LG.cookies.get(e)){f=JSON2.parse(f);for(var g=0,m=f.length;g<m;g++)if(f[g].name==c){f.splice(g,1);LG.cookies.set(e,JSON2.stringify(f));break a}}}a()}})});$(".savehistory",l).click(function(){$.ligerDialog.prompt("输入保存名字",JSON2.stringify(new Date).replace(/["-\.:]/g,""),!1,function(c,
e){if(c&&e){c=b();var f;(f=LG.cookies.get(c))?(f=JSON2.parse(f),f.push({name:e,value:k.getData()})):f=[{name:e,value:k.getData()}];LG.cookies.set(c,JSON2.stringify(f));a();h.val(e)}})});a()}};$.extend($.ligerui.controls.TextBox.prototype,{checkNotNull:function(){var b=this.options;b.nullText&&!b.disabled&&(this.inputText.val()||this.inputText.addClass("l-text-field-null").val(b.nullText))}});
$.extend($.ligerui.controls.ComboBox.prototype,{_setHeight:function(b){10<b&&(this.wrapper.height(b),this.inputText.height(b),this.link.height(b),this.textwrapper.css({width:b}))}});
$.extend($.ligerui.controls.Form.prototype,{getSearchFormData:function(b,a){function c(a,b){for(var c=0,e=b.length;c<e;c++)a.push({op:"or",rules:[].concat(b[c])})}function e(a,b,c,e){var f=[];if(c)g=a.attr("dateformat")||"yyyy-MM-dd HH:mm:ss","lessorequal"==e?c.setHours(23,59,59):c.setHours(0,0,0),f.push({datatype:a.attr("data-datatype")||"",field:b,ignore:a.attr("data-ignore")||!1,op:e,type:"text",value:DateUtil.dateToStr(g,c)});else{c=new Date;e=new Date;e.setDate(e.getDate()-(parseInt(a.attr("N"))||
0));e.setHours(0,0,0);c.setHours(23,59,59);var g=a.attr("dateformat")||"yyyy-MM-dd HH:mm:ss";f.push({datatype:a.attr("data-datatype")||"",field:b,ignore:a.attr("data-ignore")||!1,op:"lessorequal",type:"text",value:DateUtil.dateToStr(g,c)});f.push({datatype:a.attr("data-datatype")||"",field:b,ignore:a.attr("data-ignore")||!1,op:"greaterorequal",type:"text",value:DateUtil.dateToStr(g,e)})}for(a=f.length-1;0<=a;a--)k.rules.push(f[a])}var f=this,g=this.options,k={op:"and",rules:[],groups:[]},l=!0,h={};
b&&k.rules.push({field:"dr",value:0,op:"equal",type:"int"});a&&(k.rules=k.rules.concat(a.and),c(k.groups,a.or));(function(a){for(var b=f.element,c=g.prefixID?g.prefixID.length:0,e=0,m=b.length;e<m;e++){var k=$(b[e]),u,x,w,B;if(!k.parent().hasClass("l-text-combobox")&&(u=k.attr("name"))){if(k.parent().hasClass("l-text-date"))a:if(x=k,w=x.attr("ligeruiid"),w=liger.get(w),w=w.getValue()||$(w.element).val()){if("string"===typeof w&&(10===w.length&&(w+=" 00:00:00"),w=new Date(w),"Invalid Date"===w.toString())){x=
null;break a}x.attr("datetimerange")&&(B=x.attr("op")||"like","lessorequal"==B||"less"==B?w.setHours(23,59,59):"greaterorequal"!=B&&"greater"!=B||w.setHours(0,0,0));x=x.attr("dateformat")||"yyyy-MM-dd HH:mm:ss";x=DateUtil.dateToStr(x,w)}else x=null;else x="checkbox"===k.attr("type")?k[0].checked?"Y":"N":k.val()||(0<k.prev(".l-text-combobox").length?k.prev(".l-text-combobox").children("input").attr("data-default"):k.attr("data-default"));var A=k.attr("data-name");if(k.attr("data-range")&&l)switch(h[A]=
h[A]?h[A]:{},k.attr("data-range")){case "start":if(!x)return;h[A].startDom=k;break;case "end":if(!x)return;h[A].endDom=k;break;case "allStart":h[A].startDom=k;break;case "allEnd":h[A].endDom=k}x&&("false"==k.attr("date-isrange")&&(l=!1),0<k.prev(".l-text-combobox").length&&(k=k.prev(".l-text-combobox").children("input")),w=k.attr("op")||"like",B=k.attr("type")||"string",a.push({op:w,field:A||u.slice(c),value:k.attr("data-getCVal")?k.val():x,type:B,datatype:k.attr("datatype")||"",ignore:k.attr("data-ignore")||
!1}))}}})(k.rules);(function(){for(var a in h){var b=h[a].startDom?""==h[a].startDom.val()?!1:!0:!1,c=h[a].endDom?""==h[a].endDom.val()?!1:!0:!1;b?c?b||c||e(h[a].startDom,a):(b=h[a].startDom||h[a].endDom,c=b.val(),""==c?e(b,a):(c=c.split(" ")[0].split("-"),c=new Date(c.join("/")),c.setDate(c.getDate()+(parseInt(b.attr("N"))||0)),e(b,a,c,"lessorequal"))):(b=h[a].endDom||h[a].startDom,c=b.val(),""==c?e(b,a):(c=c.split(" ")[0].split("-"),c=new Date(c.join("/")),c.setDate(c.getDate()-(parseInt(b.attr("N"))||
0)),e(b,a,c,"greaterorequal")))}})();return JSON2.stringify(k)},reset:function(){var b=this.editors,a;for(a in b){var c=b[a].control;c instanceof $.ligerui.controls.TextBox?(c.setValue(""),$(b[a].control.element).val("")):c instanceof $.ligerui.controls.ComboBox||c instanceof $.ligerui.controls.DateEditor?$(c.wrapper).hasClass("l-text-readonly")||c.clear():c instanceof $.ligerui.controls.CheckBox?c.setValue(""):c[0].value=""}}});$.extend($.ligerui.editors,{set:{control:"Set"},taginput:{control:"TagInput"}});
jQuery.validator.addMethod("dateRange",function(b,a,c){if(!b||!c[3])return!0;b=DateUtil.strToDate(b+" 00:00:00").getTime();a=(new Date(DateUtil.dateToStr("YYYY-MM-DD",new Date)+" 00:00:00")).getTime();var e=(new Date).getTime(),f=null,g=null;"number"===typeof c[0]&&(f=864E5*c[0]+(c[5]?a:e));"number"===typeof c[1]&&(g=864E5*c[1]+(c[4]?a:e));return(!f||f<=b)&&(!g||g>b)},$.validator.format("{2}"));
jQuery.validator.addMethod("compareNumTo",function(b,a,c){if(!b||!c[3])return!0;a=$(c[0]).val();if(!a)return!0;b=Number(b);a=Number(a);switch(c[1]){case "eq":return b==a;case "lteq":return b<=a;case "gteq":return b>=a;case "lt":return b<a;case "gt":return b>a;default:return!0}},$.validator.format("{2}"));
jQuery.validator.addMethod("compareDatetimeTo",function(b,a,c){if(!b||!c[3])return!0;a=$(c[0]).val();if(!a)return!0;b=new Date(b.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1/$2/$3"));a=new Date(a.replace(/^(\d{4})(\d{2})(\d{2})$/,"$1/$2/$3"));switch(c[1]){case "eq":return b==a;case "lteq":return b<=a;case "gteq":return b>=a;case "lt":return b<a;case "gt":return b>a;default:return!0}},$.validator.format("{2}"));
$.ligerui.controls.DateEditor.prototype.updateStyle=function(){var b=this.options,b=$.ligerDefaults.Grid.formatters.date(this.inputText.val(),{format:b.format});this.inputText.val(b)};
$.ligerui.controls.ComboBox.prototype.loadText=function(b){var a=this;b=$.extend({url:"../handler/select.ashx",view:null,idfield:null,textfield:null},b||{});var c=b.value||a.getValue();$.ajax({cache:!1,async:!0,dataType:"json",type:"post",url:b.url,data:{view:b.view,idfield:b.idfield,textfield:b.textfield,where:JSON2.stringify({op:"and",rules:[{field:b.idfield,op:"equal",value:c}]})},success:function(b){b&&b.length&&a._changeValue(b[0].id,b[0].text)}})};
$.ligerui.controls.ComboBox.prototype.openSelect=function(b){function a(){if(b.grid.height)return b.grid.height;var a=b.height-60;b.search&&(a-=55);return a}function c(){if(k)k.show();else{var c=$("\x3cdiv\x3e\x3c/div\x3e"),f=$("\x3cform\x3e\x3c/form\x3e"),g=$("\x3cdiv\x3e\x3c/div\x3e");c.append(f).append(g);b.grid.width=b.grid.width||"99%";b.grid.height=a();l=g.ligerGrid(b.grid);l.bind("dblClickRow",function(a){l.select(a);e();k.hide()});k=$.ligerDialog.open({title:b.title,width:b.width,height:b.height,
top:b.top,left:b.left,target:c,buttons:[{text:"选择",onclick:function(a,b){e();b.hide()}},{text:"取消",onclick:function(a,b){b.hide()}}]});b.search?(f.ligerForm(b.search),c=$('\x3cli style\x3d"margin-right:9px"\x3e\x3c/li\x3e'),g=$("\x3cli\x3e\x3c/li\x3e"),$("ul:first",f).append(c).append(g).after('\x3cdiv class\x3d"l-clear"\x3e\x3c/div\x3e'),LG.addSearchButtons(f,l,c,g)):f.remove()}}function e(){var a=!1,c="",e="";$(l.selected).each(function(){a&&(c+=g.split);c+=this[b.valueField];e+=this[b.textField];
a=!0});f._changeValue(c,e)}var f=this,g=this.options;b=$.extend({title:"选择数据",width:800,height:420,top:null,left:null,valueField:null,textField:null,grid:null,form:null},b||{});if(b.grid){var k,l;f.bind("beforeOpen",function(){c();return!1})}};var jiconlist,winicons,currentComboBox,grid;$(function(){jiconlist=$("body \x3e .iconlist:first");jiconlist.length||(jiconlist=$('\x3cul class\x3d"iconlist"\x3e\x3c/ul\x3e').appendTo("body"))});
$(".iconlist li").on({mouseover:function(){$(this).addClass("over")},mouseout:function(){$(this).removeClass("over")},click:function(){if(winicons){var b=$("img",this).attr("src");grid.getEditingRow()&&currentComboBox&&(currentComboBox.inputText.val(b),currentComboBox.valueField.val(b));winicons.hide()}}});
function f_openIconsWin(){winicons?winicons.show():(winicons=$.ligerDialog.open({title:"选取图标",target:jiconlist,width:470,height:280,modal:!0}),jiconlist.attr("loaded")||LG.ajax({url:"/lg/getIcons.do",loading:"正在加载图标中...",success:function(b){for(var a=0,c=b.length;a<c;a++)jiconlist.append("\x3cli\x3e\x3cimg src\x3d'/icons/32X32/"+b[a]+"' /\x3e\x3c/li\x3e");jiconlist.attr("loaded",!0)}}))}
jQuery.extend({createUploadIframe:function(b,a){b="jUploadFrame"+b;var c='\x3ciframe id\x3d"'+b+'" name\x3d"'+b+'" style\x3d"position:absolute; top:-9999px; left:-9999px"';window.ActiveXObject&&("boolean"==typeof a?c+=' src\x3d"javascript:false"':"string"==typeof a&&(c+=' src\x3d"'+a+'"'));jQuery(c+" /\x3e").appendTo(document.body);return jQuery("#"+b).get(0)},createUploadForm:function(b,a,c){var e="jUploadForm"+b;b="jUploadFile"+b;e=jQuery('\x3cform  action\x3d"" method\x3d"POST" name\x3d"'+e+'" id\x3d"'+
e+'" enctype\x3d"multipart/form-data"\x3e\x3c/form\x3e');if(c)for(var f in c)jQuery('\x3cinput type\x3d"hidden" name\x3d"'+f+'" value\x3d"'+c[f]+'" /\x3e').appendTo(e);a=jQuery("#"+a);c=jQuery(a).clone();jQuery(a).attr("id",b);jQuery(a).before(c);jQuery(a).appendTo(e);jQuery(e).css("position","absolute");jQuery(e).css("top","-1200px");jQuery(e).css("left","-1200px");jQuery(e).appendTo("body");return e},ajaxFileUpload:function(b){b=jQuery.extend({},jQuery.ajaxSettings,b);var a=(new Date).getTime(),
c=jQuery.createUploadForm(a,b.fileElementId,"undefined"==typeof b.data?!1:b.data);jQuery.createUploadIframe(a,b.secureuri);var e="jUploadFrame"+a,a="jUploadForm"+a;b.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var f=!1,g={};b.global&&jQuery.event.trigger("ajaxSend",[g,b]);var k=function(a){var h=document.getElementById(e);try{h.contentWindow?(g.responseText=h.contentWindow.document.body?h.contentWindow.document.body.innerHTML:null,g.responseXML=h.contentWindow.document.XMLDocument?
h.contentWindow.document.XMLDocument:h.contentWindow.document):h.contentDocument&&(g.responseText=h.contentDocument.document.body?h.contentDocument.document.body.innerHTML:null,g.responseXML=h.contentDocument.document.XMLDocument?h.contentDocument.document.XMLDocument:h.contentDocument.document)}catch(q){console.error(q),jQuery.handleError(b,g,null,q)}if(g||"timeout"==a){f=!0;var k;try{if(k="timeout"!=a?"success":"error","error"!=k){var l=jQuery.uploadHttpData(g,b.dataType);b.success&&b.success(l,
k);b.global&&jQuery.event.trigger("ajaxSuccess",[g,b])}else jQuery.handleError(b,g,k)}catch(q){console.error(q),k="error",jQuery.handleError(b,g,k,q)}b.global&&jQuery.event.trigger("ajaxComplete",[g,b]);b.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop");b.complete&&b.complete(g,k);jQuery(h).unbind();setTimeout(function(){try{jQuery(h).remove(),jQuery(c).remove()}catch(q){console.error(q),jQuery.handleError(b,g,null,q)}},100);g=null}};0<b.timeout&&setTimeout(function(){f||k("timeout")},b.timeout);
try{c=jQuery("#"+a),jQuery(c).attr("action",b.url),jQuery(c).attr("method","POST"),jQuery(c).attr("target",e),c.encoding?jQuery(c).attr("encoding","multipart/form-data"):jQuery(c).attr("enctype","multipart/form-data"),jQuery(c).submit()}catch(l){console.error(l),jQuery.handleError(b,g,null,l)}jQuery("#"+e).load(k);return{abort:function(){}}},uploadHttpData:function(b,a){b="xml"!=a&&a?b.responseText:b.responseXML;"script"==a&&jQuery.globalEval(b);"json"==a&&eval("data \x3d "+b);"html"==a&&jQuery("\x3cdiv\x3e").html(b).evalScripts();
return b}});
var DateUtil=function(){return{createDate:function(b){return new Date(b)},formatDate:function(b){var a=b.getFullYear(),c=b.getMonth()+1;b=b.getDate();return a+"-"+(10>c?"0"+c:c)+"-"+(10>b?"0"+b:b)},getCNWeekDay:function(b){return"日一二三四五六".charAt(b)},dateReplacer:function(b,a){return this[b]instanceof Date?DateUtil.dateToStr("yyyy-MM-dd",this[b]):a},datetimeReplacer:function(b,a){return this[b]instanceof Date?DateUtil.dateToStr("yyyy-MM-dd HH:mm:ss",this[b]):a},isLeapYear:function(b){return 0==b.getYear()%
4&&(0!=b.getYear()%100||0==b.getYear()%400)},dateToStr:function(b,a){a=a||new Date;b=(b||"yyyy-MM-dd HH:mm:ss").replace(/yyyy|YYYY/,a.getFullYear());b=b.replace(/yy|YY/,9<a.getYear()%100?(a.getYear()%100).toString():"0"+a.getYear()%100);b=b.replace(/MM/,9<a.getMonth()+1?a.getMonth()+1:"0"+(a.getMonth()+1));b=b.replace(/M/g,a.getMonth()+1);b=b.replace(/w|W/g,"日一二三四五六".split("")[a.getDay()]);b=b.replace(/dd|DD/,9<a.getDate()?a.getDate().toString():"0"+a.getDate());b=b.replace(/d|D/g,a.getDate());b=
b.replace(/hh|HH/,9<a.getHours()?a.getHours().toString():"0"+a.getHours());b=b.replace(/h|H/g,a.getHours());b=b.replace(/mm/,9<a.getMinutes()?a.getMinutes().toString():"0"+a.getMinutes());b=b.replace(/m/g,a.getMinutes());b=b.replace(/ss|SS/,9<a.getSeconds()?a.getSeconds().toString():"0"+a.getSeconds());return b=b.replace(/s|S/g,a.getSeconds())},dateAdd:function(b,a,c){c=c||new Date;switch(b){case "s":return new Date(c.getTime()+1E3*a);case "n":return new Date(c.getTime()+6E4*a);case "h":return new Date(c.getTime()+
36E5*a);case "d":return new Date(c.getTime()+864E5*a);case "w":return new Date(c.getTime()+6048E5*a);case "m":return new Date(c.getFullYear(),c.getMonth()+a,c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds());case "y":return new Date(c.getFullYear()+a,c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds())}},dateDiff:function(b,a,c){switch(b){case "s":return parseInt((c-a)/1E3);case "n":return parseInt((c-a)/6E4);case "h":return parseInt((c-a)/36E5);case "d":return parseInt((c-a)/
864E5);case "w":return parseInt((c-a)/6048E5);case "m":return c.getMonth()+1+12*(c.getFullYear()-a.getFullYear())-(a.getMonth()+1);case "y":return c.getFullYear()-a.getFullYear()}},strToDate:function(b){b=b.match(/(\d{1,4})/gm);--b[1];eval("var d \x3d new Date("+b.join(",")+");");return d},strFormatToDate:function(b,a){var c=0,e=-1,f=a.length;-1<(e=b.indexOf("yyyy"))&&e<f&&(c=a.substr(e,4));var g=0;-1<(e=b.indexOf("MM"))&&e<f&&(g=parseInt(a.substr(e,2))-1);var k=0;-1<(e=b.indexOf("dd"))&&e<f&&(k=
parseInt(a.substr(e,2)));var l=0;(-1<(e=b.indexOf("HH"))||1<(e=b.indexOf("hh")))&&e<f&&(l=parseInt(a.substr(e,2)));var h=0;-1<(e=b.indexOf("mm"))&&e<f&&(h=a.substr(e,2));var m=0;-1<(e=b.indexOf("ss"))&&e<f&&(m=a.substr(e,2));return new Date(c,g,k,l,h,m)},dateToLong:function(b){return b.getTime()},longToDate:function(b){return new Date(b)},isDate:function(b,a){null==a&&(a="yyyyMMdd");var c=a.indexOf("yyyy");if(-1==c)return!1;var c=b.substring(c,c+4),e=a.indexOf("MM");if(-1==e)return!1;e=b.substring(e,
e+2);a=a.indexOf("dd");if(-1==a)return!1;b=b.substring(a,a+2);return!isNumber(c)||"2100"<c||"1900">c||!isNumber(e)||"12"<e||"01">e||b>getMaxDay(c,e)||"01">b?!1:!0},getMaxDay:function(b,a){return 4==a||6==a||9==a||11==a?"30":2==a?0==b%4&&0!=b%100||0==b%400?"29":"28":"31"},isNumber:function(b){return/^\d+$/g.test(b)},toArray:function(b){b=b||new Date;var a=[];a[0]=b.getFullYear();a[1]=b.getMonth();a[2]=b.getDate();a[3]=b.getHours();a[4]=b.getMinutes();a[5]=b.getSeconds();return a},datePart:function(b,
a){a=a||new Date;var c="",e="日一二三四五六".split("");switch(b){case "y":c=a.getFullYear();break;case "M":c=a.getMonth()+1;break;case "d":c=a.getDate();break;case "w":c=e[a.getDay()];break;case "ww":c=a.WeekNumOfYear();break;case "h":c=a.getHours();break;case "m":c=a.getMinutes();break;case "s":c=a.getSeconds()}return c},maxDayOfDate:function(b){b=b||new Date;b.setDate(1);b.setMonth(b.getMonth()+1);b=b.getTime()-864E5;return(new Date(b)).getDate()}}}(),throttle=function(b,a,c,e){var f=+new Date,g=0,k=0,
l=null,h,m,n,q=function(){k=f;b.apply(m,n)};return function(){f=+new Date;m=this;n=arguments;h=f-(e?g:k)-a;clearTimeout(l);e?c?l=setTimeout(q,a):0<=h&&q():0<=h?q():c&&(l=setTimeout(q,-h));g=f}},debounce=function(b,a,c){return throttle(b,a,c,!0)};function getQueryString(){var b=location.search.match(/[?&][^?&]+=[^?&]+/g);if(null==b)return"";for(var a=0;a<b.length;a++)b[a]=b[a].substring(1);return b}
function getQueryStringByName(b){b=location.search.match(new RegExp("[?\x26]"+b+"\x3d([^\x26]+)","i"));return null==b||1>b.length?"":b[1]}function getQueryStringByIndex(b){if(null==b)return"";var a=getQueryString();if(b>=a.length)return"";b=a[b];a=b.indexOf("\x3d")+1;return b=b.substring(a)}
(function(b){b(".l-dialog-btn").on("mouseover",function(){b(this).addClass("l-dialog-btn-over")}).on("mouseout",function(){b(this).removeClass("l-dialog-btn-over")});b(".l-dialog-tc .l-dialog-close").on("mouseover",function(){b(this).addClass("l-dialog-close-over")}).on("mouseout",function(){b(this).removeClass("l-dialog-close-over")});b(".searchtitle .togglebtn").on("click",function(){b(this).hasClass("togglebtn-down")?b(this).removeClass("togglebtn-down"):b(this).addClass("togglebtn-down");b(this).parent().nextAll("div.searchbox:first").slideToggle("fast")});
b(document).keydown(function(a){var b;8==a.keyCode?(b=a.srcElement||a.target,b="INPUT"==b.tagName.toUpperCase()||"TEXTAREA"==b.tagName.toUpperCase()?b.readOnly||b.disabled:!0):b=!1;b&&a.preventDefault()})})(jQuery);
$(function(){$("body").on("paste","input[type\x3dtext]",function(b){b.preventDefault();var a;b=window.clipboardData&&clipboardData.setData?window.clipboardData.getData("text"):(b.originalEvent||b).clipboardData.getData("text/plain")||prompt("在这里输入文本");b=$.trim(b);if(document.body.createTextRange){if(document.selection)a=document.selection.createRange();else if(window.getSelection){a=window.getSelection();a=a.getRangeAt(0);var c=document.createElement("span");c.innerHTML="\x26#FEFF;";a.deleteContents();
a.insertNode(c);a=document.body.createTextRange();a.moveToElementText(c);c.parentNode.removeChild(c)}a.text=b;a.collapse(!1);a.select()}else document.execCommand("insertText",!1,b)});(function(){var b=window.onload;window.onload=function(){"function"===typeof b&&b();parent!==top?$("body").addClass("in-iframe"):"no"!==getQueryStringByName("ani")&&(Math.round(Math.random())&1?0>=$(".l-container").addClass("animation appearRTL").length&&$("body").addClass("animation appearRTL"):0>=$(".l-container").addClass("animation appearBTT").length&&
$("body").addClass("animation appearBTT"))}})();(function(){var b=$("input[placeholder]");0>=b.length||"placeholder"in b[0]||(b.each(function(){var a=$(this);a.after('\x3cspan class\x3d"placeholder" style\x3d"position: absolute;"\x3e'+a.attr("placeholder")+"\x3c/span\x3e")}),$("body").on("click",".placeholder",function(){$(this).hide().siblings("input").focus()}),b.on({focus:function(){$(this).siblings(".placeholder").hide()},blur:function(){var a=$(this);a.val()||a.siblings(".placeholder").show()}}))})();
(function(){var b=$(".hidden-search");b.on("click",function(){$(this).hasClass("hover")||$(this).addClass("hover")});b.find(".cancel").on("click",function(a){$(this).parents(".hidden-search").removeClass("hover");a.stopPropagation()})})();$("body").on("click","[data-action\x3d'single-search']",function(b){$("body").trigger("single-search",[$(this).siblings("[data-action\x3d'single-search-input']:eq(0)").val(),this,b])});$("body").on("keypress","[data-action\x3d'single-search-input']",function(b){if(13==
b.keyCode)return $("body").trigger("single-search",[$(this).val(),this,b]),b.preventDefault(),b.stopPropagation(),!1});$(".search-box .input-box").add(".hidden-search").find(".clear").on("click",function(){$(this).siblings("input").val("")});$("body").on("click","[data-action\x3d'select-menu']",backtrackFun);window.verticalList=function(){function b(a,b,c,k){0<=c?a.addClass("disabled"):a.removeClass("disabled");0>=c+k?b.addClass("disabled"):b.removeClass("disabled")}function a(){$(".up[data-action\x3d'vertical-list-slide']").each(function(){var a=
$(this),c=a.siblings(".vertical-list"),g=c.children("ul"),c=g.height()-c.height(),g=g.position().top,k=a.siblings(".down[data-action\x3d'vertical-list-slide']");b(a,k,g,c)})}a();var c=debounce(a,200,!0);$(window).resize(function(){c()});$("body").on("click","[data-action\x3d'vertical-list-slide']",function(){var a=$(this);if(!a.hasClass("disabled")){var c=a.siblings(".vertical-list"),g=c.children("ul:eq(0)"),k=g.height()-c.height(),c=g.children("li:eq(1)").outerHeight(!0)||200,l=g.position().top,
h,m;k&&(a.hasClass("up")?(l+=1*c,h=a,m=h.siblings(".down[data-action\x3d'vertical-list-slide']")):a.hasClass("down")&&(l-=1*c,m=a,h=m.siblings(".up[data-action\x3d'vertical-list-slide']")),g.animate({top:l+"px"},300),setTimeout(function(){var a=l;0<l||0>k?a=0:0>=l+k&&(a=-k);a!==l&&(g.stop(),g.animate({top:a+"px"},200));b(h,m,a,k)},200))}});return{setStatus:a}}();(function(){$("body").on("click",'[data-action\x3d"open-advanced-search"]',function(){$("#advanced-search-wrap").removeClass("ani-hide").addClass("active ani-show")});
$("body").on("click",'[data-action\x3d"close-advanced-search"]',function(){$("#advanced-search-wrap").removeClass("ani-show").addClass("ani-hide");$("#advanced-btn\x3e.text").addClass("ani");"animation"in document.body.style?setTimeout(function(){$("#advanced-search-wrap").removeClass("ani-hide active");$("#advanced-btn\x3e.text").removeClass("ani")},500):($("#advanced-search-wrap").removeClass("ani-hide active"),$("#advanced-btn\x3e.text").removeClass("ani"))})})()});
function backtrackFun(){var b=/urlid=([^&]*)/.exec(window.location.search);if(b)try{top.tab.removeTabItem(top.tab.getSelectedTabItemID()).selectTabItem(b[1])}catch(a){console.error(a)}else top.topBackTrack.back()}function detectZoom(b){var a=0;b=b||window;void 0!==b.outerWidth&&void 0!==b.innerWidth&&(a=b.outerWidth/b.innerWidth);return parseFloat(a.toString().replace(/([0-9]+\.[0-9]{2})[0-9]*/,"$1"))}
(function(b){b.fn.ligerSearchForm=function(a){return b.ligerui.run.call(this,"ligerSearchForm",arguments)};b.fn.ligerGetSearchFormManager=function(){return b.ligerui.run.call(this,"ligerGetSearchFormManager",arguments)};b.ligerDefaults.SearchForm={};b.ligerMethos.SearchForm={};b.ligerui.controls.SearchForm=function(a,c){b.ligerui.controls.SearchForm.base.constructor.call(this,a,c)};b.ligerui.controls.SearchForm.ligerExtend(b.ligerui.core.UIComponent,{__getType:function(){return"SearchForm"},__idPrev:function(){return"SearchForm"},
_extendMethods:function(){return b.ligerMethos.SearchForm},_render:function(){function a(a){a=b.extend({appendTo:b("body")},a||{});var c=b('\x3cdiv class\x3d"" style\x3d"width:60px"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e');a.icon&&(c.removeClass("buttonnoicon"),c.append('\x3cdiv class\x3d"button-icon"\x3e \x3cimg src\x3d"'+a.icon+'" /\x3e \x3c/div\x3e '));a.green&&c.removeClass("button2");a.width&&c.width(a.width);a.click&&c.click(a.click);a.text&&b("span",c).html(a.text);"string"==typeof a.appendTo&&
(a.appendTo=b(a.appendTo));c.appendTo(a.appendTo);return c}var c=this,e=this.options;c.searchFormEle=b(this.element);c.set(e);c.searchForm=c.searchFormEle.ligerForm(e);e.searchBind=b.extend({},{searchBtnId:"searchBtn",searchBtnText:"查询",resetBtnId:"resetBtn",resetBtnText:"重置",bindGridId:"mainGrid",defaultFilter:{and:[],or:[]},dr:!1,onAfterSearch:null,where:null},e.searchBind);c.searchBind=e.searchBind;c.mainGridId=e.searchBind.bindGridId;c.searchBtnEle=b("#"+e.searchBind.searchBtnId);c.resetBtnEle=
b("#"+e.searchBind.resetBtnId);c.searchBtn=a({appendTo:c.searchBtnEle,width:80,text:e.searchBind.searchBtnText,click:function(){if(c.searchForm.valid()){e.historySearch&&e.historySearch.formId&&c._createHistoryForm(c.searchForm.getData(),!0);if(c.mainGridId){var a=liger.get(c.mainGridId),b;b=c.searchBind.where?"function"===typeof c.searchBind.where?c.searchBind.where.call(c,e,c.searchForm):c.searchBind.where:c.searchForm.getSearchFormData(c.searchBind.dr,c.searchBind.defaultFilter);a.set("parms",
[{name:"where",value:b}]);a.changePage("first");a.loadData()}"function"===typeof e.searchBind.onAfterSearch&&e.searchBind.onAfterSearch.call(this,e)}else c.searchForm.showInvalid()}});c.resetBtn=a({appendTo:c.resetBtnEle,width:80,text:e.searchBind.resetBtnText,click:function(){c.searchForm.reset();c.mainGridId&&liger.get(c.mainGridId).set("parms",[{name:"where",value:c.searchForm.getSearchFormData(!0)}])}});e.historySearch&&c._loadDataFormStorage(e.historySearch.storageId)},_loadDataFormStorage:function(a){var c=
this.options;a&&localStorage&&(a=localStorage.getItem(a))&&(this._currentSearchData=JSON2.parse(a));this._currentSearchData||(this._currentSearchData=c.historySearch.defaultFields);this._currentSearchData&&this._createHistoryForm(b.extend(!0,{},this._currentSearchData),!1)},_saveDataToStorage:function(a,b){a&&localStorage&&localStorage.setItem(a,JSON2.stringify(b))},_deleteDataFormStorage:function(a,b){var c;a&&localStorage&&(c=localStorage.getItem(a))&&(c=JSON2.parse(c),delete c[b],localStorage.setItem(a,
JSON2.stringify(c)))},_createHistoryForm:function(a,c){var e=this.options;if(this.historyForm){var f=this.historyForm;liger.remove(f);for(var g in f.editors){var k=f.editors[g].control;k&&k.destroy&&k.destroy()}b(f.element).html("").removeAttr("ligeruiid").removeClass("l-form")}else this._initHistoryForm();e.historySearch.options.prefixID=e.historySearch.options.prefixID||"hs_";f=e.historySearch.options;f.fields=this._getHistoryFields(a);this.searchForm.historyForm=this.historyForm=b("#"+e.historySearch.formId).ligerForm(f);
c&&this.historyForm.setData(a);this._saveDataToStorage(e.historySearch.storageId,this._currentSearchData)},_initHistoryForm:function(){var a=this,c=this.options;b("#"+c.historySearch.formId).on("click",".l-history-close",function(){var e=b(this),g=e.attr("data-name");a._hideHistoryField(g,e.parent().parent().find("input[ligeruiid]:eq(0)").attr("ligeruiid"));a._deleteDataFormStorage(c.historySearch.storageId,g);delete a._currentSearchData[g]});a.searchForm.historySearch=function(){if(this&&this.historyForm){if(a.mainGridId){var b=
liger.get(a.mainGridId),e;e=a.searchBind.where?"function"===typeof a.searchBind.where?a.searchBind.where.call(a,c,a.historyForm):a.searchBind.where:a.historyForm.getSearchFormData(a.searchBind.dr,a.searchBind.defaultFilter);b.set("parms",[{name:"where",value:e}]);b.changePage("first");b.loadData()}b=a.historyForm.getData();this.reset();this.setData(b)}};var e=c.historySearch.searchBtnId;if(e)b("#"+e).on("click",function(){a.searchForm&&a.searchForm.historySearch()})},_hideHistoryField:function(a,
b){(b=liger.get(b))&&(b.clear?b.clear():b.setValue&&b.setValue(""));this.historyForm.setVisible(a,!1)},_getHistoryFields:function(a){var c=this.options,e=[],f=this._initFields;this._currentSearchData||(this._currentSearchData={});f||(f=this._initFields=this._getInitFields(c.fields));a=b.extend(!0,{},a,this._currentSearchData);for(var g in a)(a[g]||"number"===typeof a[g])&&f[g]&&(e.push(f[g]),this._currentSearchData[g]=!0);return e},_getInitFields:function(a){var c=this.options,e={},f=c.historySearch.wordWidth,
g=c.historySearch.fieldWidthDiff||0,c=c.historySearch.exFields||{},k;a=b.extend(!0,[],a);for(var l=0,h=a.length;l<h;l++)k=a[l],k.name&&(e[k.name]=k,k.afterContent||(k.afterContent='\x3cli class\x3d"l-close"\x3e\x3ca href\x3d"javascript:;" class\x3d"l-history-close" data-name\x3d"'+k.name+'"\x3e\x26times;\x3c/a\x3e\x3c/li\x3e'),f&&k.display&&(k.labelWidth=k.display.length*f+g),a[l]=b.extend(!0,k,c[k.name]));return e}});b.ligerui.controls.SearchForm.prototype.setEnable=b.ligerui.controls.SearchForm.prototype.setEnabled;
b.ligerui.controls.SearchForm.prototype.setDisable=b.ligerui.controls.SearchForm.prototype.setDisabled})(jQuery);
!function(){function b(a){return"'"+a.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function a(a,c){function e(a){return m+=a.split(/\n/).length-1,p&&(a=a.replace(/\s+/g," ").replace(/\x3c!--[\w\W]*?--\x3e/g,"")),a&&(a=v[1]+b(a)+v[2]+"\n"),a}function f(a){var b=m;if(k?a=k(a,c):g&&(a=a.replace(/\n/g,function(){return m++,"$line\x3d"+m+";"})),0===a.indexOf("\x3d")){var e=l&&!/^=[=#]/.test(a);(a=a.replace(/^=[=#]?|[\s;]*$/g,""),e)?(e=a.replace(/\s*\([^\)]+\)/,""),n[e]||/^(include|print)$/.test(e)||
(a="$escape("+a+")")):a="$string("+a+")";a=v[1]+a+v[2]}return g&&(a="$line\x3d"+b+";"+a),z(a.replace(u,"").replace(x,",").replace(w,"").replace(B,"").replace(A,"").split(P),function(a){a&&!D[a]&&(K+=a+"\x3d"+("print"===a?J:"include"===a?I:n[a]?"$utils."+a:q[a]?"$helpers."+a:"$data."+a)+",",D[a]=!0)}),a+"\n"}var g=c.debug,h=c.closeTag,k=c.parser,p=c.compress,l=c.escape,m=1,D={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},r="".trim,v=r?["$out\x3d'';","$out+\x3d",";","$out"]:["$out\x3d[];",
"$out.push(",");","$out.join('')"],r=r?"$out+\x3dtext;return $out;":"$out.push(text);",J="function(){var text\x3d''.concat.apply('',arguments);"+r+"}",I="function(filename,data){data\x3ddata||$data;var text\x3d$utils.$include(filename,data,$filename);"+r+"}",K="'use strict';var $utils\x3dthis,$helpers\x3d$utils.$helpers,"+(g?"$line\x3d0,":""),F=v[0],r="return new String("+v[3]+");";z(a.split(c.openTag),function(a){a=a.split(h);var b=a[0],c=a[1];1===a.length?F+=e(b):(F+=f(b),c&&(F+=e(c)))});r=K+F+
r;g&&(r="try{"+r+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+b(a)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var L=new Function("$data","$filename",r);return L.prototype=n,L}catch(M){throw M.temp="function anonymous($data,$filename) {"+r+"}",M;}}var c=function(a,b){return"string"==typeof b?r(b,{filename:a}):g(a,b)};c.version="3.0.0";c.config=function(a,b){e[a]=b};var e=c.defaults={openTag:"\x3c%",closeTag:"%\x3e",escape:!0,cache:!0,compress:!1,
parser:null},f=c.cache={};c.render=function(a,b){return r(a,b)};var g=c.renderFile=function(a,b){a=c.get(a)||v({filename:a,name:"Render Error",message:"Template not found"});return b?a(b):a};c.get=function(a){var b;if(f[a])b=f[a];else if("object"==typeof document){var c=document.getElementById(a);c&&(b=(c.value||c.innerHTML).replace(/^\s*|\s*$/g,""),b=r(b,{filename:a}))}return b};var k=function(a,b){return"string"!=typeof a&&(b=typeof a,"number"===b?a+="":a="function"===b?k(a.call(a)):""),a},l={"\x3c":"\x26#60;",
"\x3e":"\x26#62;",'"':"\x26#34;","'":"\x26#39;","\x26":"\x26#38;"},h=function(a){return l[a]},m=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},n=c.utils={$helpers:{},$include:g,$string:k,$escape:function(a){return k(a).replace(/&(?![\w#]+;)|[<>"']/g,h)},$each:function(a,b){var c,e;if(m(a))for(c=0,e=a.length;e>c;c++)b.call(a,a[c],c,a);else for(c in a)b.call(a,a[c],c)}};c.helper=function(a,b){q[a]=b};var q=c.helpers=n.$helpers;c.onerror=function(a){var b="Template Error\n\n",
c;for(c in a)b+="\x3c"+c+"\x3e\n"+a[c]+"\n\n";"object"==typeof console&&console.error(b)};var v=function(a){return c.onerror(a),function(){return"{Template Error}"}},r=c.compile=function(b,c){function g(a){try{return new l(a,k)+""}catch(E){return c.debug?v(E)():(c.debug=!0,r(b,c)(a))}}c=c||{};for(var h in e)void 0===c[h]&&(c[h]=e[h]);var k=c.filename;try{var l=a(b,c)}catch(H){return H.filename=k||"anonymous",H.name="Syntax Error",v(H)}return g.prototype=l.prototype,g.toString=function(){return l.toString()},
k&&c.cache&&(f[k]=g),g},z=n.$each,u=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,x=/[^\w$]+/g,w=new RegExp(""+("\\b"+"break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined".replace(/,/g,
"\\b|\\b")+"\\b"),"g"),B=/^\d[^,]*|,\d[^,]*/g,A=/^,+|,+$/g,P=/^$|,+/;e.openTag="{{";e.closeTag="}}";e.parser=function(a){a=a.replace(/^\s/,"");var b=a.split(" "),e=b.shift(),f=b.join(" ");switch(e){case "if":a="if("+f+"){";break;case "else":b="if"===b.shift()?" if("+b.join(" ")+")":"";a="}else"+b+"{";break;case "/if":a="}";break;case "each":e=b[0]||"$data";a=b[2]||"$value";f=b[3]||"$index";"as"!==(b[1]||"as")&&(e="[]");a="$each("+e+",function("+(a+","+f)+"){";break;case "/each":a="});";break;case "echo":a=
"print("+f+");";break;case "print":case "include":a=e+"("+b.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(f)){b=!0;0===a.indexOf("#")&&(a=a.substr(1),b=!1);e=0;a=a.split("|");for(var f=a.length,g=a[e++];f>e;e++)var h=a[e].split(":"),k=h.shift(),h=h.join(":")||"",g=(h&&(h=", "+h),"$helpers."+k+"("+g+h+")");a=(b?"\x3d":"\x3d#")+g}else a=c.helpers[e]?"\x3d#"+e+"("+b.join(",")+");":"\x3d"+a}return a};"function"==typeof define?define(function(){return c}):"undefined"!=typeof exports?module.exports=
c:this.template=c}();
var cntrUtil=function(){return{verifyContainerCode:function(b){if(11!=b.length)return!1;for(var a=0,c=0;10>c;c++){var e="0123456789A?BCDEFGHIJK?LMNOPQRSTU?VWXYZ".indexOf(b[c]);if(-1==e||"?"=="0123456789A?BCDEFGHIJK?LMNOPQRSTU?VWXYZ"[e])break;e*=Math.pow(2,c);a+=e}a=a%11%10;return parseInt(b[10])==a}}}(),priceBaseUtil=function(){return{processPriceBase:function(b){var a={},c=$.grep(b.price_base,function(a){return!a.pdictmx_code});b=$.grep(b.price_base,function(a){return!!a.pdictmx_code});for(var e=
0;e<c.length;e++){var f=c[e];a[f.id]=f;f.unitMap={};f.unitList=$.grep(b,function(a){var b=a.pdictmx_code===f.id;b&&(f.unitMap[a.id]=a);return b})}return{remap:a,base:c}},processCargoUnit:function(b){for(var a=[],c=["BASE_WEIGHT","BASE_QTY","BASE_VOLUME"],e=0;e<c.length;e++){var f=b[c[e]];f&&(a=a.concat(f.unitList||[]))}return a}}}(),xlsUtil=function(){return{exp:function(b,a,c,e,f,g,k,l){a=a.options.columns;var h=[];if(!f){f=[];g=[];for(var m in a){var n=a[m];if(!n.xlsIgnore){var q=n.xlsHead||n.display,
v=n.xlsName||n.name;q&&v&&(f.push(q),g.push(v),h.push(n.totalSummary?"SUM":"#"))}}f=f.join(",");g=g.join(",");h=h.join(",")}if(e)for(var r in e)b.find("input[name\x3d"+r+"]").val(e[r]);b.find("input[name\x3dfile_name]").val(c);b.find("input[name\x3dheaders]").val(f);b.find("input[name\x3dnames]").val(g);b.find("input[name\x3dfooters]").val(h);b.find("input[name\x3dsortname]").val(k);b.find("input[name\x3dsortorder]").val(l);b.submit()}}}(),GPS={PI:3.141592653589793,x_pi:52.35987755982988,delta:function(b,
a){var c=this.transformLat(a-105,b-35);a=this.transformLon(a-105,b-35);b=b/180*this.PI;var e=Math.sin(b),e=1-.006693421622965943*e*e,f=Math.sqrt(e),c=180*c/(6335552.717000426/(e*f)*this.PI);a=180*a/(6378245/f*Math.cos(b)*this.PI);return{lat:c,lon:a}},gcj_encrypt:function(b,a){if(this.outOfChina(b,a))return{lat:b,lon:a};var c=this.delta(b,a);return{lat:b+c.lat,lon:a+c.lon}},gcj_decrypt:function(b,a){if(this.outOfChina(b,a))return{lat:b,lon:a};var c=this.delta(b,a);return{lat:b-c.lat,lon:a-c.lon}},
gcj_decrypt_exact:function(b,a){for(var c=.01,e=.01,f=b-c,g=a-e,k=b+c,l=a+e,h,m,n=0;;){h=(f+k)/2;m=(g+l)/2;e=this.gcj_encrypt(h,m);c=e.lat-b;e=e.lon-a;if(1E-9>Math.abs(c)&&1E-9>Math.abs(e))break;0<c?k=h:f=h;0<e?l=m:g=m;if(1E4<++n)break}return{lat:h,lon:m}},bd_encrypt:function(b,a){var c=Math.sqrt(a*a+b*b)+2E-5*Math.sin(b*this.x_pi);b=Math.atan2(b,a)+3E-6*Math.cos(a*this.x_pi);bdLon=c*Math.cos(b)+.0065;bdLat=c*Math.sin(b)+.006;return{lat:bdLat,lon:bdLon}},bd_decrypt:function(b,a){a-=.0065;var c=b-
.006;b=Math.sqrt(a*a+c*c)-2E-5*Math.sin(c*this.x_pi);a=Math.atan2(c,a)-3E-6*Math.cos(a*this.x_pi);return{lat:b*Math.sin(a),lon:b*Math.cos(a)}},mercator_encrypt:function(b,a){return{lat:Math.log(Math.tan((90+b)*this.PI/360))/(this.PI/180)*2.003750834E7/180,lon:2.003750834E7*a/180}},mercator_decrypt:function(b,a){return{lat:180/this.PI*(2*Math.atan(Math.exp(b/2.003750834E7*180*this.PI/180))-this.PI/2),lon:a/2.003750834E7*180}},distance:function(b,a,c,e){b=Math.cos(b*this.PI/180)*Math.cos(c*this.PI/
180)*Math.cos((a-e)*this.PI/180)+Math.sin(b*this.PI/180)*Math.sin(c*this.PI/180);1<b&&(b=1);-1>b&&(b=-1);return 6371E3*Math.acos(b)},outOfChina:function(b,a){return 72.004>a||137.8347<a||.8293>b||55.8271<b?!0:!1},transformLat:function(b,a){var c=-100+2*b+3*a+.2*a*a+.1*b*a+.2*Math.sqrt(Math.abs(b)),c=c+2*(20*Math.sin(6*b*this.PI)+20*Math.sin(2*b*this.PI))/3,c=c+2*(20*Math.sin(a*this.PI)+40*Math.sin(a/3*this.PI))/3;return c+=2*(160*Math.sin(a/12*this.PI)+320*Math.sin(a*this.PI/30))/3},transformLon:function(b,
a){a=300+b+2*a+.1*b*b+.1*b*a+.1*Math.sqrt(Math.abs(b));a+=2*(20*Math.sin(6*b*this.PI)+20*Math.sin(2*b*this.PI))/3;a+=2*(20*Math.sin(b*this.PI)+40*Math.sin(b/3*this.PI))/3;return a+=2*(150*Math.sin(b/12*this.PI)+300*Math.sin(b/30*this.PI))/3}};
//# sourceMappingURL=tms.util.min.js.map